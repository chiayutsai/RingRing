{"version":3,"sources":["webpack:///./src/views/backend/Login.vue","webpack:///./src/views/backend/Login.vue?437a"],"names":["class","for","type","id","isLoading","ref","login","errors","name","placeholder","rules","user","username","password","data","provide","emitter","components","Noty","methods","this","$http","post","then","res","success","token","expired","document","cookie","Date","$refs","form","resetForm","$router","push","emit","message","error","catch","err","render"],"mappings":"4IAGKA,MAAM,+C,EACP,yBAA4C,OAAvCA,MAAM,4BAA0B,S,GAClCA,MAAM,6E,GACJA,MAAM,2C,EACT,yBAA+C,MAA3CA,MAAM,+BAA8B,MAAE,G,GAEnCA,MAAM,+C,+BAUA,M,EACT,yBAAgC,SAAzBC,IAAI,WAAU,OAAG,G,GAGrBD,MAAM,+C,EAWT,yBAAkC,SAA3BC,IAAI,YAAW,QAAI,G,EAG5B,yBAMS,UALPC,KAAK,SACLF,MAAM,iEACNG,GAAG,SACJ,QAED,G,8TA1CR,yBAAkC,GAAxBC,UAAW,EAAAA,WAAS,sBAC9B,yBAAQ,GACR,yBA4CM,MA5CN,EA4CM,CA3CF,EACF,yBAyCM,MAzCN,EAyCM,CAxCJ,yBAuCM,MAvCN,EAuCM,CAtCJ,EACA,yBAoCO,GApCmBC,IAAI,OAAQ,SAAQ,EAAAC,O,+BAC5C,gBADcC,EACd,EADcA,OACd,MADoB,CACpB,yBAaM,MAbN,EAaM,CAZJ,yBASS,GARPJ,GAAG,UACHK,KAAK,QACLN,KAAK,QACLF,MAAK,CAAC,eAAc,cACIO,EAAO,WAC/BE,YAAY,mBACZC,MAAM,iB,WACG,EAAAC,KAAKC,S,qDAAL,EAAAD,KAAKC,SAAQ,K,iCAExB,EACA,yBAAqE,GAAtDJ,KAAK,QAAQR,MAAM,uBAEpC,yBAaM,MAbN,EAaM,CAZJ,yBASS,GARPG,GAAG,WACHK,KAAK,KACLN,KAAK,WACLF,MAAK,CAAC,eAAc,cACIO,EAAO,QAC/BE,YAAY,QACZC,MAAM,W,WACG,EAAAC,KAAKE,S,qDAAL,EAAAF,KAAKE,SAAQ,K,+BAExB,EACA,yBAAkE,GAAnDL,KAAK,KAAKR,MAAM,uBAEjC,M,sEAiBO,GACbc,KADa,WAEX,MAAO,CACLH,KAAM,CACJC,SAAU,GACVC,SAAU,IAEZT,WAAW,IAGfW,QAVa,WAWX,MAAO,CACLC,QAAA,SAGJC,WAAY,CACVC,OAAA,MAEFC,QAAS,CACPb,MADO,WACC,WACNc,KAAKhB,WAAY,EACjBgB,KAAKC,MACFC,KADH,UACW,wCADX,gBACkDF,KAAKT,MACpDY,MAAK,SAACC,GACL,GAAIA,EAAIV,KAAKW,QAAS,CACpB,MAA2BD,EAAIV,KAAvBY,EAAR,EAAQA,MAAOC,EAAf,EAAeA,QACfC,SAASC,OAAT,sBAAiCH,EAAjC,qBAAmD,IAAII,KAAKH,IAC5D,EAAKI,MAAMC,KAAKC,YAChB,EAAKC,QAAQC,KAAK,oBAClB,OAAQC,KAAK,eAAgB,CAC3BlC,KAAM,UACNmC,QAAS,eAGX,EAAKjC,WAAY,EACjB,OAAQgC,KAAK,eAAgB,CAC3BlC,KAAM,QACNmC,QAAS,UAAF,OAAYb,EAAIV,KAAKwB,MAAMD,cAIvCE,OAAM,SAACC,GAAD,OAASA,QC5FxB,EAAOC,OAASA,EAED","file":"js/chunk-2d0b382f.a5595fcf.js","sourcesContent":["<template>\n<Loading :isLoading=\"isLoading\" />\n<Noty />\n<div class=\"position-relative bg-login w-100 min-vh-100\">\n    <div class=\"bg-overlay opacity-5 z-0\"></div>\n  <div class=\"position-relative d-flex justify-content-center align-items-center vh-100\">\n    <div class=\"w-40 bg-login-form rounded-3 px-12 py-8\">\n      <h2 class=\"text-white text-center mb-6\">登入</h2>\n      <Form v-slot=\"{ errors }\" ref=\"form\" @submit=\"login\">\n        <div class=\"form-floating form-downline form-login mb-6\">\n          <Field\n            id=\"account\"\n            name=\"email\"\n            type=\"email\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            placeholder=\"name@example.com\"\n            rules=\"email|required\"\n            v-model=\"user.username\"\n          ></Field>Î\n          <label for=\"account\">帳號：</label>\n          <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"form-floating form-downline form-login mb-6\">\n          <Field\n            id=\"password\"\n            name=\"密碼\"\n            type=\"password\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['密碼'] }\"\n            placeholder=\"請輸入姓名\"\n            rules=\"required\"\n            v-model=\"user.password\"\n          ></Field>\n          <label for=\"password\"> 密碼：</label>\n          <error-message name=\"密碼\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <button\n          type=\"submit\"\n          class=\"btn btn-lg text-white btn-secondary secondary-hover w-100 mt-3\"\n          id=\"login\"\n        >\n          登入\n        </button>\n      </Form>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Noty from '@/components/Noty.vue';\nimport emitter from '@/methods/eventBus';\n\nexport default {\n  data() {\n    return {\n      user: {\n        username: '',\n        password: '',\n      },\n      isLoading: false,\n    };\n  },\n  provide() {\n    return {\n      emitter,\n    };\n  },\n  components: {\n    Noty,\n  },\n  methods: {\n    login() {\n      this.isLoading = true;\n      this.$http\n        .post(`${process.env.VUE_APP_API}admin/signin`, this.user)\n        .then((res) => {\n          if (res.data.success) {\n            const { token, expired } = res.data;\n            document.cookie = `chiayuToken=${token}; expires=${new Date(expired)}`;\n            this.$refs.form.resetForm();\n            this.$router.push('/dashboard/admin');\n            emitter.emit('push-message', {\n              type: 'success',\n              message: '登入成功 ',\n            });\n          } else {\n            this.isLoading = false;\n            emitter.emit('push-message', {\n              type: 'error',\n              message: `登入失敗 : ${res.data.error.message}`,\n            });\n          }\n        })\n        .catch((err) => err);\n    },\n  },\n};\n</script>\n","import { render } from \"./Login.vue?vue&type=template&id=18afc712\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
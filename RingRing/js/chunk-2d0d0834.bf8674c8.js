(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0834"],{"67fc":function(e,t,o){"use strict";o.r(t);var c=o("7a23"),a={key:0},r={class:"position-fixed w-100 bg-secondary z-1 d-flex align-items-center\n      justify-content-between "},s=Object(c["createVNode"])("p",{class:"p-4"},[Object(c["createVNode"])("span",{class:"material-icons me-2"}," dashboard "),Object(c["createTextVNode"])(" 後台管理 ")],-1),n={class:"d-flex"},d=Object(c["createVNode"])("span",{class:"material-icons"}," home ",-1),i=Object(c["createTextVNode"])(" 前往前台 "),u=Object(c["createVNode"])("span",{class:"material-icons"}," logout ",-1),h=Object(c["createTextVNode"])(" 登出 "),b={class:"position-fixed w-10 h-dashboard bg-secondary",ref:"nav"},l=Object(c["createTextVNode"])("產品列表"),p=Object(c["createTextVNode"])("新增產品"),f=Object(c["createTextVNode"])("訂單列表"),w=Object(c["createTextVNode"])("優惠券列表"),O=Object(c["createTextVNode"])("新增優惠券"),j=Object(c["createTextVNode"])("文章列表"),m=Object(c["createTextVNode"])("新增文章"),g={class:"w-90 float-end py-15 px-8 bg-dashboard min-vh-100"};function N(e,t,o,N,V,v){var k=Object(c["resolveComponent"])("Loading"),x=Object(c["resolveComponent"])("Noty"),$=Object(c["resolveComponent"])("router-link"),C=Object(c["resolveComponent"])("router-view");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(k,{isLoading:V.isLoading},null,8,["isLoading"]),Object(c["createVNode"])(x),V.check?(Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[Object(c["createVNode"])("div",r,[s,Object(c["createVNode"])("div",n,[Object(c["createVNode"])($,{to:"/",class:"p-4 dashboard-hover"},{default:Object(c["withCtx"])((function(){return[d,i]})),_:1}),Object(c["createVNode"])("a",{href:"#",class:"p-4 dashboard-hover",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(){return v.logOut&&v.logOut.apply(v,arguments)}),["prevent"]))},[u,h])])]),Object(c["createVNode"])("div",b,[Object(c["createVNode"])("a",{href:"#",class:["p-4 dropdown",{"page-active":"admin"===V.nowPage}],onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return v.changeDropdown("admin")}),["prevent"]))},"產品",2),Object(c["createVNode"])("ul",{class:["dropdown-menu",{show:"admin"==V.nowPage}],ref:"admin"},[Object(c["createVNode"])($,{to:"/dashboard/admin",class:"p-4 border-bottom border-secondary"},{default:Object(c["withCtx"])((function(){return[l]})),_:1}),Object(c["createVNode"])($,{to:"/dashboard/newProduct",class:"p-4 "},{default:Object(c["withCtx"])((function(){return[p]})),_:1})],2),Object(c["createVNode"])("a",{href:"#",class:["p-4 dropdown",{"page-active":"order"==V.nowPage}],onClick:t[3]||(t[3]=Object(c["withModifiers"])((function(e){return v.changeDropdown("order")}),["prevent"]))},"訂單",2),Object(c["createVNode"])("ul",{class:["dropdown-menu",{show:"order"==V.nowPage}],ref:"order"},[Object(c["createVNode"])($,{to:"/dashboard/order",class:"p-4"},{default:Object(c["withCtx"])((function(){return[f]})),_:1})],2),Object(c["createVNode"])("a",{href:"#",class:["p-4 dropdown",{"page-active":"coupons"==V.nowPage}],onClick:t[4]||(t[4]=Object(c["withModifiers"])((function(e){return v.changeDropdown("coupons")}),["prevent"]))},"優惠券",2),Object(c["createVNode"])("ul",{class:["dropdown-menu",{show:"coupons"==V.nowPage}],ref:"coupon"},[Object(c["createVNode"])($,{to:"/dashboard/coupons",class:"p-4 border-bottom border-secondary"},{default:Object(c["withCtx"])((function(){return[w]})),_:1}),Object(c["createVNode"])($,{to:"/dashboard/newCoupon",class:"p-4"},{default:Object(c["withCtx"])((function(){return[O]})),_:1})],2),Object(c["createVNode"])("a",{href:"#",class:["p-4 dropdown",{"page-active":"articles"==V.nowPage}],onClick:t[5]||(t[5]=Object(c["withModifiers"])((function(e){return v.changeDropdown("articles")}),["prevent"]))},"文章",2),Object(c["createVNode"])("ul",{class:["dropdown-menu",{show:"articles"==V.nowPage}],ref:"article"},[Object(c["createVNode"])($,{to:"/dashboard/articles",class:"p-4 border-bottom border-secondary"},{default:Object(c["withCtx"])((function(){return[j]})),_:1}),Object(c["createVNode"])($,{to:"/dashboard/newArticle",class:"p-4"},{default:Object(c["withCtx"])((function(){return[m]})),_:1})],2)],512),Object(c["createVNode"])("div",g,[V.check?(Object(c["openBlock"])(),Object(c["createBlock"])(C,{key:0})):Object(c["createCommentVNode"])("",!0)])])):Object(c["createCommentVNode"])("",!0)],64)}o("159b"),o("b0c0"),o("ac1f"),o("5319");var V=o("b86a"),v=o("37ca"),k={components:{Noty:V["a"]},data:function(){return{check:!1,nowPage:"",isLoading:!1}},provide:function(){return{emitter:v["a"]}},methods:{checkUser:function(){var e=this;this.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/user/check")).then((function(t){t.data.success?(e.check=!0,e.isLoading=!1):(v["a"].emit("push-message",{type:"error",message:"驗證錯誤，請重新登入"}),e.$router.push("/login"))})).catch((function(e){return e}))},logOut:function(){var e=this;this.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/","logout")).then((function(t){t.data.success?(v["a"].emit("push-message",{type:"success",message:"已登出"}),e.isLoading=!1,document.cookie="chiayuToken=; expires=;",e.$router.push("/login")):e.isLoading=!1})).catch((function(e){return e}))},changeDropdown:function(e){var t=this;this.nowPage=e,this.$refs.nav.childNodes.forEach((function(e){e.classList.contains("show")&&t.$refs.admin.classList.remove("show")})),"admin"===e?(this.$refs.admin.classList.add("show"),this.$router.push("/dashboard/admin")):"order"===e?(this.$refs.order.classList.add("show"),this.$router.push("/dashboard/order")):"coupons"===e?(this.$refs.coupon.classList.add("show"),this.$router.push("/dashboard/coupons")):"articles"===e&&(this.$refs.article.classList.add("show"),this.$router.push("/dashboard/articles"))},pageCheck:function(){"admin"===this.$route.name||"newProduct"===this.$route.name?this.nowPage="admin":"order"===this.$route.name||"editOrder"===this.$route.name?this.nowPage="order":"coupons"===this.$route.name||"newCoupon"===this.$route.name?this.nowPage="coupons":"articles"!==this.$route.name&&"newArticle"!==this.$route.name||(this.nowPage="articles")}},created:function(){var e=document.cookie.replace(/(?:(?:^|.*;\s*)chiayuToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=e,this.checkUser()},mounted:function(){this.pageCheck()}};k.render=N;t["default"]=k}}]);
//# sourceMappingURL=chunk-2d0d0834.bf8674c8.js.map
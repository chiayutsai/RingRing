{"version":3,"sources":["webpack:///./src/views/backend/DashBoard.vue","webpack:///./src/views/backend/DashBoard.vue?047b"],"names":["class","ref","isLoading","check","to","href","logOut","nowPage","changeDropdown","components","Noty","data","provide","emitter","methods","checkUser","this","$http","post","then","res","success","emit","type","message","$router","push","catch","err","document","cookie","page","$refs","nav","childNodes","forEach","item","classList","contains","admin","remove","add","order","coupon","article","pageCheck","$route","name","created","cookieToken","replace","defaults","headers","common","Authorization","mounted","render"],"mappings":"sJAKMA,MAAM,mG,EAGN,yBAKI,KALDA,MAAM,OAAK,CACZ,yBAEO,QAFDA,MAAM,uBAAsB,e,6BAE3B,Y,MAGJA,MAAM,U,EAEP,yBAEO,QAFDA,MAAM,kBAAiB,UAE7B,G,+BAAO,U,EAIP,yBAEO,QAFDA,MAAM,kBAAiB,YAE7B,G,+BAAO,Q,GAKRA,MAAM,+CAA+CC,IAAI,O,+BAcvD,Q,+BAEqD,Q,+BAUN,Q,+BAW/C,S,+BAEmD,S,+BAWnD,Q,+BAEoD,Q,GAGtDD,MAAM,qD,0RAnFf,yBAA2C,GAAjCE,UAAW,EAAAA,WAAS,sBAC9B,yBAAQ,GACK,EAAAC,O,yBAAX,yBAoFM,SAnFJ,yBAwBM,MAxBN,EAwBM,CApBJ,EAMA,yBAaM,MAbN,EAaM,CAZJ,yBAKc,GALAC,GAAE,IAAOJ,MAAM,uB,+BAC3B,iBAEO,CAFP,E,YAKF,yBAKI,KALDK,KAAK,IAAIL,MAAM,sBAAuB,QAAK,0DAAU,EAAAM,QAAA,EAAAA,OAAA,qBAAM,e,CAC5D,E,QAON,yBAsDM,MAtDN,EAsDM,CArDJ,yBAMC,KALCD,KAAK,IACLL,MAAK,CAAC,eAAc,eACY,UAAP,EAAAO,UACxB,QAAK,2DAAU,EAAAC,eAAc,0BAC7B,KAAE,GAEL,yBASK,MARHR,MAAK,CAAC,gBAAe,MACE,SAAP,EAAAO,UAChBN,IAAI,S,CAEJ,yBAEC,GAFaG,GAAE,mBAAsBJ,MAAM,sC,+BACzC,iBAAI,C,YAEP,yBAA0E,GAA5DI,GAAE,wBAA2BJ,MAAM,Q,+BAAO,iBAAI,C,gBAE9D,yBAMC,KALCK,KAAK,IACLL,MAAK,CAAC,eAAc,eACY,SAAP,EAAAO,UACxB,QAAK,2DAAU,EAAAC,eAAc,0BAC7B,KAAE,GAEL,yBAEK,MAFDR,MAAK,CAAC,gBAAe,MAAwB,SAAP,EAAAO,UAAsBN,IAAI,S,CAClE,yBAAoE,GAAtDG,GAAE,mBAAsBJ,MAAM,O,+BAAM,iBAAI,C,gBAExD,yBAMC,KALCK,KAAK,IACLL,MAAK,CAAC,eAAc,eACY,WAAP,EAAAO,UACxB,QAAK,2DAAU,EAAAC,eAAc,4BAC7B,MAAG,GAEN,yBAKK,MALDR,MAAK,CAAC,gBAAe,MAAwB,WAAP,EAAAO,UAAwBN,IAAI,U,CACpE,yBAEC,GAFaG,GAAE,qBAAwBJ,MAAM,sC,+BAC3C,iBAAK,C,YAER,yBAAyE,GAA3DI,GAAE,uBAA0BJ,MAAM,O,+BAAM,iBAAK,C,gBAE5D,yBAMA,KALCK,KAAK,IACLL,MAAK,CAAC,eAAc,eACY,YAAP,EAAAO,UACxB,QAAK,2DAAU,EAAAC,eAAc,6BAC7B,KAAE,GAEL,yBAKK,MALDR,MAAK,CAAC,gBAAe,MAAwB,YAAP,EAAAO,UAAyBN,IAAI,W,CACrE,yBAEC,GAFaG,GAAE,sBAAyBJ,MAAM,sC,+BAC5C,iBAAI,C,YAEP,yBAAyE,GAA3DI,GAAE,wBAA2BJ,MAAM,O,+BAAM,iBAAI,C,sBAG/D,yBAEM,MAFN,EAEM,CADe,EAAAG,O,yBAAnB,yBAA4B,Y,4JASnB,GACbM,WAAY,CACVC,OAAA,MAEFC,KAJa,WAKX,MAAO,CACLR,OAAO,EACPI,QAAS,GACTL,WAAW,IAGfU,QAXa,WAYX,MAAO,CACLC,QAAA,SAGJC,QAAS,CACPC,UADO,WACK,WACVC,KAAKd,WAAY,EACjBc,KAAKC,MACFC,KADH,UACW,wCADX,mBAEGC,MAAK,SAACC,GACDA,EAAIT,KAAKU,SACX,EAAKlB,OAAQ,EACb,EAAKD,WAAY,IAEjB,OAAQoB,KAAK,eAAgB,CAC3BC,KAAM,QACNC,QAAS,eAEX,EAAKC,QAAQC,KAAK,cAGrBC,OAAM,SAACC,GAAD,OAASA,MAEpBtB,OAnBO,WAmBE,WACPU,KAAKd,WAAY,EACjBc,KAAKC,MACFC,KADH,UACW,wCADX,WAEGC,MAAK,SAACC,GACDA,EAAIT,KAAKU,SACX,OAAQC,KAAK,eAAgB,CAC3BC,KAAM,UACNC,QAAS,QAEX,EAAKtB,WAAY,EACjB2B,SAASC,OAAS,0BAClB,EAAKL,QAAQC,KAAK,WAElB,EAAKxB,WAAY,KAGpByB,OAAM,SAACC,GAAD,OAASA,MAEpBpB,eAtCO,SAsCQuB,GAAM,WACnBf,KAAKT,QAAUwB,EACff,KAAKgB,MAAMC,IAAIC,WAAWC,SAAQ,SAACC,GAC7BA,EAAKC,UAAUC,SAAS,SAC1B,EAAKN,MAAMO,MAAMF,UAAUG,OAAO,WAGzB,UAATT,GACFf,KAAKgB,MAAMO,MAAMF,UAAUI,IAAI,QAC/BzB,KAAKS,QAAQC,KAAK,qBACA,UAATK,GACTf,KAAKgB,MAAMU,MAAML,UAAUI,IAAI,QAC/BzB,KAAKS,QAAQC,KAAK,qBACA,YAATK,GACTf,KAAKgB,MAAMW,OAAON,UAAUI,IAAI,QAChCzB,KAAKS,QAAQC,KAAK,uBACA,aAATK,IACTf,KAAKgB,MAAMY,QAAQP,UAAUI,IAAI,QACjCzB,KAAKS,QAAQC,KAAK,yBAGtBmB,UA3DO,WA4DoB,UAArB7B,KAAK8B,OAAOC,MAAyC,eAArB/B,KAAK8B,OAAOC,KAC9C/B,KAAKT,QAAU,QACe,UAArBS,KAAK8B,OAAOC,MAAyC,cAArB/B,KAAK8B,OAAOC,KACrD/B,KAAKT,QAAU,QACe,YAArBS,KAAK8B,OAAOC,MAA2C,cAArB/B,KAAK8B,OAAOC,KACvD/B,KAAKT,QAAU,UACe,aAArBS,KAAK8B,OAAOC,MAA4C,eAArB/B,KAAK8B,OAAOC,OACxD/B,KAAKT,QAAU,cAIrByC,QAvFa,WAwFX,IAAMC,EAAcpB,SAASC,OAAOoB,QAClC,oDACA,MAEFlC,KAAKC,MAAMkC,SAASC,QAAQC,OAAOC,cAAgBL,EACnDjC,KAAKD,aAEPwC,QA/Fa,WAgGXvC,KAAK6B,cC3LT,EAAOW,OAASA,EAED","file":"js/chunk-2d0d0834.3ce1e61a.js","sourcesContent":["<template>\n<Loading :isLoading=\"isLoading\" ></Loading>\n<Noty />\n  <div v-if=\"check\">\n    <div\n      class=\"position-fixed w-100 bg-secondary z-1 d-flex align-items-center\n      justify-content-between \"\n    >\n      <p class=\"p-4\">\n        <span class=\"material-icons me-2\">\n          dashboard\n        </span>\n        後台管理\n      </p>\n      <div class=\"d-flex\">\n        <router-link :to=\"`/`\" class=\"p-4 dashboard-hover\">\n          <span class=\"material-icons\">\n            home\n          </span>\n          前往前台\n        </router-link>\n        <a href=\"#\" class=\"p-4 dashboard-hover\" @click.prevent=\"logOut\">\n          <span class=\"material-icons\">\n            logout\n          </span>\n          登出\n        </a>\n      </div>\n    </div>\n    <div class=\"position-fixed w-10 h-dashboard bg-secondary\" ref=\"nav\">\n      <a\n        href=\"#\"\n        class=\"p-4 dropdown\"\n        :class=\"{ 'page-active': nowPage === 'admin' }\"\n        @click.prevent=\"changeDropdown('admin')\"\n        >產品</a\n      >\n      <ul\n        class=\"dropdown-menu\"\n        :class=\"{ show: nowPage == 'admin'}\"\n        ref=\"admin\"\n      >\n        <router-link :to=\"`/dashboard/admin`\" class=\"p-4 border-bottom border-secondary\"\n          >產品列表</router-link\n        >\n        <router-link :to=\"`/dashboard/newProduct`\" class=\"p-4 \">新增產品</router-link>\n      </ul>\n      <a\n        href=\"#\"\n        class=\"p-4 dropdown\"\n        :class=\"{ 'page-active': nowPage == 'order' }\"\n        @click.prevent=\"changeDropdown('order')\"\n        >訂單</a\n      >\n      <ul class=\"dropdown-menu\" :class=\"{ show: nowPage == 'order' }\" ref=\"order\">\n        <router-link :to=\"`/dashboard/order`\" class=\"p-4\">訂單列表</router-link>\n      </ul>\n      <a\n        href=\"#\"\n        class=\"p-4 dropdown\"\n        :class=\"{ 'page-active': nowPage == 'coupons' }\"\n        @click.prevent=\"changeDropdown('coupons')\"\n        >優惠券</a\n      >\n      <ul class=\"dropdown-menu\" :class=\"{ show: nowPage == 'coupons' }\" ref=\"coupon\">\n        <router-link :to=\"`/dashboard/coupons`\" class=\"p-4 border-bottom border-secondary\"\n          >優惠券列表</router-link\n        >\n        <router-link :to=\"`/dashboard/newCoupon`\" class=\"p-4\">新增優惠券</router-link>\n      </ul>\n       <a\n        href=\"#\"\n        class=\"p-4 dropdown\"\n        :class=\"{ 'page-active': nowPage == 'articles' }\"\n        @click.prevent=\"changeDropdown('articles')\"\n        >文章</a\n      >\n      <ul class=\"dropdown-menu\" :class=\"{ show: nowPage == 'articles' }\" ref=\"article\">\n        <router-link :to=\"`/dashboard/articles`\" class=\"p-4 border-bottom border-secondary\"\n          >文章列表</router-link\n        >\n        <router-link :to=\"`/dashboard/newArticle`\" class=\"p-4\">新增文章</router-link>\n      </ul>\n    </div>\n    <div class=\"w-90 float-end py-15 px-8 bg-dashboard min-vh-100\">\n      <router-view v-if=\"check\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Noty from '@/components/Noty.vue';\nimport emitter from '../../methods/eventBus';\n\nexport default {\n  components: {\n    Noty,\n  },\n  data() {\n    return {\n      check: false,\n      nowPage: '',\n      isLoading: false,\n    };\n  },\n  provide() {\n    return {\n      emitter,\n    };\n  },\n  methods: {\n    checkUser() {\n      this.isLoading = true;\n      this.$http\n        .post(`${process.env.VUE_APP_API}api/user/check`)\n        .then((res) => {\n          if (res.data.success) {\n            this.check = true;\n            this.isLoading = false;\n          } else {\n            emitter.emit('push-message', {\n              type: 'error',\n              message: '驗證錯誤，請重新登入',\n            });\n            this.$router.push('/login');\n          }\n        })\n        .catch((err) => err);\n    },\n    logOut() {\n      this.isLoading = true;\n      this.$http\n        .post(`${process.env.VUE_APP_API}logout`)\n        .then((res) => {\n          if (res.data.success) {\n            emitter.emit('push-message', {\n              type: 'success',\n              message: '已登出',\n            });\n            this.isLoading = false;\n            document.cookie = 'chiayuToken=; expires=;';\n            this.$router.push('/login');\n          } else {\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => err);\n    },\n    changeDropdown(page) {\n      this.nowPage = page;\n      this.$refs.nav.childNodes.forEach((item) => {\n        if (item.classList.contains('show')) {\n          this.$refs.admin.classList.remove('show');\n        }\n      });\n      if (page === 'admin') {\n        this.$refs.admin.classList.add('show');\n        this.$router.push('/dashboard/admin');\n      } else if (page === 'order') {\n        this.$refs.order.classList.add('show');\n        this.$router.push('/dashboard/order');\n      } else if (page === 'coupons') {\n        this.$refs.coupon.classList.add('show');\n        this.$router.push('/dashboard/coupons');\n      } else if (page === 'articles') {\n        this.$refs.article.classList.add('show');\n        this.$router.push('/dashboard/articles');\n      }\n    },\n    pageCheck() {\n      if (this.$route.name === 'admin' || this.$route.name === 'newProduct') {\n        this.nowPage = 'admin';\n      } else if (this.$route.name === 'order' || this.$route.name === 'editOrder') {\n        this.nowPage = 'order';\n      } else if (this.$route.name === 'coupons' || this.$route.name === 'newCoupon') {\n        this.nowPage = 'coupons';\n      } else if (this.$route.name === 'articles' || this.$route.name === 'newArticle') {\n        this.nowPage = 'articles';\n      }\n    },\n  },\n  created() {\n    const cookieToken = document.cookie.replace(\n      /(?:(?:^|.*;\\s*)chiayuToken\\s*=\\s*([^;]*).*$)|^.*$/,\n      '$1',\n    );\n    this.$http.defaults.headers.common.Authorization = cookieToken;\n    this.checkUser();\n  },\n  mounted() {\n    this.pageCheck();\n  },\n};\n</script>\n","import { render } from \"./DashBoard.vue?vue&type=template&id=f109a0a2\"\nimport script from \"./DashBoard.vue?vue&type=script&lang=js\"\nexport * from \"./DashBoard.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/views/Favorite.vue","webpack:///./src/views/Favorite.vue?88ec","webpack:///./src/components/Modal/FrontDelModal.vue","webpack:///./src/components/Modal/FrontDelModal.vue?cdde"],"names":["class","type","role","isLoading","to","myFavorite","length","favoriteProduct","item","key","id","src","imageUrl","alt","title","toCurrency","price","origin_price","addCart","addloading","openModal","href","ref","deleteFavorite","data","updateLoading","tempID","mixins","localStorage","inject","components","FrontDelModal","methods","getFavorite","this","get","forEach","url","$http","then","res","success","push","product","catch","err","$refs","delModal","product_id","qty","post","emitter","emit","message","splice","indexOf","save","hideModal","mounted","render","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","$emit","modalMixin"],"mappings":"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","file":"js/chunk-34e49f7e.9a27bd7b.js","sourcesContent":["<template>\n  <Loading :isLoading=\"isLoading\" />\n  <div class=\"container pt-15 border-bottom border-light pb-15 mb-15\">\n    <ol class=\"breadcrumb mb-5\">\n      <li class=\"breadcrumb-item\"><router-link :to=\"`/`\">首頁</router-link></li>\n      <li class=\"breadcrumb-item active\">收藏清單</li>\n    </ol>\n    <h3\n      class=\"d-flex rounded-top align-items-center\n     bg-secondary text-2xl p-4\"\n    >\n      <span class=\"material-icons me-3\"> favorite </span>收藏清單\n    </h3>\n    <div\n      v-if=\"myFavorite.length <= 0\"\n      class=\"p-4 border border-white border-bottom-0 bg-table text-dark\"\n    >\n      <p class=\"text-center text-xl mb-6\">目前沒有收藏商品，快去逛逛商店吧～</p>\n      <div class=\"d-block w-25 mx-auto btn btn-secondary text-white secondary-hover mb-5\">\n        <router-link class=\"white-hover\" :to=\"`/shop`\"> 前往商店</router-link>\n      </div>\n    </div>\n    <div v-else>\n      <div\n        class=\"d-none d-md-flex row g-0 p-4 border border-white\n       border-bottom-0 bg-table text-dark\"\n      >\n        <div class=\"col-6\">商品資料</div>\n        <div class=\"col-2\">價格</div>\n        <div class=\"col-3\">購買狀態</div>\n        <div class=\"col-1\">刪除</div>\n      </div>\n      <div>\n        <div\n          v-for=\"item in favoriteProduct\"\n          :key=\"item.id\"\n          class=\"row g-0 p-4 border border-white align-items-center\n        bg-table text-dark border-bottom-0\"\n        >\n          <div class=\"col-11 col-md-6 mb-5 mb-md-0\">\n            <router-link :to=\"`/product/${item.id}`\">\n              <div class=\"d-flex align-items-center\">\n                <img class=\"w-40 me-4\" :src=\"item.imageUrl\" alt=\"\" />\n                <h3 class=\"text-base text-dark\">{{ item.title }}</h3>\n              </div>\n            </router-link>\n          </div>\n          <div class=\"col-6 col-md-2 order-4 order-md-0\">\n            <div class=\"d-flex d-md-block align-items-end\">\n              <p class=\"me-3 me-md-0\">NT${{ toCurrency(item.price) }}</p>\n              <p\n                v-if=\"item.price !== item.origin_price\"\n                class=\"text-dark opacity-5 text-sm text-decoration-line-through\"\n              >\n                NT${{ toCurrency(item.origin_price) }}\n              </p>\n            </div>\n          </div>\n          <div class=\"col-6 col-md-3 order-4 order-md-0 \">\n            <div class=\"position-relative\">\n              <button\n                type=\"button\"\n                class=\"btn btn-secondary secondary-hover text-white w-100 w-md-75\"\n                @click=\"addCart(item.id)\"\n              >\n                加入購物車\n              </button>\n              <button\n                v-if=\"addloading\"\n                type=\"button\"\n                class=\" btn d-flex justify-content-center\n                align-items-center position-absolute no-allow w-100\n               w-md-75 h-100 top-0 start-0 bg-light\"\n              >\n                <div class=\"spinner-border spinner-border-sm\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n              </button>\n            </div>\n          </div>\n          <div class=\"col-1 order-2 order-md-0\">\n            <a @click.prevent=\"openModal(item.id)\" href=\"#\" class=\"text-dark scale-hover\"\n              ><span class=\"material-icons\"> delete_forever </span></a\n            >\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"d-flex justify-content-end\n      rounded-bottom bg-table border border-white p-6\"\n      >\n        <router-link :to=\"`/shop`\" class=\"btn btn-dark btn-hover px-7 \"\n          ><span>前往商店</span></router-link\n        >\n      </div>\n    </div>\n  </div>\n  <FrontDelModal ref=\"delModal\" @delete=\"deleteFavorite\" />\n</template>\n\n<script>\nimport FrontDelModal from '@/components/Modal/FrontDelModal.vue';\nimport localStorage from '@/mixins/localStorage';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      updateLoading: false,\n      myFavorite: [],\n      favoriteProduct: [],\n      addloading: false,\n      tempID: '',\n    };\n  },\n  mixins: [localStorage],\n  inject: ['emitter'],\n  components: {\n    FrontDelModal,\n  },\n  methods: {\n    getFavorite() {\n      this.myFavorite = this.get() || [];\n      this.favoriteProduct = [];\n      this.isLoading = true;\n      if (this.myFavorite.length > 0) {\n        this.myFavorite.forEach((item) => {\n          const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${item}`;\n          this.$http\n            .get(url)\n            .then((res) => {\n              if (res.data.success) {\n                this.favoriteProduct.push(res.data.product);\n                this.isLoading = false;\n              } else {\n                this.isLoading = false;\n              }\n            })\n            .catch((err) => err);\n        });\n      } else {\n        this.isLoading = false;\n      }\n    },\n    openModal(id) {\n      this.tempID = id;\n      this.$refs.delModal.openModal();\n    },\n    addCart(id) {\n      this.addloading = true;\n      const data = {\n        data: { product_id: id, qty: 1 },\n      };\n      this.$http\n        .post(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`, data)\n        .then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              type: 'success',\n              message: res.data.message,\n            });\n            this.emitter.emit('update-cart');\n            this.addloading = false;\n          } else {\n            this.emitter.emit('push-message', {\n              type: 'error',\n              message: res.data.message,\n            });\n            this.addloading = false;\n          }\n        })\n        .catch((err) => err);\n    },\n    deleteFavorite() {\n      this.myFavorite.splice(this.myFavorite.indexOf(this.tempID), 1);\n      this.save(this.myFavorite);\n      this.emitter.emit('update-favorite');\n      this.$refs.delModal.hideModal();\n      this.emitter.emit('push-message', {\n        type: 'success',\n        message: '商品已移除收藏清單',\n      });\n      this.getFavorite();\n    },\n  },\n  mounted() {\n    this.getFavorite();\n  },\n};\n</script>\n","import { render } from \"./Favorite.vue?vue&type=template&id=01c87792\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div\n    class=\"modal fade\"\n    id=\"deleteModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header text-dark py-4 border-0\">\n          <button\n            type=\"button\"\n            class=\"btn-close \"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <p class=\"text-dark text-center\">\n           確定要移除商品嗎？\n          </p>\n          <p class=\"text-sm text-info text-center\">(刪除後將無法恢復)</p>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-warning\" data-bs-dismiss=\"modal\">\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-warning text-white\" @click=\"$emit('delete')\">\n            確認刪除\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./FrontDelModal.vue?vue&type=template&id=c498d5f8\"\nimport script from \"./FrontDelModal.vue?vue&type=script&lang=js\"\nexport * from \"./FrontDelModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
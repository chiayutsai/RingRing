(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61287117"],{1276:function(e,t,r){"use strict";var a=r("d784"),c=r("44e7"),n=r("825a"),o=r("1d80"),i=r("4840"),s=r("8aa5"),l=r("50c4"),d=r("14c3"),u=r("9263"),b=r("9f7f"),f=b.UNSUPPORTED_Y,p=[].push,h=Math.min,m=4294967295;a("split",2,(function(e,t,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var a=String(o(this)),n=void 0===r?m:r>>>0;if(0===n)return[];if(void 0===e)return[a];if(!c(e))return t.call(a,e,n);var i,s,l,d=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=new RegExp(e.source,b+"g");while(i=u.call(h,a)){if(s=h.lastIndex,s>f&&(d.push(a.slice(f,i.index)),i.length>1&&i.index<a.length&&p.apply(d,i.slice(1)),l=i[0].length,f=s,d.length>=n))break;h.lastIndex===i.index&&h.lastIndex++}return f===a.length?!l&&h.test("")||d.push(""):d.push(a.slice(f)),d.length>n?d.slice(0,n):d}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var c=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,c,r):a.call(String(c),t,r)},function(e,c){var o=r(a,e,this,c,a!==t);if(o.done)return o.value;var u=n(e),b=String(this),p=i(u,RegExp),O=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"g":"y"),g=new p(f?"^(?:"+u.source+")":u,v),j=void 0===c?m:c>>>0;if(0===j)return[];if(0===b.length)return null===d(g,b)?[b]:[];var x=0,V=0,y=[];while(V<b.length){g.lastIndex=f?0:V;var N,w=d(g,f?b.slice(V):b);if(null===w||(N=h(l(g.lastIndex+(f?V:0)),b.length))===x)V=s(b,V,O);else{if(y.push(b.slice(x,V)),y.length===j)return y;for(var E=1;E<=w.length-1;E++)if(y.push(w[E]),y.length===j)return y;V=x=N}}return y.push(b.slice(x)),y}]}),f)},"14c3":function(e,t,r){var a=r("c6b6"),c=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var n=r.call(e,t);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return c.call(e,t)}},"159b":function(e,t,r){var a=r("da84"),c=r("fdbc"),n=r("17c2"),o=r("9112");for(var i in c){var s=a[i],l=s&&s.prototype;if(l&&l.forEach!==n)try{o(l,"forEach",n)}catch(d){l.forEach=n}}},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,c=r("a640"),n=c("forEach");e.exports=n?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},3835:function(e,t,r){"use strict";function a(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return i}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function c(e,t){var r=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var a,c,n=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(a=r.next()).done);o=!0)if(n.push(a.value),t&&n.length===t)break}catch(s){i=!0,c=s}finally{try{o||null==r["return"]||r["return"]()}finally{if(i)throw c}}return n}}var n=r("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){return a(e)||c(e,t)||Object(n["a"])(e,t)||o()}},"4de4":function(e,t,r){"use strict";var a=r("23e7"),c=r("b727").filter,n=r("1dde"),o=n("filter");a({target:"Array",proto:!0,forced:!o},{filter:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("b64b"),r("a4d3"),r("4de4"),r("e439"),r("159b"),r("dbb4");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"8aa5":function(e,t,r){"use strict";var a=r("6547").charAt;e.exports=function(e,t,r){return t+(r?a(e,t).length:1)}},9263:function(e,t,r){"use strict";var a=r("ad6d"),c=r("9f7f"),n=r("5692"),o=RegExp.prototype.exec,i=n("native-string-replace",String.prototype.replace),s=o,l=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),d=c.UNSUPPORTED_Y||c.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],b=l||u||d;b&&(s=function(e){var t,r,c,n,s=this,b=d&&s.sticky,f=a.call(s),p=s.source,h=0,m=e;return b&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),m=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,h++),r=new RegExp("^(?:"+p+")",f)),u&&(r=new RegExp("^"+p+"$(?!\\s)",f)),l&&(t=s.lastIndex),c=o.call(b?r:s,m),b?c?(c.input=c.input.slice(h),c[0]=c[0].slice(h),c.index=s.lastIndex,s.lastIndex+=c[0].length):s.lastIndex=0:l&&c&&(s.lastIndex=s.global?c.index+c[0].length:t),u&&c&&c.length>1&&i.call(c[0],r,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(c[n]=void 0)})),c}),e.exports=s},"9f7f":function(e,t,r){"use strict";var a=r("d039");function c(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=c("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=c("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a640:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},ac1f:function(e,t,r){"use strict";var a=r("23e7"),c=r("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},ad6d:function(e,t,r){"use strict";var a=r("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b64b:function(e,t,r){var a=r("23e7"),c=r("7b0b"),n=r("df75"),o=r("d039"),i=o((function(){n(1)}));a({target:"Object",stat:!0,forced:i},{keys:function(e){return n(c(e))}})},c10b:function(e,t,r){"use strict";r.r(t);r("b0c0");var a=r("7a23"),c={class:"d-flex align-items-center justify-content-between mb-5 "},n=Object(a["createVNode"])("h2",{class:"text-dark"},"編輯訂單",-1),o=Object(a["createTextVNode"])("返回訂單列表"),i={class:"bg-white rounded overflow-hidden border border-secondary "},s={class:"container-fluid  py-6"},l={class:"row mb-6"},d={class:"col-6"},u={class:" mb-6"},b=Object(a["createVNode"])("h4",{class:"mb-4 pb-4 border-bottom"},"顧客資料",-1),f=Object(a["createVNode"])("label",{for:"name",class:"form-label"},[Object(a["createTextVNode"])("顧客姓名"),Object(a["createVNode"])("span",null,"必填")],-1),p={class:"mb-6"},h=Object(a["createVNode"])("label",{for:"tel",class:"form-label"},[Object(a["createTextVNode"])("顧客電話"),Object(a["createVNode"])("span",null,"必填")],-1),m={class:"mb-6"},O=Object(a["createVNode"])("label",{for:"email",class:"form-label"},[Object(a["createTextVNode"])("顧客電子信箱"),Object(a["createVNode"])("span",null,"必填")],-1),v={class:"mb-6"},g=Object(a["createVNode"])("label",{for:"address",class:"form-label"},[Object(a["createTextVNode"])("顧客地址"),Object(a["createVNode"])("span",null,"必填")],-1),j={key:0,class:"mb-6"},x=Object(a["createVNode"])("label",{for:"note",class:"form-label"},"備註",-1),V={class:"col-6"},y={class:" mb-6"},N=Object(a["createVNode"])("h4",{class:"mb-4 pb-4 border-bottom"},"訂單資料",-1),w=Object(a["createVNode"])("p",{class:"form-label"},"訂單編號",-1),E={class:"form-control border-white"},k={class:" mb-6"},S=Object(a["createVNode"])("p",{class:"form-label"},"下單時間",-1),D={class:"form-control border-white"},P={class:" mb-6"},I=Object(a["createVNode"])("p",{class:"form-label"},"總金額",-1),R={class:"form-control border-white"},_={class:"mb-6"},T=Object(a["createVNode"])("label",{class:"form-label"},"訂單狀態",-1),C=Object(a["createVNode"])("option",{value:"wait"},"等待付款中",-1),U=Object(a["createVNode"])("option",{value:"handle"},"處理中",-1),L=Object(a["createVNode"])("option",{value:"finish"},"完成",-1),$=Object(a["createVNode"])("option",{value:"cancel"},"取消",-1),B=Object(a["createVNode"])("h4",{class:" pb-3 mb-3"},"購買商品",-1),A=Object(a["createVNode"])("div",{class:"row mx-2"},[Object(a["createVNode"])("p",{class:"col-4 border-bottom fw-bold pb-3 mb-3"},"商品名稱"),Object(a["createVNode"])("p",{class:"col-4 border-bottom fw-bold pb-3 mb-3"},"數量"),Object(a["createVNode"])("p",{class:"col-4 border-bottom fw-bold pb-3 mb-3"},"小計")],-1),F={class:"col-4 "},M={class:"col-4"},q={class:"col-4"},K={class:"d-flex justify-content-end border-top pt-6"};function Y(e,t,r,Y,J,z){var G=Object(a["resolveComponent"])("Loading"),X=Object(a["resolveComponent"])("router-link"),H=Object(a["resolveComponent"])("Field"),Q=Object(a["resolveComponent"])("error-message"),W=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(G,{isLoading:J.isLoading},null,8,["isLoading"]),Object(a["createVNode"])("div",c,[n,Object(a["createVNode"])(X,{to:"/dashboard/order",class:"btn btn-secondary text-white shadow-none "},{default:Object(a["withCtx"])((function(){return[o]})),_:1})]),Object(a["createVNode"])("div",i,[Object(a["createVNode"])("div",s,[Object(a["createVNode"])(W,{ref:"editForm",class:"text-dark"},{default:Object(a["withCtx"])((function(e){var r=e.errors;return[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",d,[Object(a["createVNode"])("div",u,[b,f,Object(a["createVNode"])(H,{type:"text",class:["form-control",{"is-backend-invalid":r["顧客姓名"]}],id:"name",name:"顧客姓名",rules:"required",modelValue:J.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return J.user.name=e}),modelModifiers:{lazy:!0,trim:!0}},null,8,["class","modelValue"]),Object(a["createVNode"])(Q,{name:"顧客姓名",class:"backend-invalid-feedback"})]),Object(a["createVNode"])("div",p,[h,Object(a["createVNode"])(H,{type:"tel",class:["form-control",{"is-backend-invalid":r["顧客電話"]}],id:"tel",name:"顧客電話",rules:z.isPhone,modelValue:J.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return J.user.tel=e})},null,8,["rules","class","modelValue"]),Object(a["createVNode"])(Q,{name:"顧客電話",class:"backend-invalid-feedback"})]),Object(a["createVNode"])("div",m,[O,Object(a["createVNode"])(H,{type:"email",class:["form-control",{"is-backend-invalid":r["顧客電子信箱"]}],id:"email",name:"顧客電子信箱",rules:"email|required",modelValue:J.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return J.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Q,{name:"顧客電子信箱",class:"backend-invalid-feedback"})]),Object(a["createVNode"])("div",v,[g,Object(a["createVNode"])(H,{type:"text",class:["form-control",{"is-backend-invalid":r["顧客地址"]}],id:"address",name:"顧客地址",rules:"required",modelValue:J.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return J.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Q,{name:"顧客地址",class:"backend-invalid-feedback"})]),J.order.message?(Object(a["openBlock"])(),Object(a["createBlock"])("div",j,[x,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{type:"text",rows:"5",name:"備註",class:"form-control",id:"note","onUpdate:modelValue":t[5]||(t[5]=function(e){return J.order.message=e})},null,512),[[a["vModelText"],J.order.message]])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",V,[Object(a["createVNode"])("div",y,[N,w,Object(a["createVNode"])("p",E,Object(a["toDisplayString"])(J.order.id),1)]),Object(a["createVNode"])("div",k,[S,Object(a["createVNode"])("p",D,Object(a["toDisplayString"])(J.orderDate),1)]),Object(a["createVNode"])("div",P,[I,Object(a["createVNode"])("p",R,Object(a["toDisplayString"])(J.order.total),1)]),Object(a["createVNode"])("div",_,[T,Object(a["withDirectives"])(Object(a["createVNode"])("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=function(e){return J.status=e}),onChange:t[7]||(t[7]=function(e){return z.updateStatus(J.status)})},[C,U,L,$],544),[[a["vModelSelect"],J.status]])])])]),B,A,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(J.order.products,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"row mx-2 mb-6",key:e.id},[Object(a["createVNode"])("p",F,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("p",M,Object(a["toDisplayString"])(e.qty)+" / "+Object(a["toDisplayString"])(e.product.unit),1),Object(a["createVNode"])("p",q,Object(a["toDisplayString"])(e.final_total),1)])})),128))]})),_:1},512),Object(a["createVNode"])("div",K,[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-secondary text-white px-12",onClick:t[8]||(t[8]=Object(a["withModifiers"])((function(){return z.editOrder&&z.editOrder.apply(z,arguments)}),["prevent"]))}," 確定編輯 ")])])])],64)}var J=r("5530"),z=r("3835"),G=(r("99af"),r("ac1f"),r("1276"),{components:{},data:function(){return{order:{},user:{},orderDate:"",status:"",isLoading:!1}},inject:["emitter"],methods:{getOrder:function(e){var t=this,r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/order/").concat(e);this.isLoading=!0,this.$http.get(r).then((function(e){if(console.log(e),e.data.success)if(e.data.order){t.isLoading=!1,t.order=e.data.order,t.user=e.data.order.user;var r=new Date(1e3*e.data.order.create_at).toISOString().split("T"),a=Object(z["a"])(r,1);t.orderDate=a[0],e.data.order.status?t.status=e.data.order.status:(e.data.order.is_paid&&(t.status="handle"),t.status="wait")}else t.emitter.emit("push-message",{type:"error",message:"找不到這筆訂單"}),t.$router.push("/dashboard/order");else console.log(e.data.message)})).catch((function(e){console.log(e)}))},updateStatus:function(e){"handle"!==e&&"finish"!==e||(this.order.is_paid=!0,this.order.paid_date||(this.order.paid_date=Math.round((new Date).getTime()/1e3))),"wait"===e&&(this.order.is_paid=!1,this.order.paid_date=null)},editOrder:function(){var e=this;this.$refs.editForm.validate().then((function(t){if(t.valid){e.isLoading=!0;var r={data:Object(J["a"])(Object(J["a"])({},e.order),{},{user:e.user,status:e.status})};e.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/order/").concat(e.order.id),r).then((function(t){console.log(t),t.data.success?(e.emitter.emit("push-message",{type:"success",message:t.data.message}),e.isLoading=!1,e.$router.push("/dashboard/order")):(e.emitter.emit("push-message",{type:"error",message:t.data.message}),e.isLoading=!1)})).catch((function(e){console.log(e)}))}}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確的電話號碼"}},created:function(){var e=this.$route.params.id;this.getOrder(e)}});G.render=Y;t["default"]=G},d784:function(e,t,r){"use strict";r("ac1f");var a=r("6eeb"),c=r("9263"),n=r("d039"),o=r("b622"),i=r("9112"),s=o("species"),l=RegExp.prototype,d=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),b=o("replace"),f=function(){return!!/./[b]&&""===/./[b]("a","$0")}(),p=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,b){var h=o(e),m=!n((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),O=m&&!n((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[s]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!m||!O||"replace"===e&&(!d||!u||f)||"split"===e&&!p){var v=/./[h],g=r(h,""[e],(function(e,t,r,a,n){var o=t.exec;return o===c||o===l.exec?m&&!n?{done:!0,value:v.call(t,r,a)}:{done:!0,value:e.call(r,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),j=g[0],x=g[1];a(String.prototype,e,j),a(l,h,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}b&&i(l[h],"sham",!0)}},dbb4:function(e,t,r){var a=r("23e7"),c=r("83ab"),n=r("56ef"),o=r("fc6a"),i=r("06cf"),s=r("8418");a({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(e){var t,r,a=o(e),c=i.f,l=n(a),d={},u=0;while(l.length>u)r=c(a,t=l[u++]),void 0!==r&&s(d,t,r);return d}})},e439:function(e,t,r){var a=r("23e7"),c=r("d039"),n=r("fc6a"),o=r("06cf").f,i=r("83ab"),s=c((function(){o(1)})),l=!i||s;a({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(e,t){return o(n(e),t)}})}}]);
//# sourceMappingURL=chunk-61287117.3982a88f.js.map
{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/backend/Articles.vue","webpack:///./src/views/backend/Articles.vue?720d"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","class","isLoading","to","articles","item","key","id","isPublic","src","imageUrl","title","description","tag","author","create_at","type","changeStatus","for","href","openModal","pagination","getData","tempArticle","ref","deleteProduct","data","inject","components","Pagination","DeleteModal","methods","getArticle","page","this","$http","get","then","res","console","log","success","messages","catch","err","tempProduct","formats","undefined","format","content","JSON","parse","stringify","imagesUrl","$refs","updateModal","delModal","updateProduct","put","emitter","emit","message","hideModal","current_page","delete","mounted","render"],"mappings":"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","file":"js/chunk-065eaff8.e2615db8.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","<template>\n  <Loading :isLoading=\"isLoading\"></Loading>\n\n  <div class=\"d-flex align-items-center justify-content-between mb-5 \">\n    <h2 class=\"text-dark\">文章列表</h2>\n    <router-link :to=\"`/dashboard/newArticle`\" class=\"btn btn-secondary text-white shadow-none \"\n      >新增文章</router-link\n    >\n  </div>\n\n  <div class=\"bg-white rounded overflow-hidden border border-secondary  \">\n    <table class=\"table table-borderless mb-0\">\n      <thead class=\"bg-secondary text-white\">\n        <tr>\n          <th class=\"w-10\">文章主圖</th>\n          <th class=\"w-20\">文章標題</th>\n             <th class=\"w-20\">描述</th>\n          <th>文章分類</th>\n          <th>作者</th>\n\n          <th>建立時間</th>\n          <th>是否公開</th>\n          <th class=\"text-center\">預覽</th>\n          <th>編輯 / 刪除</th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-for=\"(item, key) in articles\" :key=\"item.id\">\n          <tr :class=\"{ 'table-primary': item.isPublic }\">\n            <td class=\"w-10\">\n              <img class=\"w-100 small-size\" :src=\"item.imageUrl\" />\n            </td>\n            <td class=\"w-20\"> {{ item.title }}</td>\n             <td class=\"w-20\">{{ item.description }}</td>\n            <td>\n              <p v-for=\"(tag,key) in item.tag\" :key=\"key\">\n                      {{tag}}\n              </p>\n            </td>\n            <td>{{ item.author }}</td>\n\n            <td>{{ item.create_at }}</td>\n            <td>\n              <div class=\"form-check form-switch\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  :id=\"'enabled' + key\"\n                  v-model=\"item.isPublic\"\n                  @change=\"changeStatus(item)\"\n                />\n\n                <label v-if=\"item.isPublic\" class=\"form-check-label\" :for=\"'enabled' + key\"\n                  >公開</label\n                >\n                <label v-else class=\"form-check-label\" :for=\"'enabled' + key\">未公開</label>\n              </div>\n            </td>\n            <td>\n              <a\n                href=\"\"\n                class=\" text-secondary text-center shadow-none eye-hover\"\n                @click.prevent=\"openModal('watch', item)\"\n              >\n                <span class=\"material-icons text-lg \">\n                  visibility\n                </span>\n              </a>\n            </td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-sm btn-secondary text-white\"\n                @click=\"openModal('edit', item)\"\n              >\n                編輯\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-sm btn-outline-secondary white-hover ms-2\"\n                @click=\"openModal('delete', item)\"\n              >\n                刪除\n              </button>\n\n            </td>\n          </tr>\n\n        </template>\n      </tbody>\n    </table>\n    <div class=\"d-flex justify-content-end align-items-center py-4 px-6 bg-secondary \">\n\n      <Pagination :pagination=\"pagination\" @emit-page=\"getData\" />\n    </div>\n  </div>\n\n  <DeleteModal :item=\"tempArticle\" :type=\"'normal'\" ref=\"delModal\" @delete=\"deleteProduct\" />\n</template>\n\n<script>\nimport Pagination from '@/components/Pagination.vue';\nimport DeleteModal from '@/components/Modal/DeleteModal.vue';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      articles: [],\n      pagination: {},\n      tempArticle: {},\n    };\n  },\n  inject: ['emitter'],\n  components: {\n    Pagination,\n    DeleteModal,\n  },\n\n  methods: {\n    getArticle(page = 1) {\n      this.isLoading = true;\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/articles?page=${page}`,\n        )\n        .then((res) => {\n          console.log(res);\n          if (res.data.success) {\n            this.articles = res.data.articles;\n            this.pagination = res.data.pagination;\n            this.isLoading = false;\n          } else {\n            console.log(res.data.messages);\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n\n    openModal(type, item) {\n      if (type === 'edit') {\n        this.tempProduct = {\n          ...item,\n          formats:\n            item.formats === undefined\n              ? [\n                {\n                  format: '',\n                  content: '',\n                },\n              ]\n              : JSON.parse(JSON.stringify(item.formats)),\n          imagesUrl: item.imagesUrl === undefined ? [] : [...item.imagesUrl],\n        };\n        this.$refs.updateModal.openModal();\n      } else if (type === 'delete') {\n        this.tempProduct = { ...item };\n        this.$refs.delModal.openModal();\n      }\n    },\n    updateProduct(item) {\n      this.isLoading = true;\n      const data = {\n        data: item,\n      };\n      this.$http\n        .put(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`,\n          data,\n        )\n        .then((res) => {\n          console.log(res);\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              type: 'success',\n              message: res.data.message,\n            });\n            this.$refs.updateModal.hideModal();\n            this.getData(this.pagination.current_page);\n            this.isLoading = false;\n          } else {\n            this.emitter.emit('push-message', {\n              type: 'error',\n              message: res.data.message,\n            });\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    changeStatus(item) {\n      this.tempProduct = {\n        ...item,\n      };\n      this.updateProduct(this.tempProduct);\n    },\n    deleteProduct() {\n      this.isLoading = true;\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`,\n        )\n        .then((res) => {\n          console.log(res);\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              type: 'success',\n              message: res.data.message,\n            });\n            this.$refs.delModal.hideModal();\n            this.getData(this.pagination.current_page);\n            this.isLoading = false;\n          } else {\n            this.emitter.emit('push-message', {\n              type: 'error',\n              message: res.data.message,\n            });\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  mounted() {\n    this.getArticle();\n  },\n};\n</script>\n","import { render } from \"./Articles.vue?vue&type=template&id=7757ad0c\"\nimport script from \"./Articles.vue?vue&type=script&lang=js\"\nexport * from \"./Articles.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
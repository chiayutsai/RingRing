(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54610b1b"],{ad18:function(e,t,c){"use strict";var a=c("7a23"),o={class:"d-flex justify-content-around w-md-75 w-100 w-lg-50 mx-auto mb-10"},r={class:"d-flex flex-column align-items-center"},s=Object(a["createVNode"])("p",null,"購物車",-1),d={class:"d-flex flex-column align-items-center"},n=Object(a["createVNode"])("p",null,"填寫資訊",-1),i={class:"d-flex flex-column align-items-center"},l=Object(a["createVNode"])("p",null,"確認訂單",-1),b={class:"d-flex flex-column align-items-center"},u=Object(a["createVNode"])("p",null,"完成購物",-1);function p(e,t,c,p,m,j){return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"1"===c.step}]}," 1 ",2),s]),Object(a["createVNode"])("div",d,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"2"===c.step}]}," 2 ",2),n]),Object(a["createVNode"])("div",i,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"3"===c.step}]}," 3 ",2),l]),Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"4"===c.step}]}," 4 ",2),u])])}var m={props:{step:String}};m.render=p;t["a"]=m},ae8d:function(e,t,c){"use strict";var a=c("7a23"),o={class:"card"},r={class:"card-body"},s={key:0},d={class:"card-title mb-2"},n={class:"mb-2"},i={class:"text-dark text-sm opacity-5 text-decoration-line-through ms-2"},l={class:"position-relative d-inline-block"},b={key:0,class:" btn d-flex justify-content-center align-items-center\n                position-absolute no-allow\n                h-100 w-100 top-0 start-0 bg-light"},u=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),p={key:1,class:"d-flex align-items-center justify-content-between"},m={class:"card-title mb-3"},j={class:"text-light text-decoration-line-through ms-2"},g={class:"d-flex"},O=Object(a["createVNode"])("a",{href:"",class:"border rounded-circle  p-2  me-4 icon-hover"},[Object(a["createVNode"])("span",{class:"material-icons"}," favorite_border ")],-1),h={key:0,class:"add-loading border rounded-circle  p-2 "},v=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),f={class:"position-relative"},N=Object(a["createVNode"])("span",{class:"material-icons"}," shopping_cart ",-1);function V(e,t,c,V,y,x){var k=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])(k,{class:["card-img ",{"card-img-rotate":!c.cartCard,"card-small-img":c.cartCard}],onMouseover:x.changeImg,onMouseleave:x.recoveryImg,to:"/product/".concat(c.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("img",{src:c.product.imageUrl,class:{"show-card-img":y.showFirstImg},alt:""},null,10,["src"]),c.product.imagesUrl?(Object(a["openBlock"])(),Object(a["createBlock"])("img",{key:0,class:{"show-card-img":!y.showFirstImg},src:c.product.imagesUrl[0],alt:""},null,10,["src"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["class","onMouseover","onMouseleave","to"]),Object(a["createVNode"])("div",r,[c.cartCard?(Object(a["openBlock"])(),Object(a["createBlock"])("div",s,[Object(a["createVNode"])("h3",d,[Object(a["createVNode"])(k,{to:"/product/".concat(c.product.id),class:{"text-dark ":c.cartCard,"text-base":c.cartCard}},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.product.title),1)]})),_:1},8,["to","class"])]),Object(a["createVNode"])("p",n,[Object(a["createTextVNode"])(" NT$"+Object(a["toDisplayString"])(c.product.price),1),Object(a["createVNode"])("span",i,"NT$"+Object(a["toDisplayString"])(c.product.origin_price),1)]),Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",{class:"btn btn-sm btn-secondary text-white secondary-hover",onClick:t[1]||(t[1]=function(e){return x.addCart(c.product.id)})}," 加入購物車 "),y.loading?(Object(a["openBlock"])(),Object(a["createBlock"])("button",b,[u])):Object(a["createCommentVNode"])("",!0)])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",p,[Object(a["createVNode"])("div",null,[Object(a["createVNode"])("h3",m,[Object(a["createVNode"])(k,{to:"/product/".concat(c.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.product.title),1)]})),_:1},8,["to"])]),Object(a["createVNode"])("p",null,[Object(a["createTextVNode"])(" NT$"+Object(a["toDisplayString"])(c.product.price),1),Object(a["createVNode"])("span",j,"NT$"+Object(a["toDisplayString"])(c.product.origin_price),1)])]),Object(a["createVNode"])("div",g,[O,y.loading?(Object(a["openBlock"])(),Object(a["createBlock"])("div",h,[v])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",f,[y.loading?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:0,href:"",class:" border rounded-circle  p-2  icon-hover",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(e){return x.addCart(c.product.id)}),["prevent"]))},[N]))])])]))])])}c("99af");var y={props:{product:Object,cartCard:Boolean},data:function(){return{showFirstImg:!0,loading:!1}},inject:["emitter"],methods:{changeImg:function(){this.product.imagesUrl&&(this.showFirstImg=!1)},recoveryImg:function(){this.showFirstImg=!0},addCart:function(e){var t=this;this.loading=!0;var c={data:{product_id:e,qty:1}};this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart"),c).then((function(e){console.log(e),e.data.success?(t.emitter.emit("push-message",{type:"success",message:e.data.message}),t.emitter.emit("update-cart"),t.loading=!1):(t.emitter.emit("push-message",{type:"error",message:e.data.message}),t.loading=!1)})).catch((function(e){console.log(e)}))}}};y.render=V;t["a"]=y},b727:function(e,t,c){var a=c("0366"),o=c("44ad"),r=c("7b0b"),s=c("50c4"),d=c("65f0"),n=[].push,i=function(e){var t=1==e,c=2==e,i=3==e,l=4==e,b=6==e,u=7==e,p=5==e||b;return function(m,j,g,O){for(var h,v,f=r(m),N=o(f),V=a(j,g,3),y=s(N.length),x=0,k=O||d,w=t?k(m,y):c||u?k(m,0):void 0;y>x;x++)if((p||x in N)&&(h=N[x],v=V(h,x,f),e))if(t)w[x]=v;else if(v)switch(e){case 3:return!0;case 5:return h;case 6:return x;case 2:n.call(w,h)}else switch(e){case 4:return!1;case 7:n.call(w,h)}return b?-1:i||l?l:w}};e.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6),filterOut:i(7)}},b789:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"container pt-15"},r=Object(a["createVNode"])("h3",{class:"d-flex rounded-top align-items-center\n     bg-secondary text-2xl p-4"},[Object(a["createVNode"])("span",{class:"material-icons me-3"}," shopping_cart "),Object(a["createTextVNode"])("購物車 ")],-1),s={key:0,class:"p-4 border border-white border-bottom-0 bg-table text-dark"},d=Object(a["createVNode"])("p",{class:"text-center text-xl mb-6"},"購物車目前沒有商品",-1),n={class:"d-block w-25 mx-auto btn btn-secondary text-white secondary-hover mb-5"},i=Object(a["createTextVNode"])(" 前往商店"),l={key:1},b=Object(a["createStaticVNode"])('<div class="d-none d-md-flex row g-0 p-4 border border-white\n       border-bottom-0 bg-table text-dark"><div class="col-4">商品資料</div><div class="col-2">單件價格</div><div class="col-3">數量</div><div class="col-2">小計</div><div class="col-1"></div></div>',1),u={class:"cart_list"},p={class:"col-11 col-md-4 mb-5 mb-md-0"},m={class:"d-flex align-items-center"},j={class:"text-base"},g={class:"col-6 col-md-2 order-4 order-md-0"},O={class:"d-flex d-md-block align-items-end"},h={class:"me-3 me-md-0"},v={class:"text-dark opacity-5 text-sm text-decoration-line-through"},f={class:"col-12 col-md-3 order-3 order-md-0 mb-5 mb-md-0"},N={class:"d-flex w-100  w-md-75 position-relative"},V={key:0,class:" btn d-flex justify-content-center align-items-center\n                position-absolute no-allow\n               w-100 h-100 top-0 start-0 bg-light"},y=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),x={class:"col-6 col-md-2 order-4 order-md-0 text-end text-md-start"},k=Object(a["createVNode"])("span",{class:"d-inline d-md-none"},"小計：",-1),w={class:"col-1 order-2 order-md-0"},C=Object(a["createVNode"])("span",{class:"material-icons"}," delete_forever ",-1),B={class:"d-flex\n         justify-content-between align-items-end  align-items-sm-center\n      rounded-bottom bg-table border border-white p-6"},D={class:"d-flex flex-column flex-sm-row align-items-center"},L={class:"text-dark text-base text-md-xl mb-5 mb-sm-0 me-sm-5 "},M=Object(a["createVNode"])("span",null,"繼續購物",-1),_={class:"container border-bottom border-light mt-9 mt-lg-15 pb-15 mb-15"},T={class:"row g-5"},$={class:"col-12 col-lg-8"},q=Object(a["createVNode"])("p",{class:"text-xl rounded-top bg-secondary p-4"},"超值加購",-1),S={class:"p-4 rounded-bottom border border-white bg-table text-dark"},I={class:"row row-cols-2 row-cols-sm-3"},P={class:"col-12 col-lg-4"},F=Object(a["createVNode"])("p",{class:"text-xl rounded-top bg-secondary p-4"},"訂單資訊",-1),Q={class:"row g-0 p-6 rounded-bottom border border-white bg-table text-dark"},U=Object(a["createVNode"])("div",{class:"col-4 mb-4"},[Object(a["createVNode"])("p",null,"商品數量：")],-1),A={class:"col-8 mb-4 text-end"},E=Object(a["createVNode"])("div",{class:"col-4 mb-4 "},[Object(a["createVNode"])("p",null,"小計：")],-1),J={class:"col-8 mb-4 text-end"},R=Object(a["createVNode"])("div",{class:"col-12 mb-6"},[Object(a["createVNode"])("div",{class:"border-bottom border-white"})],-1),z=Object(a["createVNode"])("div",{class:"col-4 mb-4"},[Object(a["createVNode"])("p",{class:"fw-bold"},"總計：")],-1),G={class:"col-8 mb-4 text-end"},H={class:"fw-bold"},K={class:"col-12"};function W(e,t,c,W,X,Y){var Z=Object(a["resolveComponent"])("Loading"),ee=Object(a["resolveComponent"])("Progress"),te=Object(a["resolveComponent"])("router-link"),ce=Object(a["resolveComponent"])("Card"),ae=Object(a["resolveComponent"])("FrontDelModal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(Z,{isLoading:X.isLoading},null,8,["isLoading"]),Object(a["createVNode"])("div",o,[Object(a["createVNode"])(ee,{step:"1"}),r,X.cart.length<=0?(Object(a["openBlock"])(),Object(a["createBlock"])("div",s,[d,Object(a["createVNode"])("div",n,[Object(a["createVNode"])(te,{class:"white-hover",to:"/shop"},{default:Object(a["withCtx"])((function(){return[i]})),_:1})])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",l,[b,Object(a["createVNode"])("div",u,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(X.cart,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e.id,class:"row g-0 p-4 border border-white align-items-center\n        bg-table text-dark border-bottom-0"},[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",m,[Object(a["createVNode"])("img",{class:"w-40 me-4",src:e.product.imageUrl,alt:""},null,8,["src"]),Object(a["createVNode"])("h3",j,Object(a["toDisplayString"])(e.product.title),1)])]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("p",h,"NT$"+Object(a["toDisplayString"])(e.product.price),1),Object(a["createVNode"])("p",v," NT$"+Object(a["toDisplayString"])(e.product.origin_price),1)])]),Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",N,[Object(a["createVNode"])("button",{disabled:e.qty<=1,class:"quantity-btn cart-remove text-dark border-dark",type:"button",onClick:function(e){return Y.minusCartQty(t)}}," - ",8,["disabled","onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"text-center quantity w-100 border-start-0\n              border-end-0 border-dark bg-transparent",type:"number","onUpdate:modelValue":function(t){return e.qty=t},min:"1",onChange:function(c){return Y.updateCart(t,e.id,e.qty)}},null,40,["onUpdate:modelValue","onChange"]),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createVNode"])("button",{type:"button",class:"quantity-btn plus text-dark\n            border-dark",onClick:function(e){return Y.addCartQty(t)}}," + ",8,["onClick"]),X.updateLoading?(Object(a["openBlock"])(),Object(a["createBlock"])("button",V,[y])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",x,[k,Object(a["createTextVNode"])(" NT$"+Object(a["toDisplayString"])(e.final_total),1)]),Object(a["createVNode"])("div",w,[Object(a["createVNode"])("a",{onClick:Object(a["withModifiers"])((function(t){return Y.openModal(e.id)}),["prevent"]),href:"",class:"text-dark scale-hover"},[C],8,["onClick"])])])})),128))]),Object(a["createVNode"])("div",B,[Object(a["createVNode"])("a",{onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(e){return Y.openModal()}),["prevent"])),class:"btn btn-outline-dark"},"清空購物車"),Object(a["createVNode"])("div",D,[Object(a["createVNode"])("p",L," 總計：NT$"+Object(a["toDisplayString"])(X.final_total),1),Object(a["createVNode"])(te,{to:"/shop",class:"btn btn-dark btn-hover px-7"},{default:Object(a["withCtx"])((function(){return[M]})),_:1})])])]))]),Object(a["createVNode"])("div",_,[Object(a["createVNode"])("div",T,[Object(a["createVNode"])("div",$,[q,Object(a["createVNode"])("div",S,[Object(a["createVNode"])("ul",I,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(X.randomProduct,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:"col mb-5 mb-sm-0",key:e.id},[Object(a["createVNode"])(ce,{cartCard:!0,product:e},null,8,["product"])])})),128))])])]),Object(a["createVNode"])("div",P,[F,Object(a["createVNode"])("div",Q,[U,Object(a["createVNode"])("div",A,[Object(a["createVNode"])("p",null,"共 "+Object(a["toDisplayString"])(X.allQty)+" 件",1)]),E,Object(a["createVNode"])("div",J,[Object(a["createVNode"])("p",null,"NT$"+Object(a["toDisplayString"])(X.final_total),1)]),R,z,Object(a["createVNode"])("div",G,[Object(a["createVNode"])("p",H,"NT$"+Object(a["toDisplayString"])(X.final_total),1)]),Object(a["createVNode"])("div",K,[Object(a["createVNode"])("div",{onClick:t[2]||(t[2]=function(){return Y.goToPay&&Y.goToPay.apply(Y,arguments)}),class:"btn btn-secondary w-100 fw-bold text-white shadow secondary-hover"}," 前往結帳 ")])])])])]),Object(a["createVNode"])(ae,{item:X.tempCartID,ref:"delModal",onDelete:Y.deleteCart},null,8,["item","onDelete"])],64)}c("99af"),c("159b"),c("d81d");var X=c("ad18"),Y=c("ae8d"),Z={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ee={class:"modal-dialog modal-dialog-centered"},te={class:"modal-content"},ce=Object(a["createStaticVNode"])('<div class="modal-header text-dark py-4 border-0"><button type="button" class="btn-close " data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><p class="text-dark text-center"> 確定要移除商品嗎？ </p><p class="text-sm text-info text-center">(刪除後將無法恢復)</p></div>',2),ae={class:"modal-footer"},oe=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-warning","data-bs-dismiss":"modal"}," 取消 ",-1);function re(e,t,c,o,r,s){return Object(a["openBlock"])(),Object(a["createBlock"])("div",Z,[Object(a["createVNode"])("div",ee,[Object(a["createVNode"])("div",te,[ce,Object(a["createVNode"])("div",ae,[oe,Object(a["createVNode"])("button",{type:"button",class:"btn btn-warning text-white",onClick:t[1]||(t[1]=function(t){return e.$emit("delete")})}," 確認刪除 ")])])])],512)}var se=c("e0ae"),de={props:{item:{type:Object}},mixins:[se["a"]]};de.render=re;var ne=de,ie={data:function(){return{cart:[],final_total:0,allQty:0,allProduct:[],randomProduct:[],tempCartID:"",isLoading:!1,updateLoading:!1}},inject:["emitter"],components:{Progress:X["a"],Card:Y["a"],FrontDelModal:ne},methods:{getAllData:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/products/all")).then((function(t){console.log(t),t.data.success?(e.allProduct=t.data.products,e.getRandom()):alert(t.data.message)})).catch((function(e){console.log(e)}))},addCartQty:function(e){this.cart[e].qty+=1,this.updateCart(e,this.cart[e].id,this.cart[e].qty)},minusCartQty:function(e){console.log(this.cart[e].qty),this.cart[e].qty-=1,this.updateCart(e,this.cart[e].id,this.cart[e].qty)},getcart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart");this.$http.get(t).then((function(t){console.log(t.data.data),t.data.success?(e.allQty=0,e.cart=t.data.data.carts,e.final_total=t.data.data.final_total,e.cart.forEach((function(t){e.allQty+=t.qty})),e.isLoading=!1):(console.log(t.data.message),e.isLoading=!1)})).catch((function(e){console.log(e)}))},updateCart:function(e,t,c){var a=this;if(this.cart[e].qty<1)this.cart[e].qty=1;else{var o={data:{product_id:t,qty:c}};this.updateLoading=!0;var r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart/").concat(t);this.$http.put(r,o).then((function(e){console.log(e),e.data.success?(a.emitter.emit("update-cart"),a.updateLoading=!1,a.emitter.emit("push-message",{type:"success",message:e.data.message}),a.getcart()):(a.updateLoading=!1,a.emitter.emit("push-message",{type:"error",message:e.data.message}))})).catch((function(e){console.log(e)}))}},deleteCart:function(){var e=this,t="";t=this.tempCartID?"".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart/").concat(this.tempCartID):"".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/carts"),this.isLoading=!0,this.$http.delete(t).then((function(t){console.log(t),t.data.success?(e.$refs.delModal.hideModal(),e.emitter.emit("update-cart"),e.emitter.emit("push-message",{type:"success",message:t.data.message}),e.isLoading=!1,e.getcart()):(e.isLoading=!1,e.emitter.emit("push-message",{type:"error",message:t.data.message}))})).catch((function(e){console.log(e)}))},goToPay:function(){0!==this.cart.length?this.$router.push("/checkout"):this.emitter.emit("push-message",{type:"warning",message:"購物車是空的，快去新增商品喔！"})},openModal:function(e){this.tempCartID=e,this.$refs.delModal.openModal()},getRandom:function(){var e=this,t=Math.floor(Math.random()*this.allProduct.length),c=[t,t+1,t+2],a=c.map((function(t){return t%e.allProduct.length}));a.forEach((function(t){e.randomProduct.push(e.allProduct[t])}))}},mounted:function(){var e=this;this.getcart(),this.getAllData(),this.emitter.on("update-cart",(function(){e.getcart()}))}};ie.render=W;t["default"]=ie},d81d:function(e,t,c){"use strict";var a=c("23e7"),o=c("b727").map,r=c("1dde"),s=r("map");a({target:"Array",proto:!0,forced:!s},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-54610b1b.0dcd7fe7.js.map
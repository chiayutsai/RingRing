{"version":3,"sources":["webpack:///./src/views/Check.vue","webpack:///./src/views/Check.vue?04cc","webpack:///./src/components/Progress.vue","webpack:///./src/components/Progress.vue?b87c"],"names":["class","id","ref","isLoading","step","orderDate","order","user","name","tel","email","address","message","total","href","openCollapse","open","products","item","key","src","product","imageUrl","alt","title","qty","final_total","type","pay","orderID","data","collapse","components","Progress","inject","methods","getOrder","this","url","$http","get","then","res","console","log","success","date","Date","create_at","toISOString","split","catch","err","toggle","post","emitter","emit","$router","push","params","mounted","$refs","addEventListener","created","$route","render","props","String"],"mappings":"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","file":"js/chunk-361c5a26.e47dd104.js","sourcesContent":["<template>\n  <Loading :isLoading=\"isLoading\"></Loading>\n\n  <div class=\"container pt-15\">\n    <Progress step=\"3\" />\n  </div>\n  <div class=\"container border-bottom border-light mt-15 pb-15 mb-15\">\n    <div class=\"row bg-linear rounded p-8\">\n      <h3 class=\"text-center mb-10\">確認訂單</h3>\n      <div class=\"col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3 \">\n        <div class=\"row mb-8\">\n          <p class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">下單日期：</p>\n          <p class=\"col-8 mb-4 pb-4 border-bottom\">{{ orderDate }}</p>\n          <p class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">訂單編號：</p>\n          <p class=\"col-8 mb-4 pb-4 border-bottom\">{{ order.id }}</p>\n          <p class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">顧客姓名：</p>\n          <p class=\"col-8 mb-4 pb-4 border-bottom\">{{ user.name }}</p>\n          <p class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">聯絡電話：</p>\n          <p class=\"col-8 mb-4 pb-4 border-bottom\">{{ user.tel }}</p>\n          <p class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">電子郵件：</p>\n          <p class=\"col-8 mb-4 pb-4 border-bottom\">{{ user.email }}</p>\n          <p class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">地址：</p>\n          <p class=\"col-8 mb-4 pb-4 border-bottom\">{{ user.address }}</p>\n          <p v-if=\"order.message\" class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">備註：</p>\n          <p v-if=\"order.message\" class=\"col-8 mb-4 pb-4 border-bottom\">{{ order.message }}</p>\n          <p class=\"col-4 fw-bold mb-4 pb-4 border-bottom\">訂單金額：</p>\n          <p\n            class=\"col-8 mb-4 pb-4 border-bottom d-flex align-items-center justify-content-between\"\n          >\n            NT${{ order.total }}\n            <a\n              href=\"\"\n              @click.prevent=\"openCollapse\"\n              class=\"lh-1\"\n              :class=\"{ 'arrow-rotate': open }\"\n            >\n              <span class=\"material-icons\"> arrow_drop_down_circle </span></a\n            >\n          </p>\n          <div class=\"collapse\" id=\"collapseExample\" ref=\"collapse\">\n            <p class=\"fw-bold mb-6\">購買商品</p>\n            <div class=\"row align-items-center mb-4\">\n              <div class=\"col-6\">\n                <p>商品詳情</p>\n              </div>\n\n              <div class=\"col-3\">\n                <p>數量</p>\n              </div>\n              <div class=\"col-3\">\n                <p>小計</p>\n              </div>\n            </div>\n            <div v-for=\"item in order.products\" :key=\"item.id\" class=\"row align-items-center mb-5\">\n              <div class=\"col-6\">\n                <div class=\"d-flex align-items-center\">\n                  <img class=\"w-40 me-4\" :src=\"item.product.imageUrl\" alt=\"\" />\n\n                  <p>{{ item.product.title }}</p>\n                </div>\n              </div>\n\n              <div class=\"col-3\">\n                <p>{{ item.qty }}</p>\n              </div>\n              <div class=\"col-3\">\n                <p>NT${{ item.final_total }}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <button\n          type=\"button\"\n          @click=\"pay(orderID)\"\n          class=\"w-100 text-white btn btn-lg btn-secondary secondary-hover shadow\"\n        >\n          確認結帳\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Progress from '@/components/Progress.vue';\nimport { Collapse } from 'bootstrap';\n\nexport default {\n  data() {\n    return {\n      orderDate: '',\n      orderID: '',\n      order: {},\n      user: {},\n      isLoading: false,\n      collapse: '',\n      open: false,\n    };\n  },\n  components: {\n    Progress,\n  },\n  inject: ['emitter'],\n  methods: {\n    getOrder(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${id}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          console.log(res.data);\n          if (res.data.success) {\n            this.order = res.data.order;\n            const date = new Date(res.data.order.create_at * 1000).toISOString().split('T');\n            [this.orderDate] = date;\n            this.user = res.data.order.user;\n            this.isLoading = false;\n          } else {\n            console.log(res.data.message);\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    openCollapse() {\n      this.collapse.toggle();\n      this.open = true;\n    },\n    pay(id) {\n      this.isLoading = true;\n\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${id}`;\n      this.$http\n        .post(url)\n        .then((res) => {\n          console.log(res.data);\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              type: 'success',\n              message: res.data.message,\n            });\n            this.$router.push({ name: 'final', params: { order: this.orderID } });\n            this.isLoading = false;\n          } else {\n            this.emitter.emit('push-message', {\n              type: 'error',\n              message: res.data.message,\n            });\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  mounted() {\n    this.collapse = new Collapse(this.$refs.collapse, {\n      toggle: false,\n    });\n    this.$refs.collapse.addEventListener('hidden.bs.collapse', () => {\n      this.open = false;\n    });\n  },\n  created() {\n    this.orderID = this.$route.params.order;\n    this.getOrder(this.orderID);\n  },\n};\n</script>\n","import { render } from \"./Check.vue?vue&type=template&id=7b92f764\"\nimport script from \"./Check.vue?vue&type=script&lang=js\"\nexport * from \"./Check.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n    <div class=\"d-flex justify-content-around w-md-75 w-100 w-lg-50 mx-auto mb-10\">\n      <div class=\"d-flex flex-column align-items-center\">\n        <div\n          class=\"d-flex align-items-center justify-content-center circle rounded-circle border mb-2\"\n          :class=\"{'progress-active':step ==='1'}\"\n        >\n          1\n        </div>\n        <p>購物車</p>\n      </div>\n      <div class=\"d-flex flex-column align-items-center\">\n        <div\n          class=\"d-flex align-items-center justify-content-center circle rounded-circle border mb-2\"\n          :class=\"{'progress-active':step ==='2'}\"\n        >\n          2\n        </div>\n        <p>填寫資訊</p>\n      </div>\n      <div class=\"d-flex flex-column align-items-center\">\n        <div\n          class=\"d-flex align-items-center justify-content-center circle rounded-circle border mb-2\"\n          :class=\"{'progress-active':step ==='3'}\"\n        >\n          3\n        </div>\n        <p>確認訂單</p>\n      </div>\n      <div class=\"d-flex flex-column align-items-center\">\n        <div\n          class=\"d-flex align-items-center justify-content-center circle rounded-circle border mb-2\"\n          :class=\"{'progress-active':step ==='4'}\"\n        >\n          4\n        </div>\n        <p>完成購物</p>\n      </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    step: String,\n  },\n};\n</script>\n","import { render } from \"./Progress.vue?vue&type=template&id=7b6940d0\"\nimport script from \"./Progress.vue?vue&type=script&lang=js\"\nexport * from \"./Progress.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
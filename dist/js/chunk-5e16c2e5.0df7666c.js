(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e16c2e5"],{"159b":function(e,t,c){var a=c("da84"),o=c("fdbc"),r=c("17c2"),n=c("9112");for(var s in o){var l=a[s],d=l&&l.prototype;if(d&&d.forEach!==r)try{n(d,"forEach",r)}catch(i){d.forEach=r}}},"17c2":function(e,t,c){"use strict";var a=c("b727").forEach,o=c("a640"),r=o("forEach");e.exports=r?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},a640:function(e,t,c){"use strict";var a=c("d039");e.exports=function(e,t){var c=[][e];return!!c&&a((function(){c.call(null,t||function(){throw 1},1)}))}},ad18:function(e,t,c){"use strict";var a=c("7a23"),o={class:"d-flex justify-content-around w-50 mx-auto mb-10"},r={class:"d-flex flex-column align-items-center"},n=Object(a["createVNode"])("p",null,"購物車",-1),s={class:"d-flex flex-column align-items-center"},l=Object(a["createVNode"])("p",null,"填寫資訊",-1),d={class:"d-flex flex-column align-items-center"},i=Object(a["createVNode"])("p",null,"確認訂單",-1),u={class:"d-flex flex-column align-items-center"},b=Object(a["createVNode"])("p",null,"完成購物",-1);function p(e,t,c,p,h,j){return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"1"===c.step}]}," 1 ",2),n]),Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"2"===c.step}]}," 2 ",2),l]),Object(a["createVNode"])("div",d,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"3"===c.step}]}," 3 ",2),i]),Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"4"===c.step}]}," 4 ",2),b])])}var h={props:{step:String}};h.render=p;t["a"]=h},ae8d:function(e,t,c){"use strict";var a=c("7a23"),o={class:"col card"},r={class:"card-body"},n={class:"card-title mb-2"},s={key:0},l={class:"mb-2"},d={class:"text-dark text-sm opacity-5 text-decoration-line-through ms-2"},i={key:1,class:"d-flex align-items-center justify-content-between"},u={class:"text-light text-decoration-line-through ms-2"},b={class:"d-flex"},p=Object(a["createVNode"])("a",{href:"",class:"me-2"},[Object(a["createVNode"])("span",{class:"material-icons"}," favorite_border ")],-1),h=Object(a["createVNode"])("span",{class:"material-icons"}," shopping_cart ",-1);function j(e,t,c,j,O,f){var g=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])("li",o,[Object(a["createVNode"])(g,{class:["card-img ",{"card-img-rotate":!c.cartCard,"card-small-img":c.cartCard}],onMouseover:f.changeImg,onMouseleave:f.recoveryImg,to:"/product/".concat(c.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("img",{src:c.product.imageUrl,class:{"show-card-img":O.showFirstImg},alt:""},null,10,["src"]),c.product.imagesUrl?(Object(a["openBlock"])(),Object(a["createBlock"])("img",{key:0,class:{"show-card-img":!O.showFirstImg},src:c.product.imagesUrl[0],alt:""},null,10,["src"])):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["class","onMouseover","onMouseleave","to"]),Object(a["createVNode"])("div",r,[Object(a["createVNode"])("h2",n,[Object(a["createVNode"])(g,{to:"/product/".concat(c.product.id),class:{"text-dark ":c.cartCard,"text-base":c.cartCard}},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.product.title),1)]})),_:1},8,["to","class"])]),c.cartCard?(Object(a["openBlock"])(),Object(a["createBlock"])("div",s,[Object(a["createVNode"])("p",l,[Object(a["createTextVNode"])(" NT$"+Object(a["toDisplayString"])(c.product.price),1),Object(a["createVNode"])("span",d,"NT$"+Object(a["toDisplayString"])(c.product.origin_price),1)]),Object(a["createVNode"])("div",{class:"btn btn-sm btn-secondary text-white secondary-hover",onClick:t[1]||(t[1]=function(e){return f.addCart(c.product.id)})}," 加入購物車 ")])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",i,[Object(a["createVNode"])("p",null,[Object(a["createTextVNode"])(" NT$"+Object(a["toDisplayString"])(c.product.price),1),Object(a["createVNode"])("span",u,"NT$"+Object(a["toDisplayString"])(c.product.origin_price),1)]),Object(a["createVNode"])("div",b,[p,Object(a["createVNode"])("a",{href:"",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(e){return f.addCart(c.product.id)}),["prevent"]))},[h])])]))])])}c("99af");var O=c("37ca"),f={props:{product:Object,cartCard:Boolean},data:function(){return{showFirstImg:!0}},methods:{changeImg:function(){this.product.imagesUrl&&(this.showFirstImg=!1)},recoveryImg:function(){this.showFirstImg=!0},addCart:function(e){var t={data:{product_id:e,qty:1}};this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart"),t).then((function(e){console.log(e),e.data.success?(alert(e.data.message),O["a"].emit("update-cart")):alert(e.data.message)})).catch((function(e){console.log(e)}))}}};f.render=j;t["a"]=f},b727:function(e,t,c){var a=c("0366"),o=c("44ad"),r=c("7b0b"),n=c("50c4"),s=c("65f0"),l=[].push,d=function(e){var t=1==e,c=2==e,d=3==e,i=4==e,u=6==e,b=7==e,p=5==e||u;return function(h,j,O,f){for(var g,m,v=r(h),N=o(v),V=a(j,O,3),y=n(N.length),x=0,k=f||s,w=t?k(h,y):c||b?k(h,0):void 0;y>x;x++)if((p||x in N)&&(g=N[x],m=V(g,x,v),e))if(t)w[x]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:l.call(w,g)}else switch(e){case 4:return!1;case 7:l.call(w,g)}return u?-1:d||i?i:w}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}},b789:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"container pt-17"},r=Object(a["createVNode"])("h3",{class:"d-flex rounded-top align-items-center\n     bg-secondary p-4"},[Object(a["createVNode"])("span",{class:"material-icons me-3"}," shopping_cart "),Object(a["createTextVNode"])("購物車 ")],-1),n={key:0,class:"p-4 border border-white border-bottom-0 bg-table text-dark"},s=Object(a["createVNode"])("p",{class:"text-center text-xl mb-6"},"購物車目前沒有商品",-1),l={class:"d-block w-25 mx-auto btn btn-secondary text-white secondary-hover mb-5"},d=Object(a["createTextVNode"])(" 前往商店"),i={key:1},u=Object(a["createStaticVNode"])('<div class="row g-0 p-4 border border-white border-bottom-0 bg-table text-dark"><div class="col-4">商品資料</div><div class="col-2">單件價格</div><div class="col-3">數量</div><div class="col-2">小計</div><div class="col-1"></div></div>',1),b={class:"cart_list"},p={class:"col-4"},h={class:"d-flex align-items-center"},j={class:"text-lg"},O={class:"col-2"},f={class:"text-dark opacity-5 text-sm text-decoration-line-through"},g={class:"col-3"},m={class:"col-2"},v={class:"col-1"},N=Object(a["createVNode"])("span",{class:"material-icons"}," delete_forever ",-1),V={class:"d-flex justify-content-between align-items-center\n      rounded-bottom bg-table border border-white p-6"},y={class:"d-flex align-items-center"},x={class:"text-dark text-xl me-5"},k=Object(a["createTextVNode"])("繼續購物"),w={class:"container mt-15 mb-17"},C={class:"row g-5"},B={class:"col-8"},_=Object(a["createVNode"])("p",{class:"text-xl rounded-top bg-secondary p-4"},"超值加購",-1),T={class:"p-4 rounded-bottom border border-white bg-table text-dark"},q={class:"row row-cols-3"},$={class:"col-4"},D=Object(a["createVNode"])("p",{class:"text-xl rounded-top bg-secondary p-4"},"訂單資訊",-1),S={class:"row g-0 p-6 rounded-bottom border border-white bg-table text-dark"},P=Object(a["createVNode"])("div",{class:"col-4 mb-4"},[Object(a["createVNode"])("p",null,"商品數量：")],-1),I={class:"col-8 mb-4"},M=Object(a["createVNode"])("div",{class:"col-4 mb-4"},[Object(a["createVNode"])("p",null,"小計：")],-1),Q={class:"col-8 mb-4"},E=Object(a["createVNode"])("div",{class:"col-12 mb-6"},[Object(a["createVNode"])("div",{class:"border-bottom border-white"})],-1),F=Object(a["createVNode"])("div",{class:"col-4 mb-4"},[Object(a["createVNode"])("p",{class:"fw-bold"},"總計：")],-1),U={class:"col-8 mb-4"},A={class:"fw-bold"},J={class:"col-12"};function L(e,t,c,L,R,z){var G=Object(a["resolveComponent"])("Progress"),H=Object(a["resolveComponent"])("router-link"),K=Object(a["resolveComponent"])("Card");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])(G,{step:"1"}),r,R.cart.length<=0?(Object(a["openBlock"])(),Object(a["createBlock"])("div",n,[s,Object(a["createVNode"])("div",l,[Object(a["createVNode"])(H,{class:"white-hover",to:"/shop"},{default:Object(a["withCtx"])((function(){return[d]})),_:1})])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",i,[u,Object(a["createVNode"])("div",b,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(R.cart,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e.id,class:"row g-0 p-4 border border-white align-items-center\n        bg-table text-dark border-bottom-0"},[Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("img",{class:"w-40 me-4",src:e.product.imageUrl,alt:""},null,8,["src"]),Object(a["createVNode"])("h3",j,Object(a["toDisplayString"])(e.product.title),1)])]),Object(a["createVNode"])("div",O,[Object(a["createVNode"])("p",null,"NT$"+Object(a["toDisplayString"])(e.product.price),1),Object(a["createVNode"])("p",f," NT$"+Object(a["toDisplayString"])(e.product.origin_price),1)]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",{class:["d-flex w-75",{"mb-2":R.failQty}]},[Object(a["createVNode"])("input",{disabled:e.qty<=1,class:"quantity-btn cart-remove text-dark border-dark",value:"-",type:"button",onClick:function(e){return z.minusCartQty(t)}},null,8,["disabled","onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"text-center quantity w-100 border-start-0\n              border-end-0 border-dark bg-transparent",type:"number","onUpdate:modelValue":function(t){return e.qty=t},min:"1",onChange:function(c){return z.updateCart(t,e.id,e.qty)}},null,40,["onUpdate:modelValue","onChange"]),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createVNode"])("input",{type:"button",class:"quantity-btn plus text-dark\n            border-dark",value:"+",onClick:function(e){return z.addCartQty(t)}},null,8,["onClick"])],2)]),Object(a["createVNode"])("div",m,"NT$"+Object(a["toDisplayString"])(e.final_total),1),Object(a["createVNode"])("div",v,[Object(a["createVNode"])("a",{onClick:Object(a["withModifiers"])((function(t){return z.deleteCart(e.id)}),["prevent"]),href:"",class:"text-dark"},[N],8,["onClick"])])])})),128))]),Object(a["createVNode"])("div",V,[Object(a["createVNode"])("a",{onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(){return z.deleteAll&&z.deleteAll.apply(z,arguments)}),["prevent"])),class:"btn btn-outline-dark"},"清空購物車"),Object(a["createVNode"])("div",y,[Object(a["createVNode"])("p",x,"總計：NT$"+Object(a["toDisplayString"])(R.final_total),1),Object(a["createVNode"])(H,{to:"/shop",class:"btn btn-dark"},{default:Object(a["withCtx"])((function(){return[k]})),_:1})])])]))]),Object(a["createVNode"])("div",w,[Object(a["createVNode"])("div",C,[Object(a["createVNode"])("div",B,[_,Object(a["createVNode"])("div",T,[Object(a["createVNode"])("ul",q,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(R.randomProduct,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(K,{key:e.id,cartCard:!0,product:e},null,8,["product"])})),128))])])]),Object(a["createVNode"])("div",$,[D,Object(a["createVNode"])("div",S,[P,Object(a["createVNode"])("div",I,[Object(a["createVNode"])("p",null,"共 "+Object(a["toDisplayString"])(R.allQty)+" 件",1)]),M,Object(a["createVNode"])("div",Q,[Object(a["createVNode"])("p",null,"NT$"+Object(a["toDisplayString"])(R.final_total),1)]),E,F,Object(a["createVNode"])("div",U,[Object(a["createVNode"])("p",A,"NT$"+Object(a["toDisplayString"])(R.final_total),1)]),Object(a["createVNode"])("div",J,[Object(a["createVNode"])("div",{onClick:t[2]||(t[2]=function(){return z.goToPay&&z.goToPay.apply(z,arguments)}),class:"btn btn-secondary w-100 fw-bold text-white shadow secondary-hover"}," 前往結帳 ")])])])])])],64)}c("99af"),c("159b"),c("d81d");var R=c("ad18"),z=c("ae8d"),G={data:function(){return{cart:[],final_total:0,allQty:0,failQty:!1,allProduct:[],randomProduct:[]}},components:{Progress:R["a"],Card:z["a"]},methods:{getAllData:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/products/all")).then((function(t){console.log(t),t.data.success?(e.allProduct=t.data.products,e.getRandom()):alert(t.data.message)})).catch((function(e){console.log(e)}))},addCartQty:function(e){this.cart[e].qty+=1,this.updateCart(e,this.cart[e].id,this.cart[e].qty)},minusCartQty:function(e){console.log(this.cart[e].qty),this.cart[e].qty-=1,this.updateCart(e,this.cart[e].id,this.cart[e].qty)},getcart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart");this.$http.get(t).then((function(t){console.log(t.data.data),t.data.success?(e.allQty=0,e.cart=t.data.data.carts,e.final_total=t.data.data.final_total,e.cart.forEach((function(t){e.allQty+=t.qty}))):alert(t.data.message)})).catch((function(e){console.log(e)}))},updateCart:function(e,t,c){var a=this;if(this.cart[e].qty<1)this.cart[e].qty=1;else{var o={data:{product_id:t,qty:c}},r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart/").concat(t);this.$http.put(r,o).then((function(e){console.log(e),e.data.success?(alert(e.data.message),a.getcart()):alert(e.data.message)})).catch((function(e){console.log(e)}))}},deleteCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart/").concat(e);this.$http.delete(c).then((function(e){console.log(e),e.data.success?(alert(e.data.message),t.getcart()):alert(e.data.message)})).catch((function(e){console.log(e)}))},deleteAll:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/carts");this.$http.delete(t).then((function(t){console.log(t),t.data.success?(alert(t.data.message),e.getcart()):alert(t.data.message)})).catch((function(e){console.log(e)}))},goToPay:function(){0!==this.cart.length?this.$router.push("/checkout"):alert("購物車是空的，快去新增商品吧")},getRandom:function(){var e=this,t=Math.floor(Math.random()*this.allProduct.length),c=[t,t+1,t+2],a=c.map((function(t){return t%e.allProduct.length}));a.forEach((function(t){e.randomProduct.push(e.allProduct[t])}))}},mounted:function(){this.getcart(),this.getAllData()}};G.render=L;t["default"]=G},d81d:function(e,t,c){"use strict";var a=c("23e7"),o=c("b727").map,r=c("1dde"),n=r("map");a({target:"Array",proto:!0,forced:!n},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-5e16c2e5.0df7666c.js.map
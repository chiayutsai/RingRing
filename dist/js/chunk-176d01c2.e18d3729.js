(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-176d01c2"],{1799:function(e,t,a){"use strict";var c=a("7a23"),o={key:0,class:"pagination"},l=Object(c["createVNode"])("span",{class:"double-arrow"},"«",-1),i=Object(c["createVNode"])("span",{class:"material-icons  text-base"}," chevron_left ",-1),n=Object(c["createVNode"])("span",{class:"material-icons  text-base"}," chevron_right ",-1),r=Object(c["createVNode"])("span",{class:"double-arrow"},"»",-1);function s(e,t,a,s,d,b){return 1!==a.pagination.total_pages?(Object(c["openBlock"])(),Object(c["createBlock"])("ul",o,[a.pagination.has_pre?(Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:0,class:"page-item ",onClick:t[1]||(t[1]=function(e){return b.emitPage(1)})},[l])):Object(c["createCommentVNode"])("",!0),a.pagination.has_pre?(Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:1,class:"page-item ",onClick:t[2]||(t[2]=function(e){return b.emitPage(a.pagination.current_page-1)})},[i])):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(a.pagination.total_pages,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:e,class:["page-item",{active:e===a.pagination.current_page}],onClick:function(t){return b.emitPage(e)}},Object(c["toDisplayString"])(e),11,["onClick"])})),128)),a.pagination.has_next?(Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:2,class:"page-item ",onClick:t[3]||(t[3]=function(e){return b.emitPage(a.pagination.current_page+1)})},[n])):Object(c["createCommentVNode"])("",!0),a.pagination.has_next?(Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:3,class:"page-item ",onClick:t[4]||(t[4]=function(e){return b.emitPage(a.pagination.total_pages)})},[r])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)}var d={props:{pagination:Object},methods:{emitPage:function(e){this.$emit("emit-page",e)}}};d.render=s;t["a"]=d},"9e3f":function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("ac1f"),a("1276");var c=a("7a23"),o={class:"d-flex align-items-center justify-content-between mb-5 "},l=Object(c["createVNode"])("h2",{class:"text-dark"},"文章列表",-1),i=Object(c["createTextVNode"])("新增文章"),n={class:"bg-white rounded overflow-hidden border border-secondary  "},r={class:"table table-borderless mb-0"},s=Object(c["createVNode"])("thead",{class:"bg-secondary text-white"},[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{class:"w-10"},"文章主圖"),Object(c["createVNode"])("th",{class:"w-20"},"文章標題"),Object(c["createVNode"])("th",{class:"w-20"},"描述"),Object(c["createVNode"])("th",null,"文章分類"),Object(c["createVNode"])("th",null,"作者"),Object(c["createVNode"])("th",null,"建立時間"),Object(c["createVNode"])("th",null,"更新時間"),Object(c["createVNode"])("th",null,"是否公開"),Object(c["createVNode"])("th",{class:"text-center"},"預覽"),Object(c["createVNode"])("th",null,"編輯 / 刪除")])],-1),d={class:"w-10 "},b={class:"w-20 py-6"},p={class:"w-20"},u={key:0},m={key:1},j={class:"form-check form-switch"},O=Object(c["createVNode"])("span",{class:"material-icons text-lg "}," visibility ",-1),g={class:"d-flex justify-content-end align-items-center py-4 px-6 bg-secondary "};function h(e,t,a,h,k,f){var y=Object(c["resolveComponent"])("Loading"),V=Object(c["resolveComponent"])("router-link"),N=Object(c["resolveComponent"])("Pagination"),v=Object(c["resolveComponent"])("ViewArticleModal"),w=Object(c["resolveComponent"])("ArticleModal"),x=Object(c["resolveComponent"])("DeleteModal");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(y,{isLoading:k.isLoading},null,8,["isLoading"]),Object(c["createVNode"])("div",o,[l,Object(c["createVNode"])(V,{to:"/dashboard/newArticle",class:"btn btn-secondary text-white shadow-none "},{default:Object(c["withCtx"])((function(){return[i]})),_:1})]),Object(c["createVNode"])("div",n,[Object(c["createVNode"])("table",r,[s,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(k.articles,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id,class:{"table-primary":e.isPublic}},[Object(c["createVNode"])("td",d,[e.imageUrl?(Object(c["openBlock"])(),Object(c["createBlock"])("img",{key:0,class:"w-100 small-size",src:e.imageUrl},null,8,["src"])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("td",b,Object(c["toDisplayString"])(e.title),1),Object(c["createVNode"])("td",p,Object(c["toDisplayString"])(e.description),1),Object(c["createVNode"])("td",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.tag,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("p",{key:t},"＃"+Object(c["toDisplayString"])(e),1)})),128))]),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.author),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(new Date(1e3*e.create_at).toISOString().split("T")[0]),1),e.updateDate?(Object(c["openBlock"])(),Object(c["createBlock"])("td",u,Object(c["toDisplayString"])(new Date(1e3*e.updateDate).toISOString().split("T")[0]),1)):(Object(c["openBlock"])(),Object(c["createBlock"])("td",m,Object(c["toDisplayString"])(new Date(1e3*e.create_at).toISOString().split("T")[0]),1)),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("div",j,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"enabled"+t,"onUpdate:modelValue":function(t){return e.isPublic=t},onClick:function(t){return f.getSingle(e,"status")}},null,8,["id","onUpdate:modelValue","onClick"]),[[c["vModelCheckbox"],e.isPublic]]),e.isPublic?(Object(c["openBlock"])(),Object(c["createBlock"])("label",{key:0,class:"form-check-label",for:"enabled"+t},"公開",8,["for"])):(Object(c["openBlock"])(),Object(c["createBlock"])("label",{key:1,class:"form-check-label",for:"enabled"+t},"未公開",8,["for"]))])]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("a",{href:"",class:" text-secondary text-center shadow-none eye-hover",onClick:Object(c["withModifiers"])((function(t){return f.getSingle(e,"view")}),["prevent"])},[O],8,["onClick"])]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-sm btn-secondary text-white",onClick:function(t){return f.getSingle(e,"modal")}}," 編輯 ",8,["onClick"]),Object(c["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary white-hover ms-2",onClick:function(t){return f.openModal("delete",e)}}," 刪除 ",8,["onClick"])])],2)})),128))])]),Object(c["createVNode"])("div",g,[Object(c["createVNode"])(N,{pagination:k.pagination,onEmitPage:f.getArticle},null,8,["pagination","onEmitPage"])])]),Object(c["createVNode"])(v,{article:k.tempArticle,ref:"viewModal",onEdit:f.editArticle},null,8,["article","onEdit"]),Object(c["createVNode"])(w,{article:k.tempArticle,ref:"updateModal",onUpdate:f.updateArticle},null,8,["article","onUpdate"]),Object(c["createVNode"])(x,{item:k.tempArticle,type:"normal",ref:"delModal",onDelete:f.deleteArticle},null,8,["item","onDelete"])],64)}var k=a("5530"),f=(a("99af"),a("1799")),y=a("e7c6"),V={class:"modal fade",id:"updateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},N={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"},v={class:"modal-content"},w=Object(c["createVNode"])("div",{class:"modal-header bg-secondary text-white py-4"},[Object(c["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},"編輯文章"),Object(c["createVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),x={class:"modal-body"},B={class:"modal-footer"},C=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary white-hover","data-bs-dismiss":"modal"}," 取消 ",-1);function M(e,t,a,o,l,i){var n=Object(c["resolveComponent"])("ArticleForm");return Object(c["openBlock"])(),Object(c["createBlock"])("div",V,[Object(c["createVNode"])("div",N,[Object(c["createVNode"])("div",v,[w,Object(c["createVNode"])("div",x,[Object(c["createVNode"])(n,{article:a.article,isAdd:!1,ref:"articleForm"},null,8,["article"])]),Object(c["createVNode"])("div",B,[C,Object(c["createVNode"])("button",{type:"button",class:"btn btn-secondary text-white",onClick:t[1]||(t[1]=function(){return i.update&&i.update.apply(i,arguments)})}," 確認編輯 ")])])])],512)}var A=a("e0ae"),D=a("96e0"),L={props:{article:{type:Object}},components:{ArticleForm:D["a"]},mixins:[A["a"]],methods:{update:function(){var e=this,t=this.$refs.articleForm;t.$refs.addForm.validate().then((function(t){if(t.valid){var a=Math.round((new Date).getTime()/1e3);e.updateArticle=Object(k["a"])({updateDate:a},e.article),e.$emit("update",e.updateArticle)}}))}}};L.render=M;var S=L,_={class:"modal fade",id:"updateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},$={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"},P={class:"modal-content"},F={class:"modal-header bg-secondary text-white py-4"},T={class:"modal-title",id:"exampleModalLabel"},U=Object(c["createVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),E={class:"modal-body text-dark"},I={class:"mb-4"},J={class:"d-flex mb-4"},z={class:"d-flex justify-content-between  mb-4"},H={ref:"content"},q={class:"modal-footer"},G=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary white-hover","data-bs-dismiss":"modal"}," 關閉 ",-1);function K(e,t,a,o,l,i){return Object(c["openBlock"])(),Object(c["createBlock"])("div",_,[Object(c["createVNode"])("div",$,[Object(c["createVNode"])("div",P,[Object(c["createVNode"])("div",F,[Object(c["createVNode"])("h5",T,Object(c["toDisplayString"])(a.article.title),1),U]),Object(c["createVNode"])("div",E,[Object(c["createVNode"])("h2",I,Object(c["toDisplayString"])(a.article.title),1),Object(c["createVNode"])("div",J,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(a.article.tag,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{key:t,class:"bg-primary py-1 px-4 rounded-pill text-xs me-4"}," #"+Object(c["toDisplayString"])(e),1)})),128))]),Object(c["createVNode"])("div",z,[Object(c["createVNode"])("p",null,"作者 : "+Object(c["toDisplayString"])(a.article.author),1),Object(c["createVNode"])("p",null,"發布日期 : "+Object(c["toDisplayString"])(l.publicDate),1)]),a.article.imageUrl?(Object(c["openBlock"])(),Object(c["createBlock"])("img",{key:0,class:"w-100 mb-6",src:a.article.imageUrl,alt:""},null,8,["src"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])("div",H,null,512)]),Object(c["createVNode"])("div",q,[G,Object(c["createVNode"])("button",{type:"button",class:"btn btn-secondary text-white",onClick:t[1]||(t[1]=function(){return i.edit&&i.edit.apply(i,arguments)})}," 編輯文章 ")])])])],512)}var Q=a("3835"),R={props:{article:{type:Object}},data:function(){return{publicDate:""}},watch:{article:function(){var e=new Date(1e3*this.article.create_at).toISOString().split("T"),t=Object(Q["a"])(e,1);this.publicDate=t[0],this.$refs.content.innerHTML=this.article.content}},mixins:[A["a"]],methods:{edit:function(){this.hideModal(),this.$emit("edit")}}};R.render=K;var W=R,X={data:function(){return{isLoading:!1,articles:[],pagination:{},tempArticle:{}}},inject:["emitter"],components:{Pagination:f["a"],DeleteModal:y["a"],ArticleModal:S,ViewArticleModal:W},methods:{getArticle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/articles?page=").concat(t)).then((function(t){console.log(t),t.data.success?(e.articles=t.data.articles,e.pagination=t.data.pagination,e.isLoading=!1):(console.log(t.data.messages),e.isLoading=!1)})).catch((function(e){console.log(e)}))},getSingle:function(e,t){var a=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/article/").concat(e.id)).then((function(e){console.log(e),e.data.success?(a.tempArticle=e.data.article,a.isLoading=!1,"modal"===t?(a.tempArticle.tag||(a.tempArticle.tag=[]),a.openModal("edit",a.tempArticle)):"status"===t?(a.tempArticle.isPublic=!a.tempArticle.isPublic,a.updateArticle(a.tempArticle)):"view"===t&&a.openModal("view",a.tempArticle)):(console.log(e.data.messages),a.isLoading=!1)})).catch((function(e){console.log(e)}))},openModal:function(e,t){"edit"===e?this.$refs.updateModal.openModal():"view"===e?this.$refs.viewModal.openModal():"delete"===e&&(this.tempArticle=Object(k["a"])({},t),this.$refs.delModal.openModal())},updateArticle:function(e){var t=this;this.isLoading=!0;var a={data:e};this.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/article/").concat(e.id),a).then((function(e){console.log(e),e.data.success?(t.emitter.emit("push-message",{type:"success",message:e.data.message}),t.$refs.updateModal.hideModal(),t.getArticle(t.pagination.current_page),t.isLoading=!1):(t.emitter.emit("push-message",{type:"error",message:e.data.message}),t.isLoading=!1)})).catch((function(e){console.log(e)}))},deleteArticle:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/article/").concat(this.tempArticle.id)).then((function(t){console.log(t),t.data.success?(e.emitter.emit("push-message",{type:"success",message:t.data.message}),e.$refs.delModal.hideModal(),e.getArticle(e.pagination.current_page),e.isLoading=!1):(e.emitter.emit("push-message",{type:"error",message:t.data.message}),e.isLoading=!1)})).catch((function(e){console.log(e)}))},editArticle:function(){console.log("edit"),this.$refs.updateModal.openModal()}},mounted:function(){this.getArticle()}};X.render=h;t["default"]=X},e7c6:function(e,t,a){"use strict";var c=a("7a23"),o={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},l={class:"modal-dialog modal-dialog-centered"},i={class:"modal-content"},n=Object(c["createVNode"])("div",{class:"modal-header bg-warning text-white py-4"},[Object(c["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除"),Object(c["createVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),r={class:"modal-body"},s={class:"text-dark "},d=Object(c["createTextVNode"])(" 是否刪除 "),b={key:0,class:"text-warning"},p={key:1,class:"text-warning"},u={key:2,class:"text-warning"},m=Object(c["createTextVNode"])("? "),j=Object(c["createVNode"])("p",{class:"text-sm text-info"},"(刪除後將無法恢復)",-1),O={class:"modal-footer"},g=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-warning","data-bs-dismiss":"modal"}," 取消 ",-1);function h(e,t,a,h,k,f){return Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",i,[n,Object(c["createVNode"])("div",r,[Object(c["createVNode"])("p",s,[d,"normal"==a.type?(Object(c["openBlock"])(),Object(c["createBlock"])("span",b,Object(c["toDisplayString"])(a.item.title),1)):Object(c["createCommentVNode"])("",!0),"order"==a.type&&a.item.id?(Object(c["openBlock"])(),Object(c["createBlock"])("span",p,Object(c["toDisplayString"])(a.item.id),1)):Object(c["createCommentVNode"])("",!0),"order"!=a.type||a.item.id?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])("span",u,"全部訂單")),m]),j]),Object(c["createVNode"])("div",O,[g,Object(c["createVNode"])("button",{type:"button",class:"btn btn-warning text-white",onClick:t[1]||(t[1]=function(t){return e.$emit("delete")})}," 確認刪除 ")])])])],512)}var k=a("e0ae"),f={props:{item:{type:Object},type:{type:String}},mixins:[k["a"]]};f.render=h;t["a"]=f}}]);
//# sourceMappingURL=chunk-176d01c2.e18d3729.js.map
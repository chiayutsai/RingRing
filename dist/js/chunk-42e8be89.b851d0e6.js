(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42e8be89"],{"159b":function(e,t,c){var r=c("da84"),a=c("fdbc"),o=c("17c2"),n=c("9112");for(var s in a){var i=r[s],d=i&&i.prototype;if(d&&d.forEach!==o)try{n(d,"forEach",o)}catch(l){d.forEach=o}}},"17c2":function(e,t,c){"use strict";var r=c("b727").forEach,a=c("a640"),o=a("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,c){var r=c("d039"),a=c("b622"),o=c("2d00"),n=a("species");e.exports=function(e){return o>=51||!r((function(){var t=[],c=t.constructor={};return c[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,c){var r=c("861d"),a=c("e8b5"),o=c("b622"),n=o("species");e.exports=function(e,t){var c;return a(e)&&(c=e.constructor,"function"!=typeof c||c!==Array&&!a(c.prototype)?r(c)&&(c=c[n],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===t?0:t)}},8418:function(e,t,c){"use strict";var r=c("c04e"),a=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var n=r(t);n in e?a.f(e,n,o(0,c)):e[n]=c}},"99af":function(e,t,c){"use strict";var r=c("23e7"),a=c("d039"),o=c("e8b5"),n=c("861d"),s=c("7b0b"),i=c("50c4"),d=c("8418"),l=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),f=b("isConcatSpreadable"),h=9007199254740991,j="Maximum allowed index exceeded",O=p>=51||!a((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=u("concat"),g=function(e){if(!n(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)},m=!O||!v;r({target:"Array",proto:!0,forced:m},{concat:function(e){var t,c,r,a,o,n=s(this),u=l(n,0),b=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?n:arguments[t],g(o)){if(a=i(o.length),b+a>h)throw TypeError(j);for(c=0;c<a;c++,b++)c in o&&d(u,b,o[c])}else{if(b>=h)throw TypeError(j);d(u,b++,o)}return u.length=b,u}})},a640:function(e,t,c){"use strict";var r=c("d039");e.exports=function(e,t){var c=[][e];return!!c&&r((function(){c.call(null,t||function(){throw 1},1)}))}},ad18:function(e,t,c){"use strict";var r=c("7a23"),a={class:"d-flex justify-content-around w-50 mx-auto mb-10"},o={class:"d-flex flex-column align-items-center"},n=Object(r["createVNode"])("p",null,"購物車",-1),s={class:"d-flex flex-column align-items-center"},i=Object(r["createVNode"])("p",null,"填寫資訊",-1),d={class:"d-flex flex-column align-items-center"},l=Object(r["createVNode"])("p",null,"確認訂單",-1),u={class:"d-flex flex-column align-items-center"},b=Object(r["createVNode"])("p",null,"完成購物",-1);function p(e,t,c,p,f,h){return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])("div",o,[Object(r["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"1"===c.step}]}," 1 ",2),n]),Object(r["createVNode"])("div",s,[Object(r["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"2"===c.step}]}," 2 ",2),i]),Object(r["createVNode"])("div",d,[Object(r["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"3"===c.step}]}," 3 ",2),l]),Object(r["createVNode"])("div",u,[Object(r["createVNode"])("div",{class:["d-flex align-items-center justify-content-center circle rounded-circle border mb-2",{"progress-active":"4"===c.step}]}," 4 ",2),b])])}var f={props:{step:String}};f.render=p;t["a"]=f},ae8d:function(e,t,c){"use strict";var r=c("7a23"),a={class:"col card"},o={class:"card-body"},n={class:"card-title mb-2"},s={key:0},i={class:"mb-2"},d={class:"text-dark text-sm opacity-5 text-decoration-line-through ms-2"},l={key:1,class:"d-flex align-items-center justify-content-between"},u={class:"text-light text-decoration-line-through ms-2"},b={class:"d-flex"},p=Object(r["createVNode"])("a",{href:"",class:"me-2"},[Object(r["createVNode"])("span",{class:"material-icons"}," favorite_border ")],-1),f=Object(r["createVNode"])("span",{class:"material-icons"}," shopping_cart ",-1);function h(e,t,c,h,j,O){var v=Object(r["resolveComponent"])("router-link");return Object(r["openBlock"])(),Object(r["createBlock"])("li",a,[Object(r["createVNode"])(v,{class:["card-img ",{"card-img-rotate":!c.cartCard,"card-small-img":c.cartCard}],onMouseover:O.changeImg,onMouseleave:O.recoveryImg,to:"/product/".concat(c.product.id)},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("img",{src:c.product.imageUrl,class:{"show-card-img":j.showFirstImg},alt:""},null,10,["src"]),c.product.imagesUrl?(Object(r["openBlock"])(),Object(r["createBlock"])("img",{key:0,class:{"show-card-img":!j.showFirstImg},src:c.product.imagesUrl[0],alt:""},null,10,["src"])):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["class","onMouseover","onMouseleave","to"]),Object(r["createVNode"])("div",o,[Object(r["createVNode"])("h2",n,[Object(r["createVNode"])(v,{to:"/product/".concat(c.product.id),class:{"text-dark ":c.cartCard,"text-base":c.cartCard}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(c.product.title),1)]})),_:1},8,["to","class"])]),c.cartCard?(Object(r["openBlock"])(),Object(r["createBlock"])("div",s,[Object(r["createVNode"])("p",i,[Object(r["createTextVNode"])(" NT$"+Object(r["toDisplayString"])(c.product.price),1),Object(r["createVNode"])("span",d,"NT$"+Object(r["toDisplayString"])(c.product.origin_price),1)]),Object(r["createVNode"])("div",{class:"btn btn-sm btn-secondary text-white secondary-hover",onClick:t[1]||(t[1]=function(e){return O.addCart(c.product.id)})}," 加入購物車 ")])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",l,[Object(r["createVNode"])("p",null,[Object(r["createTextVNode"])(" NT$"+Object(r["toDisplayString"])(c.product.price),1),Object(r["createVNode"])("span",u,"NT$"+Object(r["toDisplayString"])(c.product.origin_price),1)]),Object(r["createVNode"])("div",b,[p,Object(r["createVNode"])("a",{href:"",onClick:t[2]||(t[2]=Object(r["withModifiers"])((function(e){return O.addCart(c.product.id)}),["prevent"]))},[f])])]))])])}c("99af");var j={props:{product:Object,cartCard:Boolean},data:function(){return{showFirstImg:!0}},methods:{changeImg:function(){this.product.imagesUrl&&(this.showFirstImg=!1)},recoveryImg:function(){this.showFirstImg=!0},addCart:function(e){var t={data:{product_id:e,qty:1}};this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart"),t).then((function(e){console.log(e),e.data.success,alert(e.data.message)})).catch((function(e){console.log(e)}))}}};j.render=h;t["a"]=j},b727:function(e,t,c){var r=c("0366"),a=c("44ad"),o=c("7b0b"),n=c("50c4"),s=c("65f0"),i=[].push,d=function(e){var t=1==e,c=2==e,d=3==e,l=4==e,u=6==e,b=7==e,p=5==e||u;return function(f,h,j,O){for(var v,g,m=o(f),N=a(m),y=r(h,j,3),V=n(N.length),x=0,k=O||s,w=t?k(f,V):c||b?k(f,0):void 0;V>x;x++)if((p||x in N)&&(v=N[x],g=y(v,x,m),e))if(t)w[x]=g;else if(g)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:i.call(w,v)}else switch(e){case 4:return!1;case 7:i.call(w,v)}return u?-1:d||l?l:w}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}},b789:function(e,t,c){"use strict";c.r(t);var r=c("7a23"),a={class:"container pt-17"},o=Object(r["createVNode"])("h3",{class:"d-flex rounded-top align-items-center\n     bg-secondary p-4"},[Object(r["createVNode"])("span",{class:"material-icons me-3"}," shopping_cart "),Object(r["createTextVNode"])("購物車 ")],-1),n={key:0,class:"p-4 border border-white border-bottom-0 bg-table text-dark"},s=Object(r["createVNode"])("p",{class:"text-center text-xl mb-6"},"購物車目前沒有商品",-1),i={class:"d-block w-25 mx-auto btn btn-secondary text-white secondary-hover mb-5"},d=Object(r["createTextVNode"])(" 前往商店"),l={key:1},u=Object(r["createStaticVNode"])('<div class="row g-0 p-4 border border-white border-bottom-0 bg-table text-dark"><div class="col-4">商品資料</div><div class="col-2">單件價格</div><div class="col-3">數量</div><div class="col-2">小計</div><div class="col-1"></div></div>',1),b={class:"cart_list"},p={class:"col-4"},f={class:"d-flex align-items-center"},h={class:"text-lg"},j={class:"col-2"},O={class:"text-dark opacity-5 text-sm text-decoration-line-through"},v={class:"col-3"},g={class:"col-2"},m={class:"col-1"},N=Object(r["createVNode"])("span",{class:"material-icons"}," delete_forever ",-1),y={class:"d-flex justify-content-between align-items-center\n      rounded-bottom bg-table border border-white p-6"},V={class:"d-flex align-items-center"},x={class:"text-dark text-xl me-5"},k=Object(r["createTextVNode"])("繼續購物"),w={class:"container mt-15 mb-17"},C={class:"row g-5"},B={class:"col-8"},T=Object(r["createVNode"])("p",{class:"text-xl rounded-top bg-secondary p-4"},"超值加購",-1),_={class:"p-4 rounded-bottom border border-white bg-table text-dark"},q={class:"row row-cols-3"},$={class:"col-4"},D=Object(r["createVNode"])("p",{class:"text-xl rounded-top bg-secondary p-4"},"訂單資訊",-1),S={class:"row g-0 p-6 rounded-bottom border border-white bg-table text-dark"},P=Object(r["createVNode"])("div",{class:"col-4 mb-4"},[Object(r["createVNode"])("p",null,"商品數量：")],-1),A={class:"col-8 mb-4"},E=Object(r["createVNode"])("div",{class:"col-4 mb-4"},[Object(r["createVNode"])("p",null,"小計：")],-1),M={class:"col-8 mb-4"},I=Object(r["createVNode"])("div",{class:"col-12 mb-6"},[Object(r["createVNode"])("div",{class:"border-bottom border-white"})],-1),Q=Object(r["createVNode"])("div",{class:"col-4 mb-4"},[Object(r["createVNode"])("p",{class:"fw-bold"},"總計：")],-1),F={class:"col-8 mb-4"},U={class:"fw-bold"},J={class:"col-12"};function L(e,t,c,L,R,z){var G=Object(r["resolveComponent"])("Progress"),H=Object(r["resolveComponent"])("router-link"),K=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])(G,{step:"1"}),o,R.cart.length<=0?(Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[s,Object(r["createVNode"])("div",i,[Object(r["createVNode"])(H,{class:"white-hover",to:"/shop"},{default:Object(r["withCtx"])((function(){return[d]})),_:1})])])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",l,[u,Object(r["createVNode"])("div",b,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(R.cart,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:e.id,class:"row g-0 p-4 border border-white align-items-center\n        bg-table text-dark border-bottom-0"},[Object(r["createVNode"])("div",p,[Object(r["createVNode"])("div",f,[Object(r["createVNode"])("img",{class:"w-40 me-4",src:e.product.imageUrl,alt:""},null,8,["src"]),Object(r["createVNode"])("h3",h,Object(r["toDisplayString"])(e.product.title),1)])]),Object(r["createVNode"])("div",j,[Object(r["createVNode"])("p",null,"NT$"+Object(r["toDisplayString"])(e.product.price),1),Object(r["createVNode"])("p",O," NT$"+Object(r["toDisplayString"])(e.product.origin_price),1)]),Object(r["createVNode"])("div",v,[Object(r["createVNode"])("div",{class:["d-flex w-75",{"mb-2":R.failQty}]},[Object(r["createVNode"])("input",{disabled:e.qty<=1,class:"quantity-btn cart-remove text-dark border-dark",value:"-",type:"button",onClick:function(e){return z.minusCartQty(t)}},null,8,["disabled","onClick"]),Object(r["withDirectives"])(Object(r["createVNode"])("input",{class:"text-center quantity w-100 border-start-0\n              border-end-0 border-dark bg-transparent",type:"number","onUpdate:modelValue":function(t){return e.qty=t},min:"1",onChange:function(c){return z.updateCart(t,e.id,e.qty)}},null,40,["onUpdate:modelValue","onChange"]),[[r["vModelText"],e.qty,void 0,{number:!0}]]),Object(r["createVNode"])("input",{type:"button",class:"quantity-btn plus text-dark\n            border-dark",value:"+",onClick:function(e){return z.addCartQty(t)}},null,8,["onClick"])],2)]),Object(r["createVNode"])("div",g,"NT$"+Object(r["toDisplayString"])(e.final_total),1),Object(r["createVNode"])("div",m,[Object(r["createVNode"])("a",{onClick:Object(r["withModifiers"])((function(t){return z.deleteCart(e.id)}),["prevent"]),href:"",class:"text-dark"},[N],8,["onClick"])])])})),128))]),Object(r["createVNode"])("div",y,[Object(r["createVNode"])("a",{onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(){return z.deleteAll&&z.deleteAll.apply(z,arguments)}),["prevent"])),class:"btn btn-outline-dark"},"清空購物車"),Object(r["createVNode"])("div",V,[Object(r["createVNode"])("p",x,"總計：NT$"+Object(r["toDisplayString"])(R.final_total),1),Object(r["createVNode"])(H,{to:"/shop",class:"btn btn-dark"},{default:Object(r["withCtx"])((function(){return[k]})),_:1})])])]))]),Object(r["createVNode"])("div",w,[Object(r["createVNode"])("div",C,[Object(r["createVNode"])("div",B,[T,Object(r["createVNode"])("div",_,[Object(r["createVNode"])("ul",q,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(R.randomProduct,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(K,{key:e.id,cartCard:!0,product:e},null,8,["product"])})),128))])])]),Object(r["createVNode"])("div",$,[D,Object(r["createVNode"])("div",S,[P,Object(r["createVNode"])("div",A,[Object(r["createVNode"])("p",null,"共 "+Object(r["toDisplayString"])(R.allQty)+" 件",1)]),E,Object(r["createVNode"])("div",M,[Object(r["createVNode"])("p",null,"NT$"+Object(r["toDisplayString"])(R.final_total),1)]),I,Q,Object(r["createVNode"])("div",F,[Object(r["createVNode"])("p",U,"NT$"+Object(r["toDisplayString"])(R.final_total),1)]),Object(r["createVNode"])("div",J,[Object(r["createVNode"])("div",{onClick:t[2]||(t[2]=function(){return z.goToPay&&z.goToPay.apply(z,arguments)}),class:"btn btn-secondary w-100 fw-bold text-white shadow secondary-hover"}," 前往結帳 ")])])])])])],64)}c("99af"),c("159b"),c("d81d");var R=c("ad18"),z=c("ae8d"),G={data:function(){return{cart:[],final_total:0,allQty:0,failQty:!1,allProduct:[],randomProduct:[]}},components:{Progress:R["a"],Card:z["a"]},methods:{getAllData:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/products/all")).then((function(t){console.log(t),t.data.success?(e.allProduct=t.data.products,e.getRandom()):alert(t.data.message)})).catch((function(e){console.log(e)}))},addCartQty:function(e){this.cart[e].qty+=1,this.updateCart(e,this.cart[e].id,this.cart[e].qty)},minusCartQty:function(e){console.log(this.cart[e].qty),this.cart[e].qty-=1,this.updateCart(e,this.cart[e].id,this.cart[e].qty)},getcart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart");this.$http.get(t).then((function(t){console.log(t.data.data),t.data.success?(e.allQty=0,e.cart=t.data.data.carts,e.final_total=t.data.data.final_total,e.cart.forEach((function(t){e.allQty+=t.qty}))):alert(t.data.message)})).catch((function(e){console.log(e)}))},updateCart:function(e,t,c){var r=this;if(this.cart[e].qty<1)this.cart[e].qty=1;else{var a={data:{product_id:t,qty:c}},o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart/").concat(t);this.$http.put(o,a).then((function(e){console.log(e),e.data.success?(alert(e.data.message),r.getcart()):alert(e.data.message)})).catch((function(e){console.log(e)}))}},deleteCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/cart/").concat(e);this.$http.delete(c).then((function(e){console.log(e),e.data.success?(alert(e.data.message),t.getcart()):alert(e.data.message)})).catch((function(e){console.log(e)}))},deleteAll:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/carts");this.$http.delete(t).then((function(t){console.log(t),t.data.success?(alert(t.data.message),e.getcart()):alert(t.data.message)})).catch((function(e){console.log(e)}))},goToPay:function(){0!==this.cart.length?this.$router.push("/checkout"):alert("購物車是空的，快去新增商品吧")},getRandom:function(){var e=this,t=Math.floor(Math.random()*this.allProduct.length),c=[t,t+1,t+2],r=c.map((function(t){return t%e.allProduct.length}));r.forEach((function(t){e.randomProduct.push(e.allProduct[t])}))}},mounted:function(){this.getcart(),this.getAllData()}};G.render=L;t["default"]=G},d81d:function(e,t,c){"use strict";var r=c("23e7"),a=c("b727").map,o=c("1dde"),n=o("map");r({target:"Array",proto:!0,forced:!n},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,t,c){var r=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-42e8be89.b851d0e6.js.map
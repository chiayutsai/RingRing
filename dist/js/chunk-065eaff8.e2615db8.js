(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-065eaff8"],{2909:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));var a=c("6b75");function o(e){if(Array.isArray(e))return Object(a["a"])(e)}c("a4d3"),c("e01a"),c("d3b7"),c("d28b"),c("3ca3"),c("ddb0"),c("a630");function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var i=c("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return o(e)||n(e)||Object(i["a"])(e)||r()}},"9e3f":function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a");var a=c("7a23"),o={class:"d-flex align-items-center justify-content-between mb-5 "},n=Object(a["createVNode"])("h2",{class:"text-dark"},"文章列表",-1),i=Object(a["createTextVNode"])("新增文章"),r={class:"bg-white rounded overflow-hidden border border-secondary  "},s={class:"table table-borderless mb-0"},l=Object(a["createVNode"])("thead",{class:"bg-secondary text-white"},[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{class:"w-10"},"文章主圖"),Object(a["createVNode"])("th",{class:"w-20"},"文章標題"),Object(a["createVNode"])("th",{class:"w-20"},"描述"),Object(a["createVNode"])("th",null,"文章分類"),Object(a["createVNode"])("th",null,"作者"),Object(a["createVNode"])("th",null,"建立時間"),Object(a["createVNode"])("th",null,"是否公開"),Object(a["createVNode"])("th",{class:"text-center"},"預覽"),Object(a["createVNode"])("th",null,"編輯 / 刪除")])],-1),d={class:"w-10"},u={class:"w-20"},b={class:"w-20"},p={class:"form-check form-switch"},h=Object(a["createVNode"])("span",{class:"material-icons text-lg "}," visibility ",-1),g={class:"d-flex justify-content-end align-items-center py-4 px-6 bg-secondary "};function m(e,t,c,m,j,O){var f=Object(a["resolveComponent"])("Loading"),y=Object(a["resolveComponent"])("router-link"),N=Object(a["resolveComponent"])("Pagination"),V=Object(a["resolveComponent"])("DeleteModal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(f,{isLoading:j.isLoading},null,8,["isLoading"]),Object(a["createVNode"])("div",o,[n,Object(a["createVNode"])(y,{to:"/dashboard/newArticle",class:"btn btn-secondary text-white shadow-none "},{default:Object(a["withCtx"])((function(){return[i]})),_:1})]),Object(a["createVNode"])("div",r,[Object(a["createVNode"])("table",s,[l,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(j.articles,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id,class:{"table-primary":e.isPublic}},[Object(a["createVNode"])("td",d,[Object(a["createVNode"])("img",{class:"w-100 small-size",src:e.imageUrl},null,8,["src"])]),Object(a["createVNode"])("td",u,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("td",b,Object(a["toDisplayString"])(e.description),1),Object(a["createVNode"])("td",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tag,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("p",{key:t},Object(a["toDisplayString"])(e),1)})),128))]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.author),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.create_at),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",p,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"enabled"+t,"onUpdate:modelValue":function(t){return e.isPublic=t},onChange:function(t){return O.changeStatus(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["vModelCheckbox"],e.isPublic]]),e.isPublic?(Object(a["openBlock"])(),Object(a["createBlock"])("label",{key:0,class:"form-check-label",for:"enabled"+t},"公開",8,["for"])):(Object(a["openBlock"])(),Object(a["createBlock"])("label",{key:1,class:"form-check-label",for:"enabled"+t},"未公開",8,["for"]))])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("a",{href:"",class:" text-secondary text-center shadow-none eye-hover",onClick:Object(a["withModifiers"])((function(t){return O.openModal("watch",e)}),["prevent"])},[h],8,["onClick"])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-secondary text-white",onClick:function(t){return O.openModal("edit",e)}}," 編輯 ",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary white-hover ms-2",onClick:function(t){return O.openModal("delete",e)}}," 刪除 ",8,["onClick"])])],2)})),128))])]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])(N,{pagination:j.pagination,onEmitPage:e.getData},null,8,["pagination","onEmitPage"])])]),Object(a["createVNode"])(V,{item:j.tempArticle,type:"normal",ref:"delModal",onDelete:O.deleteProduct},null,8,["item","onDelete"])],64)}var j=c("2909"),O=c("5530"),f=(c("99af"),c("1799")),y=c("e7c6"),N={data:function(){return{isLoading:!1,articles:[],pagination:{},tempArticle:{}}},inject:["emitter"],components:{Pagination:f["a"],DeleteModal:y["a"]},methods:{getArticle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/articles?page=").concat(t)).then((function(t){console.log(t),t.data.success?(e.articles=t.data.articles,e.pagination=t.data.pagination,e.isLoading=!1):(console.log(t.data.messages),e.isLoading=!1)})).catch((function(e){console.log(e)}))},openModal:function(e,t){"edit"===e?(this.tempProduct=Object(O["a"])(Object(O["a"])({},t),{},{formats:void 0===t.formats?[{format:"",content:""}]:JSON.parse(JSON.stringify(t.formats)),imagesUrl:void 0===t.imagesUrl?[]:Object(j["a"])(t.imagesUrl)}),this.$refs.updateModal.openModal()):"delete"===e&&(this.tempProduct=Object(O["a"])({},t),this.$refs.delModal.openModal())},updateProduct:function(e){var t=this;this.isLoading=!0;var c={data:e};this.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(e.id),c).then((function(e){console.log(e),e.data.success?(t.emitter.emit("push-message",{type:"success",message:e.data.message}),t.$refs.updateModal.hideModal(),t.getData(t.pagination.current_page),t.isLoading=!1):(t.emitter.emit("push-message",{type:"error",message:e.data.message}),t.isLoading=!1)})).catch((function(e){console.log(e)}))},changeStatus:function(e){this.tempProduct=Object(O["a"])({},e),this.updateProduct(this.tempProduct)},deleteProduct:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(this.tempProduct.id)).then((function(t){console.log(t),t.data.success?(e.emitter.emit("push-message",{type:"success",message:t.data.message}),e.$refs.delModal.hideModal(),e.getData(e.pagination.current_page),e.isLoading=!1):(e.emitter.emit("push-message",{type:"error",message:t.data.message}),e.isLoading=!1)})).catch((function(e){console.log(e)}))}},mounted:function(){this.getArticle()}};N.render=m;t["default"]=N}}]);
//# sourceMappingURL=chunk-065eaff8.e2615db8.js.map
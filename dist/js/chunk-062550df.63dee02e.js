(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-062550df"],{"07ac":function(e,t,c){var a=c("23e7"),o=c("6f53").values;a({target:"Object",stat:!0},{values:function(e){return o(e)}})},2532:function(e,t,c){"use strict";var a=c("23e7"),o=c("5a34"),n=c("1d80"),r=c("ab13");a({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(n(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},2909:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));var a=c("6b75");function o(e){if(Array.isArray(e))return Object(a["a"])(e)}c("a4d3"),c("e01a"),c("d3b7"),c("d28b"),c("3ca3"),c("ddb0"),c("a630");function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var r=c("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return o(e)||n(e)||Object(r["a"])(e)||l()}},"4f23":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"d-flex align-items-center justify-content-between mb-5 "},n=Object(a["h"])("h2",{class:"text-dark"},"產品列表",-1),r=Object(a["g"])("新增產品"),l={class:"bg-white rounded overflow-hidden border border-secondary  "},s={class:"table table-borderless mb-0"},i=Object(a["h"])("thead",{class:"bg-secondary text-white"},[Object(a["h"])("tr",null,[Object(a["h"])("th",{class:"w-15"},"產品圖片"),Object(a["h"])("th",{class:""},"產品名稱"),Object(a["h"])("th",null,"分類"),Object(a["h"])("th",null,"原價"),Object(a["h"])("th",null,"售價"),Object(a["h"])("th",null,"是否上架"),Object(a["h"])("th",null,"編輯 / 刪除")])],-1),d={id:"productList"},u={class:"w-15"},b={class:"form-check form-switch"},p={colspan:"8",class:"p-0 border-bottom border-secondary"},m={class:"d-flex justify-content-between align-items-center py-4 px-6 bg-secondary "},h={class:"text-white"};function f(e,t,c,f,O,j){var g=Object(a["A"])("Loading"),v=Object(a["A"])("router-link"),y=Object(a["A"])("ProductCollapse"),x=Object(a["A"])("Pagination"),k=Object(a["A"])("ProductModal"),P=Object(a["A"])("DeleteModal");return Object(a["v"])(),Object(a["d"])(a["a"],null,[Object(a["h"])(g,{isLoading:O.isLoading},null,8,["isLoading"]),Object(a["h"])("div",o,[n,Object(a["h"])(v,{to:"/dashboard/newProduct",class:"btn btn-secondary text-white shadow-none "},{default:Object(a["L"])((function(){return[r]})),_:1})]),Object(a["h"])("div",l,[Object(a["h"])("table",s,[i,Object(a["h"])("tbody",d,[(Object(a["v"])(!0),Object(a["d"])(a["a"],null,Object(a["z"])(O.products,(function(e,t){return Object(a["v"])(),Object(a["d"])(a["a"],{key:e.id},[Object(a["h"])("tr",{class:{"table-primary":e.is_enabled}},[Object(a["h"])("td",u,[Object(a["h"])("img",{class:"w-100 small-size",src:e.imageUrl},null,8,["src"])]),Object(a["h"])("td",null,Object(a["D"])(e.title),1),Object(a["h"])("td",null,Object(a["D"])(e.category),1),Object(a["h"])("td",null,Object(a["D"])(e.origin_price),1),Object(a["h"])("td",null,Object(a["D"])(e.price),1),Object(a["h"])("td",null,[Object(a["h"])("div",b,[Object(a["M"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",id:"enabled"+t,"onUpdate:modelValue":function(t){return e.is_enabled=t},"true-value":1,"false-value":0,onChange:function(t){return j.changeStatus(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["G"],e.is_enabled]]),e.is_enabled?(Object(a["v"])(),Object(a["d"])("label",{key:0,class:"form-check-label",for:"enabled"+t},"上架",8,["for"])):(Object(a["v"])(),Object(a["d"])("label",{key:1,class:"form-check-label",for:"enabled"+t},"未上架",8,["for"]))])]),Object(a["h"])("td",null,[Object(a["h"])("button",{type:"button",class:"btn btn-sm btn-secondary text-white",onClick:function(t){return j.openModal("edit",e)}}," 編輯 ",8,["onClick"]),Object(a["h"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary white-hover ms-2",onClick:function(t){return j.openModal("delete",e)}}," 刪除 ",8,["onClick"]),Object(a["h"])("button",{class:"btn btn-outline-secondary white-hover float-end p-0 lh-1 mt-2 me-4",onClick:function(e){return j.openCollapse(t)}},[Object(a["h"])("span",{class:["material-icons text-lg align-bottom",{"arrow-rotate":t==O.isOpen.id&&O.isOpen.open}]}," arrow_drop_down ",2)],8,["onClick"])])],2),Object(a["h"])("tr",{class:{"table-primary":e.is_enabled}},[Object(a["h"])("td",p,[Object(a["h"])(y,{ref:"ProductCollapse",product:e,num:t},null,8,["product","num"])])],2)],64)})),128))])]),Object(a["h"])("div",m,[Object(a["h"])("p",h,"目前有 "+Object(a["D"])(O.totalAmount)+" 樣產品",1),Object(a["h"])(x,{pagination:O.pagination,onEmitPage:j.getData},null,8,["pagination","onEmitPage"])])]),Object(a["h"])(k,{product:O.tempProduct,ref:"updateModal",onUpdate:j.updateProduct},null,8,["product","onUpdate"]),Object(a["h"])(P,{item:O.tempProduct,type:"normal",ref:"delModal",onDelete:j.deleteProduct},null,8,["item","onDelete"])],64)}var O=c("2909"),j=c("5530"),g=(c("99af"),c("07ac"),c("159b"),c("caad"),c("2532"),c("1799")),v=(c("a4d3"),c("e01a"),{class:"d-flex mb-5"}),y=Object(a["h"])("div",{class:"me-2 flex-shrink-0"},"產品單位 :",-1),x={class:""},k={class:"d-flex mb-5"},P=Object(a["h"])("div",{class:"me-2 flex-shrink-0"},"產品規格 :",-1),w={class:""},C={class:"d-flex mb-5"},U=Object(a["h"])("div",{class:"me-2 flex-shrink-0"},"產品描述 :",-1),A={class:""},I={class:"d-flex mb-5"},M=Object(a["h"])("div",{class:"me-2 flex-shrink-0"},"說明內容 :",-1),V={class:""},D={class:"d-flex mb-5"},_=Object(a["h"])("div",{class:"me-2 flex-shrink-0"},"輪播圖片 :",-1),L={class:""},E={class:"d-flex flex-wrap"};function N(e,t,c,o,n,r){return Object(a["v"])(),Object(a["d"])("div",{class:"collapse text-sm p-8",id:"collapseExample".concat(c.num),ref:"collapse"},[Object(a["h"])("div",v,[y,Object(a["h"])("div",x,Object(a["D"])(c.product.unit),1)]),Object(a["h"])("div",k,[P,Object(a["h"])("div",w,[(Object(a["v"])(!0),Object(a["d"])(a["a"],null,Object(a["z"])(c.product.formats,(function(e,t){return Object(a["v"])(),Object(a["d"])("p",{key:t,class:"mb-3"},Object(a["D"])(e.format)+" : "+Object(a["D"])(e.content),1)})),128))])]),Object(a["h"])("div",C,[U,Object(a["h"])("div",A,Object(a["D"])(c.product.description),1)]),Object(a["h"])("div",I,[M,Object(a["h"])("div",V,Object(a["D"])(c.product.content),1)]),Object(a["h"])("div",D,[_,Object(a["h"])("div",L,[Object(a["h"])("div",E,[(Object(a["v"])(!0),Object(a["d"])(a["a"],null,Object(a["z"])(c.product.imagesUrl,(function(e,t){return Object(a["v"])(),Object(a["d"])("img",{class:"w-15 small-size me-3",src:e,key:"img"+t},null,8,["src"])})),128))])])])],8,["id"])}c("a9e3"),c("fb6a"),c("d81d");var F=c("7b17"),S={props:{product:Object,num:Number},data:function(){return{collapse:[]}},methods:{showCollapse:function(e){var t=[].slice.call(document.querySelectorAll(".collapse"));this.collapse=t.map((function(t,c){return c===e?new F["a"](t,{toggle:!1}).toggle():new F["a"](t,{toggle:!1}).hide()}))}}};S.render=N;var $=S,T=c("e7c6"),z={class:"modal fade",id:"updateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},G={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"},q={class:"modal-content"},J=Object(a["h"])("div",{class:"modal-header bg-secondary text-white py-4"},[Object(a["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},"編輯產品"),Object(a["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),R={class:"modal-body"},X={class:"modal-footer"},Y=Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary white-hover","data-bs-dismiss":"modal"}," 取消 ",-1);function B(e,t,c,o,n,r){var l=Object(a["A"])("ProductForm");return Object(a["v"])(),Object(a["d"])("div",z,[Object(a["h"])("div",G,[Object(a["h"])("div",q,[J,Object(a["h"])("div",R,[Object(a["h"])(l,{product:c.product,isAdd:!1,ref:"productForm"},null,8,["product"])]),Object(a["h"])("div",X,[Y,Object(a["h"])("button",{type:"button",class:"btn btn-secondary text-white",onClick:t[1]||(t[1]=function(){return r.update&&r.update.apply(r,arguments)})}," 確認編輯 ")])])])],512)}var H=c("e0ae"),K=c("da51"),Q={props:{product:{type:Object}},components:{ProductForm:K["a"]},mixins:[H["a"]],methods:{update:function(){var e=this,t=this.$refs.productForm;t.$refs.addForm.validate().then((function(t){console.log(t),t.valid?e.$emit("update",e.product):console.log("error")}))}}};Q.render=B;var W=Q,Z={data:function(){return{isLoading:!1,products:[],pagination:{},totalAmount:0,productsCategory:[],tempProduct:{},isOpen:{id:null,open:!1}}},inject:["emitter"],components:{Pagination:g["a"],ProductCollapse:$,DeleteModal:T["a"],ProductModal:W},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/products?page=").concat(t)).then((function(t){console.log(t),t.data.success?(e.products=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1):(console.log(t.data.messages),e.isLoading=!1)})).catch((function(e){console.log(e)})),this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/products/all")).then((function(t){if(t.data.success){var c=Object.values(t.data.products);e.totalAmount=c.length,c.forEach((function(t){e.productsCategory.includes(t.category)||e.productsCategory.push(t.category)}))}})).catch((function(e){console.log(e)}))},openCollapse:function(e){this.isOpen.id===e?this.isOpen.open=!this.isOpen.open:(this.isOpen.id=e,this.isOpen.open=!0),this.$refs.ProductCollapse.showCollapse(e)},openModal:function(e,t){"edit"===e?(this.tempProduct=Object(j["a"])(Object(j["a"])({},t),{},{formats:void 0===t.formats?[{format:"",content:""}]:JSON.parse(JSON.stringify(t.formats)),imagesUrl:void 0===t.imagesUrl?[]:Object(O["a"])(t.imagesUrl)}),this.$refs.updateModal.openModal()):"delete"===e&&(this.tempProduct=Object(j["a"])({},t),this.$refs.delModal.openModal())},updateProduct:function(e){var t=this;this.isLoading=!0;var c={data:e};this.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(e.id),c).then((function(e){console.log(e),e.data.success?(t.emitter.emit("push-message",{type:"success",message:e.data.message}),t.$refs.updateModal.hideModal(),t.getData(t.pagination.current_page),t.isLoading=!1):(t.emitter.emit("push-message",{type:"error",message:e.data.message}),t.isLoading=!1)})).catch((function(e){console.log(e)}))},changeStatus:function(e){this.tempProduct=Object(j["a"])({},e),this.updateProduct(this.tempProduct)},deleteProduct:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(this.tempProduct.id)).then((function(t){console.log(t),t.data.success?(e.emitter.emit("push-message",{type:"success",message:t.data.message}),e.$refs.delModal.hideModal(),e.getData(e.pagination.current_page),e.isLoading=!1):(e.emitter.emit("push-message",{type:"error",message:t.data.message}),e.isLoading=!1)})).catch((function(e){console.log(e)}))}},mounted:function(){this.getData()}};Z.render=f;t["default"]=Z},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,c){var a=c("1d80"),o=c("5899"),n="["+o+"]",r=RegExp("^"+n+n+"*"),l=RegExp(n+n+"*$"),s=function(e){return function(t){var c=String(a(t));return 1&e&&(c=c.replace(r,"")),2&e&&(c=c.replace(l,"")),c}};e.exports={start:s(1),end:s(2),trim:s(3)}},"5a34":function(e,t,c){var a=c("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6f53":function(e,t,c){var a=c("83ab"),o=c("df75"),n=c("fc6a"),r=c("d1e7").f,l=function(e){return function(t){var c,l=n(t),s=o(l),i=s.length,d=0,u=[];while(i>d)c=s[d++],a&&!r.call(l,c)||u.push(e?[c,l[c]]:l[c]);return u}};e.exports={entries:l(!0),values:l(!1)}},7156:function(e,t,c){var a=c("861d"),o=c("d2bb");e.exports=function(e,t,c){var n,r;return o&&"function"==typeof(n=t.constructor)&&n!==c&&a(r=n.prototype)&&r!==c.prototype&&o(e,r),e}},a434:function(e,t,c){"use strict";var a=c("23e7"),o=c("23cb"),n=c("a691"),r=c("50c4"),l=c("7b0b"),s=c("65f0"),i=c("8418"),d=c("1dde"),u=d("splice"),b=Math.max,p=Math.min,m=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,a,d,u,f,O,j=l(this),g=r(j.length),v=o(e,g),y=arguments.length;if(0===y?c=a=0:1===y?(c=0,a=g-v):(c=y-2,a=p(b(n(t),0),g-v)),g+c-a>m)throw TypeError(h);for(d=s(j,a),u=0;u<a;u++)f=v+u,f in j&&i(d,u,j[f]);if(d.length=a,c<a){for(u=v;u<g-a;u++)f=u+a,O=u+c,f in j?j[O]=j[f]:delete j[O];for(u=g;u>g-a+c;u--)delete j[u-1]}else if(c>a)for(u=g-a;u>v;u--)f=u+a-1,O=u+c-1,f in j?j[O]=j[f]:delete j[O];for(u=0;u<c;u++)j[u+v]=arguments[u+2];return j.length=g-a+c,d}})},a9e3:function(e,t,c){"use strict";var a=c("83ab"),o=c("da84"),n=c("94ca"),r=c("6eeb"),l=c("5135"),s=c("c6b6"),i=c("7156"),d=c("c04e"),u=c("d039"),b=c("7c73"),p=c("241c").f,m=c("06cf").f,h=c("9bf2").f,f=c("58a8").trim,O="Number",j=o[O],g=j.prototype,v=s(b(g))==O,y=function(e){var t,c,a,o,n,r,l,s,i=d(e,!1);if("string"==typeof i&&i.length>2)if(i=f(i),t=i.charCodeAt(0),43===t||45===t){if(c=i.charCodeAt(2),88===c||120===c)return NaN}else if(48===t){switch(i.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+i}for(n=i.slice(2),r=n.length,l=0;l<r;l++)if(s=n.charCodeAt(l),s<48||s>o)return NaN;return parseInt(n,a)}return+i};if(n(O,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var x,k=function(e){var t=arguments.length<1?0:e,c=this;return c instanceof k&&(v?u((function(){g.valueOf.call(c)})):s(c)!=O)?i(new j(y(t)),c,k):y(t)},P=a?p(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),w=0;P.length>w;w++)l(j,x=P[w])&&!l(k,x)&&h(k,x,m(j,x));k.prototype=g,g.constructor=k,r(o,O,k)}},ab13:function(e,t,c){var a=c("b622"),o=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[o]=!1,"/./"[e](t)}catch(a){}}return!1}},caad:function(e,t,c){"use strict";var a=c("23e7"),o=c("4d64").includes,n=c("44d2");a({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},d81d:function(e,t,c){"use strict";var a=c("23e7"),o=c("b727").map,n=c("1dde"),r=n("map");a({target:"Array",proto:!0,forced:!r},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},da51:function(e,t,c){"use strict";c("a4d3"),c("e01a");var a=c("7a23"),o={class:"row"},n={class:"col-12 mb-8"},r={for:"productTitle",class:"form-label"},l=Object(a["g"])("產品名稱"),s={key:0},i={class:"col-6 mb-8"},d={for:"productOriginPrice",class:"form-label"},u=Object(a["g"])("產品原價"),b={key:0},p={class:"col-6 mb-8"},m={for:"productPrice",class:"form-label"},h=Object(a["g"])("產品售價"),f={key:0},O={class:"row row-cols-2 align-items-end"},j={class:"col mb-8"},g={class:"form-label"},v=Object(a["g"])("產品分類"),y={key:0},x={class:"col mb-8"},k={key:0,class:"d-flex"},P={class:"row row-cols-2 align-items-end"},w={class:"col "},C=Object(a["h"])("label",{class:"form-label"},"產品規格",-1),U=Object(a["h"])("p",null,":",-1),A={class:"col mb-8"},I={class:"row"},M={class:"col-6 mb-8"},V={for:"productUnit",class:"form-label"},D=Object(a["g"])("產品單位"),_={key:0},L={class:"col-6 mb-8"},E=Object(a["h"])("p",{class:"mb-3"},"是否上架產品",-1),N={class:"form-check mt-4"},F={key:0,class:"form-check-label",for:"flexCheckDefault"},S={key:1,class:"form-check-label",for:"flexCheckDefault"},$={class:"col-12 mb-8"},T=Object(a["h"])("label",{for:"productDescription",class:"form-label"},"產品描述",-1),z={class:"col-12 mb-8"},G=Object(a["h"])("label",{for:"productContent",class:"form-label"},"說明內容",-1),q={class:"col-12 mb-8"},J=Object(a["h"])("p",{class:"mb-3"},"主要圖片",-1),R={class:"row row-cols-2 align-items-center"},X={class:"col"},Y=Object(a["h"])("label",{for:"productImage",class:"form-label text-xs"},"圖片位址",-1),B=Object(a["h"])("p",{class:"text-xs mb-2"},"或",-1),H={key:0,class:"btn btn-primary text-sm text-secondary",type:"button",disabled:""},K=Object(a["h"])("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1),Q=Object(a["g"])(" 上傳中... "),W={key:1,class:"btn btn-primary text-sm text-secondary"},Z=Object(a["h"])("span",{class:"material-icons text-base "}," file_upload ",-1),ee=Object(a["g"])(" 上傳圖片 "),te={class:"col"},ce={class:"col-12 mb-8"},ae=Object(a["h"])("p",{class:"mb-3"},"輪播圖片",-1),oe={class:"row row-cols-3 align-items-end"},ne=Object(a["h"])("p",{class:"text-xs  mb-2"},"或",-1),re={key:0,class:"d-block w-100 btn btn-primary text-sm  text-secondary mb-4",type:"button",disabled:""},le=Object(a["h"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),se=Object(a["g"])(" 上傳中... "),ie={key:1,class:"d-block btn btn-primary text-sm text-secondary mb-4"},de=Object(a["h"])("span",{class:"material-icons text-base align-text-bottom"}," file_upload ",-1),ue=Object(a["g"])(" 上傳圖片 ");function be(e,t,c,be,pe,me){var he=this,fe=Object(a["A"])("Field"),Oe=Object(a["A"])("error-message"),je=Object(a["A"])("Form");return Object(a["v"])(),Object(a["d"])(je,{ref:"addForm",class:"text-dark"},{default:Object(a["L"])((function(e){var be=e.errors;return[Object(a["h"])("div",o,[Object(a["h"])("div",n,[Object(a["h"])("label",r,[l,c.isAdd?(Object(a["v"])(),Object(a["d"])("span",s,"必填")):Object(a["e"])("",!0)]),Object(a["h"])(fe,{type:"text",class:["form-control",{"is-backend-invalid":be["產品名稱"]}],id:"productTitle",name:"產品名稱",placeholder:"輸入產品標題",rules:"required",modelValue:pe.tempProduct.title,"onUpdate:modelValue":t[1]||(t[1]=function(e){return pe.tempProduct.title=e}),modelModifiers:{lazy:!0,trim:!0}},null,8,["class","modelValue"]),Object(a["h"])(Oe,{name:"產品名稱",class:"backend-invalid-feedback"})]),Object(a["h"])("div",i,[Object(a["h"])("label",d,[u,c.isAdd?(Object(a["v"])(),Object(a["d"])("span",b,"必填")):Object(a["e"])("",!0)]),Object(a["h"])(fe,{type:"number",class:["form-control",{"is-backend-invalid":be["產品原價"]}],id:"productOriginPrice",name:"產品原價",min:"0",placeholder:"輸入產品原價",rules:me.isPositive,modelValue:pe.tempProduct.origin_price,"onUpdate:modelValue":t[2]||(t[2]=function(e){return pe.tempProduct.origin_price=e}),modelModifiers:{number:!0}},null,8,["rules","class","modelValue"]),Object(a["h"])(Oe,{name:"產品原價",class:"backend-invalid-feedback"})]),Object(a["h"])("div",p,[Object(a["h"])("label",m,[h,c.isAdd?(Object(a["v"])(),Object(a["d"])("span",f,"必填")):Object(a["e"])("",!0)]),Object(a["h"])(fe,{type:"number",class:["form-control",{"is-backend-invalid":be["產品售價"]}],id:"productPrice",min:"0",name:"產品售價",placeholder:"輸入產品售價",rules:me.isPositive,modelValue:pe.tempProduct.price,"onUpdate:modelValue":t[3]||(t[3]=function(e){return pe.tempProduct.price=e}),modelModifiers:{number:!0}},null,8,["rules","class","modelValue"]),Object(a["h"])(Oe,{name:"產品售價",class:"backend-invalid-feedback"})])]),Object(a["h"])("div",O,[Object(a["h"])("div",j,[Object(a["h"])("label",g,[v,c.isAdd?(Object(a["v"])(),Object(a["d"])("span",y,"必填")):Object(a["e"])("",!0)]),Object(a["h"])(fe,{name:"產品分類",class:["form-select",{"is-backend-invalid":be["產品分類"]}],placeholder:"產品分類",rules:"required",as:"select",modelValue:pe.tempProduct.category,"onUpdate:modelValue":t[4]||(t[4]=function(e){return pe.tempProduct.category=e})},{default:Object(a["L"])((function(){return[Object(a["h"])("option",{disabled:c.product.category},"請選擇",8,["disabled"]),(Object(a["v"])(!0),Object(a["d"])(a["a"],null,Object(a["z"])(pe.productsCategory,(function(e){return Object(a["v"])(),Object(a["d"])("option",{value:e,key:e},Object(a["D"])(e),9,["value"])})),128))]})),_:2},1032,["class","modelValue"]),Object(a["h"])(Oe,{name:"產品分類",class:"backend-invalid-feedback"})]),Object(a["h"])("div",x,[pe.isAddCategory?(Object(a["v"])(),Object(a["d"])("div",k,[Object(a["M"])(Object(a["h"])("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return pe.tempCategory=e}),class:"form-control",placeholder:"新增分類"},null,512),[[a["I"],pe.tempCategory,void 0,{trim:!0}]]),Object(a["h"])("div",{class:"btn btn-secondary text-white flex-shrink-0 ms-4",onClick:t[6]||(t[6]=function(){return me.addCategory&&me.addCategory.apply(me,arguments)})}," 新增 ")])):(Object(a["v"])(),Object(a["d"])("div",{key:1,class:"btn btn-secondary text-white",onClick:t[7]||(t[7]=function(e){return he.isAddCategory=!0})}," 新增產品分類 "))])]),Object(a["h"])("div",P,[Object(a["h"])("div",w,[C,(Object(a["v"])(!0),Object(a["d"])(a["a"],null,Object(a["z"])(pe.tempProduct.formats,(function(e,t){return Object(a["v"])(),Object(a["d"])("div",{class:"d-flex align-items-center mb-8",key:t},[Object(a["M"])(Object(a["h"])("input",{type:"text",name:"規格",class:" form-control  me-2",placeholder:"規格","onUpdate:modelValue":function(t){return e.format=t}},null,8,["onUpdate:modelValue"]),[[a["I"],e.format]]),U,Object(a["M"])(Object(a["h"])("input",{type:"text",name:"內容",class:"form-control ms-2",placeholder:"內容","onUpdate:modelValue":function(t){return e.content=t}},null,8,["onUpdate:modelValue"]),[[a["I"],e.content]])])})),128))]),Object(a["h"])("div",A,[Object(a["h"])("div",{class:"btn btn-secondary text-white",onClick:t[8]||(t[8]=function(e){return me.addFormat()})}," 新增產品規格 ")])]),Object(a["h"])("div",I,[Object(a["h"])("div",M,[Object(a["h"])("label",V,[D,c.isAdd?(Object(a["v"])(),Object(a["d"])("span",_,"必填")):Object(a["e"])("",!0)]),Object(a["h"])(fe,{type:"text",class:["form-control",{"is-backend-invalid":be["產品單位"]}],id:"productUnit",name:"產品單位",placeholder:"輸入產品單位",rules:"required",modelValue:pe.tempProduct.unit,"onUpdate:modelValue":t[9]||(t[9]=function(e){return pe.tempProduct.unit=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(a["h"])(Oe,{name:"產品單位",class:"backend-invalid-feedback"})]),Object(a["h"])("div",L,[E,Object(a["h"])("div",N,[Object(a["M"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",name:"check",id:"flexCheckDefault","onUpdate:modelValue":t[10]||(t[10]=function(e){return pe.tempProduct.is_enabled=e}),"true-value":1,"false-value":0},null,512),[[a["G"],pe.tempProduct.is_enabled]]),c.product.is_enabled?(Object(a["v"])(),Object(a["d"])("label",F,"上架")):(Object(a["v"])(),Object(a["d"])("label",S,"未上架"))])]),Object(a["h"])("div",$,[T,Object(a["M"])(Object(a["h"])("textarea",{type:"text",rows:"5",name:"產品描述",class:"form-control",id:"productDescription",placeholder:"輸入產品描述","onUpdate:modelValue":t[11]||(t[11]=function(e){return pe.tempProduct.description=e})},null,512),[[a["I"],pe.tempProduct.description]])]),Object(a["h"])("div",z,[G,Object(a["M"])(Object(a["h"])("textarea",{type:"text",rows:"5",name:"說明內容",class:"form-control",id:"productContent",placeholder:"輸入說明內容","onUpdate:modelValue":t[12]||(t[12]=function(e){return pe.tempProduct.content=e})},null,512),[[a["I"],pe.tempProduct.content]])]),Object(a["h"])("div",q,[J,Object(a["h"])("div",R,[Object(a["h"])("div",X,[Y,Object(a["M"])(Object(a["h"])("input",{type:"text",name:"主要圖片",class:"form-control mb-2",id:"productImage",placeholder:"輸入圖片位址","onUpdate:modelValue":t[13]||(t[13]=function(e){return pe.tempProduct.imageUrl=e})},null,512),[[a["I"],pe.tempProduct.imageUrl]]),B,pe.isUpload?(Object(a["v"])(),Object(a["d"])("button",H,[K,Q])):(Object(a["v"])(),Object(a["d"])("label",W,[Object(a["h"])("input",{style:{display:"none"},type:"file",onChange:t[14]||(t[14]=function(e){return me.uploadImage("main",e)})},null,32),Z,ee]))]),Object(a["h"])("div",te,[Object(a["h"])("img",{class:"w-100 h-auto",src:pe.tempProduct.imageUrl,alt:""},null,8,["src"])])])]),Object(a["h"])("div",ce,[ae,Object(a["h"])("div",oe,[(Object(a["v"])(!0),Object(a["d"])(a["a"],null,Object(a["z"])(pe.tempProduct.imagesUrl,(function(e,t){return Object(a["v"])(),Object(a["d"])("div",{class:"col mb-8",key:t},[Object(a["h"])("img",{class:"w-100 h-auto",src:pe.tempProduct.imagesUrl[t],alt:""},null,8,["src"]),Object(a["h"])("label",{for:"productImage"+t,class:"form-label text-xs"},"圖片位址",8,["for"]),Object(a["M"])(Object(a["h"])("input",{type:"text",name:"輪播圖片",class:"form-control mb-2",id:"productImage"+t,placeholder:"輸入圖片位址","onUpdate:modelValue":function(e){return pe.tempProduct.imagesUrl[t]=e}},null,8,["id","onUpdate:modelValue"]),[[a["I"],pe.tempProduct.imagesUrl[t]]]),ne,pe.isUploads[t]?(Object(a["v"])(),Object(a["d"])("button",re,[le,se])):(Object(a["v"])(),Object(a["d"])("label",ie,[Object(a["h"])("input",{style:{display:"none"},type:"file",onChange:function(e){return me.uploadImage(t,e)}},null,40,["onChange"]),de,ue])),pe.tempProduct.imagesUrl[t]?(Object(a["v"])(),Object(a["d"])("div",{key:2,class:"btn btn-outline-secondary text-xs white-hover",onClick:function(e){return me.deleteImage(t)}}," 刪除圖片 ",8,["onClick"])):(Object(a["v"])(),Object(a["d"])("div",{key:3,class:"btn btn-outline-secondary white-hover text-xs",onClick:function(e){return me.deleteImage(t)}}," 取消 ",8,["onClick"]))])})),128))]),Object(a["h"])("div",{class:"btn btn-secondary text-white text-sm",onClick:t[15]||(t[15]=function(){return me.createImage&&me.createImage.apply(me,arguments)})},"新增輪播圖片")])])]})),_:1},512)}c("99af"),c("159b"),c("caad"),c("2532"),c("a434");var pe={props:{product:{type:Object,default:function(){return{formats:[{format:"",content:""}],imagesUrl:[]}}},isAdd:Boolean},data:function(){return{tempProduct:{},productsAll:[],productsCategory:[],isUpload:!1,isUploads:[],isAddCategory:!1,tempCategory:""}},watch:{product:function(){this.tempProduct=this.product}},methods:{getData:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/products/all")).then((function(t){console.log(t),t.data.success?(e.productsAll=t.data.products,e.productsAll.forEach((function(t){e.productsCategory.includes(t.category)||e.productsCategory.push(t.category)}))):alert(t.data.message)})).catch((function(e){console.log(e)}))},addFormat:function(){var e={format:"",content:""};this.tempProduct.formats.push(e)},addCategory:function(){this.productsCategory.push(this.tempCategory),alert("新增".concat(this.tempCategory,"分類")),this.tempCategory="",this.isAddCategory=!1},uploadImage:function(e,t){var c=this,a=t.target.files[0],o=new FormData;o.append("file-to-upload",a),"main"===e?this.isUpload=!0:this.isUploads[e]=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/upload"),o).then((function(t){console.log(t),t.data.success&&("main"===e?(c.tempProduct.imageUrl=t.data.imageUrl,c.isUpload=!1):(c.tempProduct.imagesUrl[e]=t.data.imageUrl,c.isUploads[e]=!1))}))},createImage:function(){void 0===this.tempProduct.imagesUrl&&(this.tempProduct.imagesUrl=[]),this.isUploads.push(!1),this.tempProduct.imagesUrl.push("")},deleteImage:function(e){this.tempProduct.imagesUrl.splice(e,1),this.isUploads.pop()},isPositive:function(e){return e>0&&e%1===0||"請輸入正整數"},cleanForm:function(){this.$refs.addForm.resetForm(),this.tempProduct.description="",this.tempProduct.content="",this.tempProduct.imageUrl="",this.tempProduct.formats=[{format:"",content:""}],this.tempProduct.imagesUrl=[]}},created:function(){this.isAdd&&(this.tempProduct={formats:[{format:"",content:""}],imagesUrl:[]}),this.getData()}};pe.render=be;t["a"]=pe}}]);
//# sourceMappingURL=chunk-062550df.63dee02e.js.map
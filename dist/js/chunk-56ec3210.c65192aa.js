(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56ec3210"],{"06c5":function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));o("fb6a"),o("d3b7"),o("b0c0"),o("a630"),o("3ca3");var a=o("6b75");function c(e,t){if(e){if("string"===typeof e)return Object(a["a"])(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Object(a["a"])(e,t):void 0}}},"07ac":function(e,t,o){var a=o("23e7"),c=o("6f53").values;a({target:"Object",stat:!0},{values:function(e){return c(e)}})},2909:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var a=o("6b75");function c(e){if(Array.isArray(e))return Object(a["a"])(e)}o("a4d3"),o("e01a"),o("d3b7"),o("d28b"),o("3ca3"),o("ddb0"),o("a630");function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var n=o("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){return c(e)||r(e)||Object(n["a"])(e)||s()}},"4df4":function(e,t,o){"use strict";var a=o("0366"),c=o("7b0b"),r=o("9bdd"),n=o("e95a"),s=o("50c4"),i=o("8418"),l=o("35a1");e.exports=function(e){var t,o,d,u,b,p,f=c(e),m="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,O=void 0!==g,j=l(f),v=0;if(O&&(g=a(g,h>2?arguments[2]:void 0,2)),void 0==j||m==Array&&n(j))for(t=s(f.length),o=new m(t);t>v;v++)p=O?g(f[v],v):f[v],i(o,v,p);else for(u=j.call(f),b=u.next,o=new m;!(d=b.call(u)).done;v++)p=O?r(u,g,[d.value,v],!0):d.value,i(o,v,p);return o.length=v,o}},"4f23":function(e,t,o){"use strict";o.r(t);var a=o("7a23"),c={class:"d-flex align-items-center justify-content-between mb-5 "},r=Object(a["createVNode"])("h2",{class:"text-dark"},"產品列表",-1),n=Object(a["createTextVNode"])("新增產品"),s={class:"bg-white rounded overflow-hidden border border-secondary  "},i={class:"table table-borderless mb-0"},l=Object(a["createVNode"])("thead",{class:"bg-secondary text-white"},[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{class:"w-15"},"產品圖片"),Object(a["createVNode"])("th",{class:""},"產品名稱"),Object(a["createVNode"])("th",null,"分類"),Object(a["createVNode"])("th",null,"原價"),Object(a["createVNode"])("th",null,"售價"),Object(a["createVNode"])("th",null,"是否上架"),Object(a["createVNode"])("th",null,"編輯 / 刪除")])],-1),d={id:"productList"},u={class:"w-15"},b={class:"form-check form-switch"},p={colspan:"8",class:"p-0 border-bottom border-secondary"},f={class:"d-flex justify-content-between align-items-center py-4 px-6 bg-secondary "},m={class:"text-white"};function h(e,t,o,h,g,O){var j=Object(a["resolveComponent"])("Loading"),v=Object(a["resolveComponent"])("router-link"),y=Object(a["resolveComponent"])("ProductCollapse"),N=Object(a["resolveComponent"])("Pagination"),V=Object(a["resolveComponent"])("ProductModal"),k=Object(a["resolveComponent"])("DeleteModal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(j,{isLoading:g.isLoading},null,8,["isLoading"]),Object(a["createVNode"])("div",c,[r,Object(a["createVNode"])(v,{to:"/dashboard/newProduct",class:"btn btn-secondary text-white shadow-none "},{default:Object(a["withCtx"])((function(){return[n]})),_:1})]),Object(a["createVNode"])("div",s,[Object(a["createVNode"])("table",i,[l,Object(a["createVNode"])("tbody",d,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(g.products,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:e.id},[Object(a["createVNode"])("tr",{class:{"table-primary":e.is_enabled}},[Object(a["createVNode"])("td",u,[Object(a["createVNode"])("img",{class:"w-100 small-size",src:e.imageUrl},null,8,["src"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.category),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.origin_price),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.price),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",b,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"enabled"+t,"onUpdate:modelValue":function(t){return e.is_enabled=t},"true-value":1,"false-value":0,onChange:function(t){return O.changeStatus(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["vModelCheckbox"],e.is_enabled]]),e.is_enabled?(Object(a["openBlock"])(),Object(a["createBlock"])("label",{key:0,class:"form-check-label",for:"enabled"+t},"上架",8,["for"])):(Object(a["openBlock"])(),Object(a["createBlock"])("label",{key:1,class:"form-check-label",for:"enabled"+t},"未上架",8,["for"]))])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-secondary text-white",onClick:function(t){return O.openModal("edit",e)}}," 編輯 ",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary white-hover ms-2",onClick:function(t){return O.openModal("delete",e)}}," 刪除 ",8,["onClick"]),Object(a["createVNode"])("button",{class:"btn btn-outline-secondary white-hover float-end p-0 lh-1 mt-2 me-4",onClick:function(e){return O.openCollapse(t)}},[Object(a["createVNode"])("span",{class:["material-icons text-lg align-bottom",{"arrow-rotate":t==g.isOpen.id&&g.isOpen.open}]}," arrow_drop_down ",2)],8,["onClick"])])],2),Object(a["createVNode"])("tr",{class:{"table-primary":e.is_enabled}},[Object(a["createVNode"])("td",p,[Object(a["createVNode"])(y,{ref:"ProductCollapse",product:e,num:t},null,8,["product","num"])])],2)],64)})),128))])]),Object(a["createVNode"])("div",f,[Object(a["createVNode"])("p",m,"目前有 "+Object(a["toDisplayString"])(g.totalAmount)+" 樣產品",1),Object(a["createVNode"])(N,{pagination:g.pagination,onEmitPage:O.getData},null,8,["pagination","onEmitPage"])])]),Object(a["createVNode"])(V,{product:g.tempProduct,ref:"updateModal",onUpdate:O.updateProduct},null,8,["product","onUpdate"]),Object(a["createVNode"])(k,{item:g.tempProduct,type:"normal",ref:"delModal",onDelete:O.deleteProduct},null,8,["item","onDelete"])],64)}var g=o("2909"),O=o("5530"),j=(o("99af"),o("07ac"),o("159b"),o("caad"),o("2532"),o("1799")),v=(o("a4d3"),o("e01a"),{class:"d-flex mb-5"}),y=Object(a["createVNode"])("div",{class:"me-2 flex-shrink-0"},"產品單位 :",-1),N={class:""},V={class:"d-flex mb-5"},k=Object(a["createVNode"])("div",{class:"me-2 flex-shrink-0"},"產品規格 :",-1),x={class:""},w={class:"d-flex mb-5"},C=Object(a["createVNode"])("div",{class:"me-2 flex-shrink-0"},"產品描述 :",-1),A={class:""},P={class:"d-flex mb-5"},M=Object(a["createVNode"])("div",{class:"me-2 flex-shrink-0"},"說明內容 :",-1),S={class:""},L={class:"d-flex mb-5"},B=Object(a["createVNode"])("div",{class:"me-2 flex-shrink-0"},"輪播圖片 :",-1),I={class:""},D={class:"d-flex flex-wrap"};function E(e,t,o,c,r,n){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"collapse text-sm p-8",id:"collapseExample".concat(o.num),ref:"collapse"},[Object(a["createVNode"])("div",v,[y,Object(a["createVNode"])("div",N,Object(a["toDisplayString"])(o.product.unit),1)]),Object(a["createVNode"])("div",V,[k,Object(a["createVNode"])("div",x,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.product.formats,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("p",{key:t,class:"mb-3"},Object(a["toDisplayString"])(e.format)+" : "+Object(a["toDisplayString"])(e.content),1)})),128))])]),Object(a["createVNode"])("div",w,[C,Object(a["createVNode"])("div",A,Object(a["toDisplayString"])(o.product.description),1)]),Object(a["createVNode"])("div",P,[M,Object(a["createVNode"])("div",S,Object(a["toDisplayString"])(o.product.content),1)]),Object(a["createVNode"])("div",L,[B,Object(a["createVNode"])("div",I,[Object(a["createVNode"])("div",D,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.product.imagesUrl,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("img",{class:"w-15 small-size me-3",src:e,key:"img"+t},null,8,["src"])})),128))])])])],8,["id"])}o("a9e3"),o("fb6a"),o("d81d");var _=o("7b17"),F={props:{product:Object,num:Number},data:function(){return{collapse:[]}},methods:{showCollapse:function(e){var t=[].slice.call(document.querySelectorAll(".collapse"));this.collapse=t.map((function(t,o){return o===e?new _["a"](t,{toggle:!1}).toggle():new _["a"](t,{toggle:!1}).hide()}))}}};F.render=E;var $=F,U=o("e7c6"),T={class:"modal fade",id:"updateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},J={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"},R={class:"modal-content"},G=Object(a["createVNode"])("div",{class:"modal-header bg-secondary text-white py-4"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},"編輯產品"),Object(a["createVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),z={class:"modal-body"},X={class:"modal-footer"},Y=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary white-hover","data-bs-dismiss":"modal"}," 取消 ",-1);function q(e,t,o,c,r,n){var s=Object(a["resolveComponent"])("ProductForm");return Object(a["openBlock"])(),Object(a["createBlock"])("div",T,[Object(a["createVNode"])("div",J,[Object(a["createVNode"])("div",R,[G,Object(a["createVNode"])("div",z,[Object(a["createVNode"])(s,{product:o.product,isAdd:!1,ref:"productForm"},null,8,["product"])]),Object(a["createVNode"])("div",X,[Y,Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary text-white",onClick:t[1]||(t[1]=function(){return n.update&&n.update.apply(n,arguments)})}," 確認編輯 ")])])])],512)}var H=o("e0ae"),K=o("da51"),Q={props:{product:{type:Object}},components:{ProductForm:K["a"]},mixins:[H["a"]],methods:{update:function(){var e=this,t=this.$refs.productForm;t.$refs.addForm.validate().then((function(t){console.log(t),t.valid?e.$emit("update",e.product):console.log("error")}))}}};Q.render=q;var W=Q,Z={data:function(){return{isLoading:!1,products:[],pagination:{},totalAmount:0,productsCategory:[],tempProduct:{},isOpen:{id:null,open:!1}}},inject:["emitter"],components:{Pagination:j["a"],ProductCollapse:$,DeleteModal:U["a"],ProductModal:W},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/products?page=").concat(t)).then((function(t){console.log(t),t.data.success?(e.products=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1):(console.log(t.data.messages),e.isLoading=!1)})).catch((function(e){console.log(e)})),this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/products/all")).then((function(t){if(t.data.success){var o=Object.values(t.data.products);e.totalAmount=o.length,o.forEach((function(t){e.productsCategory.includes(t.category)||e.productsCategory.push(t.category)}))}})).catch((function(e){console.log(e)}))},openCollapse:function(e){this.isOpen.id===e?this.isOpen.open=!this.isOpen.open:(this.isOpen.id=e,this.isOpen.open=!0),this.$refs.ProductCollapse.showCollapse(e)},openModal:function(e,t){"edit"===e?(this.tempProduct=Object(O["a"])(Object(O["a"])({},t),{},{formats:void 0===t.formats?[{format:"",content:""}]:JSON.parse(JSON.stringify(t.formats)),imagesUrl:void 0===t.imagesUrl?[]:Object(g["a"])(t.imagesUrl)}),this.$refs.updateModal.openModal()):"delete"===e&&(this.tempProduct=Object(O["a"])({},t),this.$refs.delModal.openModal())},updateProduct:function(e){var t=this;this.isLoading=!0;var o={data:e};this.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(e.id),o).then((function(e){console.log(e),e.data.success?(t.emitter.emit("push-message",{type:"success",message:e.data.message}),t.$refs.updateModal.hideModal(),t.getData(t.pagination.current_page),t.isLoading=!1):(t.emitter.emit("push-message",{type:"error",message:e.data.message}),t.isLoading=!1)})).catch((function(e){console.log(e)}))},changeStatus:function(e){this.tempProduct=Object(O["a"])({},e),this.updateProduct(this.tempProduct)},deleteProduct:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(this.tempProduct.id)).then((function(t){console.log(t),t.data.success?(e.emitter.emit("push-message",{type:"success",message:t.data.message}),e.$refs.delModal.hideModal(),e.getData(e.pagination.current_page),e.isLoading=!1):(e.emitter.emit("push-message",{type:"error",message:t.data.message}),e.isLoading=!1)})).catch((function(e){console.log(e)}))}},mounted:function(){this.getData()}};Z.render=h;t["default"]=Z},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,o){var a=o("1d80"),c=o("5899"),r="["+c+"]",n=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),i=function(e){return function(t){var o=String(a(t));return 1&e&&(o=o.replace(n,"")),2&e&&(o=o.replace(s,"")),o}};e.exports={start:i(1),end:i(2),trim:i(3)}},"6b75":function(e,t,o){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}o.d(t,"a",(function(){return a}))},"6f53":function(e,t,o){var a=o("83ab"),c=o("df75"),r=o("fc6a"),n=o("d1e7").f,s=function(e){return function(t){var o,s=r(t),i=c(s),l=i.length,d=0,u=[];while(l>d)o=i[d++],a&&!n.call(s,o)||u.push(e?[o,s[o]]:s[o]);return u}};e.exports={entries:s(!0),values:s(!1)}},7156:function(e,t,o){var a=o("861d"),c=o("d2bb");e.exports=function(e,t,o){var r,n;return c&&"function"==typeof(r=t.constructor)&&r!==o&&a(n=r.prototype)&&n!==o.prototype&&c(e,n),e}},"9bdd":function(e,t,o){var a=o("825a"),c=o("2a62");e.exports=function(e,t,o,r){try{return r?t(a(o)[0],o[1]):t(o)}catch(n){throw c(e),n}}},a630:function(e,t,o){var a=o("23e7"),c=o("4df4"),r=o("1c7e"),n=!r((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:n},{from:c})},a9e3:function(e,t,o){"use strict";var a=o("83ab"),c=o("da84"),r=o("94ca"),n=o("6eeb"),s=o("5135"),i=o("c6b6"),l=o("7156"),d=o("c04e"),u=o("d039"),b=o("7c73"),p=o("241c").f,f=o("06cf").f,m=o("9bf2").f,h=o("58a8").trim,g="Number",O=c[g],j=O.prototype,v=i(b(j))==g,y=function(e){var t,o,a,c,r,n,s,i,l=d(e,!1);if("string"==typeof l&&l.length>2)if(l=h(l),t=l.charCodeAt(0),43===t||45===t){if(o=l.charCodeAt(2),88===o||120===o)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,c=49;break;case 79:case 111:a=8,c=55;break;default:return+l}for(r=l.slice(2),n=r.length,s=0;s<n;s++)if(i=r.charCodeAt(s),i<48||i>c)return NaN;return parseInt(r,a)}return+l};if(r(g,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var N,V=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof V&&(v?u((function(){j.valueOf.call(o)})):i(o)!=g)?l(new O(y(t)),o,V):y(t)},k=a?p(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;k.length>x;x++)s(O,N=k[x])&&!s(V,N)&&m(V,N,f(O,N));V.prototype=j,j.constructor=V,n(c,g,V)}},d28b:function(e,t,o){var a=o("746f");a("iterator")},d81d:function(e,t,o){"use strict";var a=o("23e7"),c=o("b727").map,r=o("1dde"),n=r("map");a({target:"Array",proto:!0,forced:!n},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(e,t,o){"use strict";var a=o("23e7"),c=o("861d"),r=o("e8b5"),n=o("23cb"),s=o("50c4"),i=o("fc6a"),l=o("8418"),d=o("b622"),u=o("1dde"),b=u("slice"),p=d("species"),f=[].slice,m=Math.max;a({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var o,a,d,u=i(this),b=s(u.length),h=n(e,b),g=n(void 0===t?b:t,b);if(r(u)&&(o=u.constructor,"function"!=typeof o||o!==Array&&!r(o.prototype)?c(o)&&(o=o[p],null===o&&(o=void 0)):o=void 0,o===Array||void 0===o))return f.call(u,h,g);for(a=new(void 0===o?Array:o)(m(g-h,0)),d=0;h<g;h++,d++)h in u&&l(a,d,u[h]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-56ec3210.c65192aa.js.map
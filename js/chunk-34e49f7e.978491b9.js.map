{"version":3,"sources":["webpack:///./src/views/Favorite.vue","webpack:///./src/views/Favorite.vue?88ec","webpack:///./src/components/Modal/FrontDelModal.vue","webpack:///./src/components/Modal/FrontDelModal.vue?cdde"],"names":["class","type","role","isLoading","to","myFavorite","length","favoriteProduct","item","key","id","src","imageUrl","alt","title","toCurrency","price","origin_price","addCart","addloading","openModal","href","ref","deleteFavorite","data","updateLoading","tempID","mixins","localStorage","inject","components","FrontDelModal","methods","getFavorite","this","getLocalStorage","forEach","url","$http","get","then","res","success","push","product","catch","emitter","emit","message","$refs","delModal","product_id","qty","post","splice","indexOf","saveLocalStorage","hideModal","mounted","render","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","$emit","emits","modalMixin"],"mappings":"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","file":"js/chunk-34e49f7e.978491b9.js","sourcesContent":["<template>\n  <Loading :isLoading=\"isLoading\" />\n  <div class=\"container pt-15 border-bottom border-light pb-15 mb-15\">\n    <ol class=\"breadcrumb mb-5\">\n      <li class=\"breadcrumb-item\"><router-link :to=\"`/`\">首頁</router-link></li>\n      <li class=\"breadcrumb-item active\">收藏清單</li>\n    </ol>\n    <h3\n      class=\"d-flex rounded-top align-items-center\n      bg-title text-xl p-4\"\n    >\n      <span class=\"material-icons me-3\"> favorite </span>收藏清單\n    </h3>\n    <div\n      v-if=\"myFavorite.length <= 0\"\n      class=\"p-4 border border-white border-bottom-0 bg-table text-dark\"\n    >\n      <p class=\"text-center text-xl mb-6\">目前沒有收藏商品，快去逛逛商店吧～</p>\n      <div class=\"d-block w-25 mx-auto btn btn-secondary text-white secondary-hover mb-5\">\n        <router-link class=\"white-hover\" :to=\"`/shop`\"> 前往商店</router-link>\n      </div>\n    </div>\n    <table v-else>\n      <tr\n        class=\"d-none d-md-flex row g-0 p-4 border border-white\n        border-bottom-0 bg-table text-dark\"\n      >\n        <td class=\"col-6\">商品資料</td>\n        <td class=\"col-2\">價格</td>\n        <td class=\"col-3\">購買狀態</td>\n        <td class=\"col-1\">刪除</td>\n      </tr>\n      <tr\n        v-for=\"item in favoriteProduct\"\n        :key=\"item.id\"\n        class=\"row g-0 p-4 border border-white align-items-center\n          bg-table text-dark border-bottom-0\">\n        <td class=\"col-11 col-md-6 mb-5 mb-md-0\">\n          <router-link :to=\"`/product/${item.id}`\">\n            <div class=\"d-flex align-items-center\">\n              <img class=\"w-40 me-4\" :src=\"item.imageUrl\" :alt=\"item.title\" />\n              <h3 class=\"text-base text-dark\">{{ item.title }}</h3>\n            </div>\n          </router-link>\n        </td>\n        <td class=\"col-6 col-md-2 order-4 order-md-0\">\n          <div class=\"d-flex d-md-block align-items-end\">\n            <p class=\"me-3 me-md-0\">NT${{ toCurrency(item.price) }}</p>\n            <p\n              v-if=\"item.price !== item.origin_price\"\n              class=\"text-dark opacity-5 text-sm text-decoration-line-through\">\n              NT${{ toCurrency(item.origin_price) }}\n            </p>\n          </div>\n        </td>\n        <td class=\"col-6 col-md-3 order-4 order-md-0 \">\n          <div class=\"position-relative\">\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary secondary-hover text-white w-100 w-md-75\"\n              @click=\"addCart(item.id)\">\n              加入購物車\n            </button>\n            <button\n              v-if=\"addloading\"\n              type=\"button\"\n              class=\" btn d-flex justify-content-center\n                align-items-center position-absolute no-allow w-100\n                w-md-75 h-100 top-0 start-0 bg-light\">\n              <div class=\"spinner-border spinner-border-sm\" role=\"status\">\n                <span class=\"visually-hidden\">Loading...</span>\n              </div>\n            </button>\n          </div>\n        </td>\n        <td class=\"col-1 order-2 order-md-0\">\n          <a @click.prevent=\"openModal(item.id)\" href=\"#\" class=\"text-dark scale-hover\">\n            <span class=\"material-icons\"> delete_forever </span>\n          </a>\n        </td>\n      </tr>\n      <tr class=\"d-flex justify-content-end rounded-bottom bg-table border border-white p-6\">\n        <td>\n          <router-link :to=\"`/shop`\" class=\"btn btn-dark btn-hover px-7\">\n            <span>前往商店</span>\n          </router-link>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <FrontDelModal ref=\"delModal\" @delete=\"deleteFavorite\" />\n</template>\n\n<script>\nimport FrontDelModal from '@/components/Modal/FrontDelModal.vue';\nimport localStorage from '@/mixins/localStorage';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      updateLoading: false,\n      myFavorite: [],\n      favoriteProduct: [],\n      addloading: false,\n      tempID: '',\n    };\n  },\n  mixins: [localStorage],\n  inject: ['emitter'],\n  components: {\n    FrontDelModal,\n  },\n  methods: {\n    getFavorite() {\n      this.myFavorite = this.getLocalStorage() || [];\n      this.favoriteProduct = [];\n      this.isLoading = true;\n      if (this.myFavorite.length > 0) {\n        this.myFavorite.forEach((item) => {\n          const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${item}`;\n          this.$http\n            .get(url)\n            .then((res) => {\n              if (res.data.success) {\n                this.favoriteProduct.push(res.data.product);\n                this.isLoading = false;\n              } else {\n                this.isLoading = false;\n              }\n            })\n            .catch(() => {\n              this.emitter.emit('push-message', {\n                type: 'error',\n                message: '發生錯誤，請重新整理頁面',\n              });\n            });\n        });\n      } else {\n        this.isLoading = false;\n      }\n    },\n    openModal(id) {\n      this.tempID = id;\n      this.$refs.delModal.openModal();\n    },\n    addCart(id) {\n      this.addloading = true;\n      const data = {\n        data: { product_id: id, qty: 1 },\n      };\n      this.$http\n        .post(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`, data)\n        .then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('push-message', {\n              type: 'success',\n              message: res.data.message,\n            });\n            this.emitter.emit('update-cart');\n            this.addloading = false;\n          } else {\n            this.emitter.emit('push-message', {\n              type: 'error',\n              message: res.data.message,\n            });\n            this.addloading = false;\n          }\n        })\n        .catch(() => {\n          this.emitter.emit('push-message', {\n            type: 'error',\n            message: '發生錯誤，請重新整理頁面',\n          });\n        });\n    },\n    deleteFavorite() {\n      this.myFavorite.splice(this.myFavorite.indexOf(this.tempID), 1);\n      this.saveLocalStorage(this.myFavorite);\n      this.emitter.emit('update-favorite');\n      this.$refs.delModal.hideModal();\n      this.emitter.emit('push-message', {\n        type: 'success',\n        message: '商品已移除收藏清單',\n      });\n      this.getFavorite();\n    },\n  },\n  mounted() {\n    this.getFavorite();\n  },\n};\n</script>\n","import { render } from \"./Favorite.vue?vue&type=template&id=6c29dd2e\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div\n    class=\"modal fade\"\n    id=\"deleteModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header text-dark py-4 border-0\">\n          <button\n            type=\"button\"\n            class=\"btn-close \"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <p class=\"text-dark text-center\">\n           確定要移除商品嗎？\n          </p>\n          <p class=\"text-sm text-info text-center\">(刪除後將無法恢復)</p>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-warning\" data-bs-dismiss=\"modal\">\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-warning text-white\" @click=\"$emit('delete')\">\n            確認刪除\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  emits: ['delete'],\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./FrontDelModal.vue?vue&type=template&id=5d70d58f\"\nimport script from \"./FrontDelModal.vue?vue&type=script&lang=js\"\nexport * from \"./FrontDelModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/views/backend/Login.vue","webpack:///./src/views/backend/Login.vue?437a"],"names":["class","for","type","id","isLoading","ref","login","errors","name","placeholder","rules","user","username","autocomplete","password","data","provide","emitter","components","Noty","methods","this","$http","post","then","res","success","token","expired","document","cookie","Date","$refs","form","resetForm","$router","push","emit","message","error","catch","render"],"mappings":"4IAGKA,MAAM,+C,EACT,yBAA4C,OAAvCA,MAAM,4BAA0B,S,GAChCA,MAAM,6E,GACJA,MAAM,2C,EACT,yBAA+C,MAA3CA,MAAM,+BAA8B,MAAE,G,GAEnCA,MAAM,+C,EAWT,yBAAgC,SAAzBC,IAAI,WAAU,OAAG,G,GAGrBD,MAAM,+C,EAYT,yBAAkC,SAA3BC,IAAI,YAAW,QAAI,G,EAG5B,yBAKS,UAJPC,KAAK,SACLF,MAAM,iEACNG,GAAG,SAAQ,QAEb,G,6TA1CR,yBAAkC,GAAxBC,UAAW,EAAAA,WAAS,sBAC9B,yBAAQ,GACR,yBA4CM,MA5CN,EA4CM,CA3CJ,EACA,yBAyCM,MAzCN,EAyCM,CAxCJ,yBAuCM,MAvCN,EAuCM,CAtCJ,EACA,yBAoCO,GApCmBC,IAAI,OAAQ,SAAQ,EAAAC,O,+BAC5C,gBADcC,EACd,EADcA,OACd,MADoB,CACpB,yBAaM,MAbN,EAaM,CAZJ,yBASS,GARPJ,GAAG,UACHK,KAAK,QACLN,KAAK,QACLF,MAAK,CAAC,eAAc,cACIO,EAAO,WAC/BE,YAAY,mBACZC,MAAM,iB,WACG,EAAAC,KAAKC,S,qDAAL,EAAAD,KAAKC,SAAQ,K,+BAExB,EACA,yBAAsD,GAAxCJ,KAAK,QAAQR,MAAM,uBAEnC,yBAcM,MAdN,EAcM,CAbJ,yBAUS,GATPG,GAAG,WACHK,KAAK,KACLN,KAAK,WACLF,MAAK,CAAC,eAAc,cACIO,EAAO,QAC/BE,YAAY,QACZC,MAAM,WACNG,aAAA,G,WACS,EAAAF,KAAKG,S,qDAAL,EAAAH,KAAKG,SAAQ,K,+BAExB,EACA,yBAAmD,GAArCN,KAAK,KAAKR,MAAM,uBAEhC,M,sEAgBO,GACbe,KADa,WAEX,MAAO,CACLJ,KAAM,CACJC,SAAU,GACVE,SAAU,IAEZV,WAAW,IAGfY,QAVa,WAWX,MAAO,CACLC,QAAA,SAGJC,WAAY,CACVC,OAAA,MAEFC,QAAS,CACPd,MADO,WACC,WACNe,KAAKjB,WAAY,EACjBiB,KAAKC,MACFC,KADH,UACW,wCADX,gBACkDF,KAAKV,MACpDa,MAAK,SAACC,GACL,GAAIA,EAAIV,KAAKW,QAAS,CACpB,MAA2BD,EAAIV,KAAvBY,EAAR,EAAQA,MAAOC,EAAf,EAAeA,QACfC,SAASC,OAAT,sBAAiCH,EAAjC,qBAAmD,IAAII,KAAKH,IAC5D,EAAKI,MAAMC,KAAKC,YAChB,EAAKC,QAAQC,KAAK,cAClB,OAAQC,KAAK,eAAgB,CAC3BnC,KAAM,UACNoC,QAAS,eAGX,EAAKlC,WAAY,EACjB,OAAQiC,KAAK,eAAgB,CAC3BnC,KAAM,QACNoC,QAAS,UAAF,OAAYb,EAAIV,KAAKwB,MAAMD,cAIvCE,OAAM,WACL,EAAKvB,QAAQoB,KAAK,eAAgB,CAChCnC,KAAM,QACNoC,QAAS,uBC/FrB,EAAOG,OAASA,EAED","file":"js/chunk-2d0b382f.200d3e46.js","sourcesContent":["<template>\n<Loading :isLoading=\"isLoading\" />\n<Noty />\n<div class=\"position-relative bg-login w-100 min-vh-100\">\n  <div class=\"bg-overlay opacity-5 z-0\"></div>\n  <div class=\"position-relative d-flex justify-content-center align-items-center vh-100\">\n    <div class=\"w-40 bg-login-form rounded-3 px-12 py-8\">\n      <h2 class=\"text-white text-center mb-6\">登入</h2>\n      <Form v-slot=\"{ errors }\" ref=\"form\" @submit=\"login\">\n        <div class=\"form-floating form-downline form-login mb-6\">\n          <Field\n            id=\"account\"\n            name=\"email\"\n            type=\"email\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            placeholder=\"name@example.com\"\n            rules=\"email|required\"\n            v-model=\"user.username\"\n          ></Field>\n          <label for=\"account\">帳號：</label>\n          <ErrorMessage name=\"email\" class=\"invalid-feedback\" />\n        </div>\n        <div class=\"form-floating form-downline form-login mb-6\">\n          <Field\n            id=\"password\"\n            name=\"密碼\"\n            type=\"password\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['密碼'] }\"\n            placeholder=\"請輸入姓名\"\n            rules=\"required\"\n            autocomplete\n            v-model=\"user.password\"\n          ></Field>\n          <label for=\"password\"> 密碼：</label>\n          <ErrorMessage name=\"密碼\" class=\"invalid-feedback\" />\n        </div>\n        <button\n          type=\"submit\"\n          class=\"btn btn-lg text-white btn-secondary secondary-hover w-100 mt-3\"\n          id=\"login\">\n          登入\n        </button>\n      </Form>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Noty from '@/components/Noty.vue';\nimport emitter from '@/methods/eventBus';\n\nexport default {\n  data() {\n    return {\n      user: {\n        username: '',\n        password: '',\n      },\n      isLoading: false,\n    };\n  },\n  provide() {\n    return {\n      emitter,\n    };\n  },\n  components: {\n    Noty,\n  },\n  methods: {\n    login() {\n      this.isLoading = true;\n      this.$http\n        .post(`${process.env.VUE_APP_API}admin/signin`, this.user)\n        .then((res) => {\n          if (res.data.success) {\n            const { token, expired } = res.data;\n            document.cookie = `chiayuToken=${token}; expires=${new Date(expired)}`;\n            this.$refs.form.resetForm();\n            this.$router.push('/dashboard');\n            emitter.emit('push-message', {\n              type: 'success',\n              message: '登入成功 ',\n            });\n          } else {\n            this.isLoading = false;\n            emitter.emit('push-message', {\n              type: 'error',\n              message: `登入失敗 : ${res.data.error.message}`,\n            });\n          }\n        })\n        .catch(() => {\n          this.emitter.emit('push-message', {\n            type: 'error',\n            message: '發生錯誤，請重新整理頁面',\n          });\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./Login.vue?vue&type=template&id=a1ae757c\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
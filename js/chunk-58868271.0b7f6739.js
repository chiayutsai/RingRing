(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58868271"],{"07ac":function(e,t,c){var o=c("23e7"),a=c("6f53").values;o({target:"Object",stat:!0},{values:function(e){return a(e)}})},2909:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));var o=c("6b75");function a(e){if(Array.isArray(e))return Object(o["a"])(e)}c("a4d3"),c("e01a"),c("d3b7"),c("d28b"),c("3ca3"),c("ddb0"),c("a630");function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var n=c("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return a(e)||r(e)||Object(n["a"])(e)||l()}},"4f23":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),a={class:"d-flex align-items-center justify-content-between mb-5"},r=Object(o["createVNode"])("h2",{class:"text-dark"},"產品列表",-1),n=Object(o["createTextVNode"])(" 新增產品 "),l={class:"bg-white rounded overflow-hidden border border-secondary"},s={class:"table table-borderless mb-0"},d=Object(o["createVNode"])("thead",{class:"bg-secondary text-white"},[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{class:"w-15"},"產品圖片"),Object(o["createVNode"])("th",null,"產品名稱"),Object(o["createVNode"])("th",null,"分類"),Object(o["createVNode"])("th",null,"原價"),Object(o["createVNode"])("th",null,"售價"),Object(o["createVNode"])("th",null,"是否上架"),Object(o["createVNode"])("th",null,"編輯 / 刪除")])],-1),i={id:"productList"},u={class:"w-15"},b={class:"form-check form-switch"},p={colspan:"8",class:"p-0 border-bottom border-secondary"},m={class:"d-flex justify-content-between align-items-center py-4 px-6 bg-secondary"},O={class:"text-white"};function j(e,t,c,j,f,h){var g=Object(o["resolveComponent"])("Loading"),V=Object(o["resolveComponent"])("router-link"),N=Object(o["resolveComponent"])("ProductCollapse"),v=Object(o["resolveComponent"])("Pagination"),y=Object(o["resolveComponent"])("ProductModal"),k=Object(o["resolveComponent"])("DeleteModal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(g,{isLoading:f.isLoading},null,8,["isLoading"]),Object(o["createVNode"])("div",a,[r,Object(o["createVNode"])(V,{to:"/dashboard/newProduct",class:"btn btn-secondary text-white shadow-none"},{default:Object(o["withCtx"])((function(){return[n]})),_:1})]),Object(o["createVNode"])("div",l,[Object(o["createVNode"])("table",s,[d,Object(o["createVNode"])("tbody",i,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(f.products,(function(t,c){return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:t.id},[Object(o["createVNode"])("tr",{class:{"table-primary":t.is_enabled}},[Object(o["createVNode"])("td",u,[Object(o["createVNode"])("img",{class:"w-100 small-size",src:t.imageUrl,alt:t.title},null,8,["src","alt"])]),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.title),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.category),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.toCurrency(t.origin_price)),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.toCurrency(t.price)),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",b,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"enabled".concat(c),"onUpdate:modelValue":function(e){return t.is_enabled=e},"true-value":1,"false-value":0,onChange:function(e){return h.changeStatus(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[o["vModelCheckbox"],t.is_enabled]]),t.is_enabled?(Object(o["openBlock"])(),Object(o["createBlock"])("label",{key:0,class:"form-check-label",for:"enabled"+c}," 上架 ",8,["for"])):(Object(o["openBlock"])(),Object(o["createBlock"])("label",{key:1,class:"form-check-label",for:"enabled"+c},"未上架",8,["for"]))])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-sm btn-secondary text-white",onClick:function(e){return h.openModal("edit",t)}}," 編輯 ",8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary white-hover ms-2",onClick:function(e){return h.openModal("delete",t)}}," 刪除 ",8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary white-hover float-end p-0 lh-1 mt-2 me-4",onClick:function(e){return h.openCollapse(c)}},[Object(o["createVNode"])("span",{class:["material-icons text-lg align-bottom",{"arrow-rotate":c==f.isOpen.id&&f.isOpen.open}]}," arrow_drop_down ",2)],8,["onClick"])])],2),Object(o["createVNode"])("tr",{class:{"table-primary":t.is_enabled}},[Object(o["createVNode"])("td",p,[Object(o["createVNode"])(N,{ref:"ProductCollapse",product:t,num:c},null,8,["product","num"])])],2)],64)})),128))])]),Object(o["createVNode"])("div",m,[Object(o["createVNode"])("p",O,"目前有 "+Object(o["toDisplayString"])(f.totalAmount)+" 樣產品",1),Object(o["createVNode"])(v,{pagination:f.pagination,onEmitPage:h.getData},null,8,["pagination","onEmitPage"])])]),Object(o["createVNode"])(y,{product:f.tempProduct,ref:"updateModal",onUpdate:h.updateProduct},null,8,["product","onUpdate"]),Object(o["createVNode"])(k,{item:f.tempProduct,type:"normal",ref:"delModal",onDelete:h.deleteProduct},null,8,["item","onDelete"])],64)}var f=c("2909"),h=c("5530"),g=(c("99af"),c("07ac"),c("159b"),c("caad"),c("2532"),c("1799")),V=(c("a4d3"),c("e01a"),{class:"d-flex mb-5"}),N=Object(o["createVNode"])("div",{class:"me-2 flex-shrink-0"},"產品單位 :",-1),v={class:"d-flex mb-5"},y=Object(o["createVNode"])("div",{class:"me-2 flex-shrink-0"},"系列產品 :",-1),k={class:"d-flex mb-5"},x=Object(o["createVNode"])("div",{class:"me-2 flex-shrink-0"},"產品規格 :",-1),C={class:"d-flex mb-5"},w=Object(o["createVNode"])("div",{class:"me-2 flex-shrink-0"},"產品描述 :",-1),P={class:"d-flex mb-5"},B=Object(o["createVNode"])("div",{class:"me-2 flex-shrink-0"},"說明內容 :",-1),U={class:"d-flex mb-5"},D=Object(o["createVNode"])("div",{class:"me-2 flex-shrink-0"},"輪播圖片 :",-1),M={class:"d-flex flex-wrap"};function A(e,t,c,a,r,n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"collapse text-sm p-8",id:"collapseExample".concat(c.num),ref:"collapse"},[Object(o["createVNode"])("div",V,[N,Object(o["createVNode"])("div",null,Object(o["toDisplayString"])(c.product.unit),1)]),Object(o["createVNode"])("div",v,[y,Object(o["createVNode"])("div",null,Object(o["toDisplayString"])(c.product.series),1)]),Object(o["createVNode"])("div",k,[x,Object(o["createVNode"])("div",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.product.formats,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("p",{key:t,class:"mb-3"},Object(o["toDisplayString"])(e.format)+" : "+Object(o["toDisplayString"])(e.content),1)})),128))])]),Object(o["createVNode"])("div",C,[w,Object(o["createVNode"])("div",null,Object(o["toDisplayString"])(c.product.description),1)]),Object(o["createVNode"])("div",P,[B,Object(o["createVNode"])("div",null,Object(o["toDisplayString"])(c.product.content),1)]),Object(o["createVNode"])("div",U,[D,Object(o["createVNode"])("div",null,[Object(o["createVNode"])("div",M,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.product.imagesUrl,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("img",{class:"w-15 small-size me-3",src:e,key:"img"+t,alt:c.product.title},null,8,["src","alt"])})),128))])])])],8,["id"])}c("a9e3"),c("fb6a"),c("d81d");var I=c("7b17"),F={props:{product:Object,num:Number},data:function(){return{collapse:[]}},methods:{showCollapse:function(e){var t=[].slice.call(document.querySelectorAll(".collapse"));this.collapse=t.map((function(t,c){return c===e?new I["a"](t,{toggle:!1}).toggle():new I["a"](t,{toggle:!1}).hide()}))}}};F.render=A;var S=F,_=c("e7c6"),T={class:"modal fade",id:"updateModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},L={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"},E={class:"modal-content"},$=Object(o["createVNode"])("div",{class:"modal-header bg-secondary text-white py-4"},[Object(o["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},"編輯產品"),Object(o["createVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),q={class:"modal-body"},J={class:"modal-footer"},R=Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary white-hover","data-bs-dismiss":"modal"}," 取消 ",-1);function z(e,t,c,a,r,n){var l=Object(o["resolveComponent"])("ProductForm");return Object(o["openBlock"])(),Object(o["createBlock"])("div",T,[Object(o["createVNode"])("div",L,[Object(o["createVNode"])("div",E,[$,Object(o["createVNode"])("div",q,[Object(o["createVNode"])(l,{product:c.product,isAdd:!1,ref:"productForm"},null,8,["product"])]),Object(o["createVNode"])("div",J,[R,Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary text-white",onClick:t[1]||(t[1]=function(){return n.update&&n.update.apply(n,arguments)})}," 確認編輯 ")])])])],512)}var G=c("e0ae"),X=c("da51"),Y={props:{product:{type:Object}},emits:["update"],components:{ProductForm:X["a"]},mixins:[G["a"]],methods:{update:function(){var e=this,t=this.$refs.productForm;t.$refs.addForm.validate().then((function(t){t.valid&&e.$emit("update",e.product)}))}}};Y.render=z;var H=Y,K={data:function(){return{isLoading:!1,products:[],pagination:{},totalAmount:0,productsCategory:[],tempProduct:{},isOpen:{id:null,open:!1}}},inject:["emitter"],components:{Pagination:g["a"],ProductCollapse:S,DeleteModal:_["a"],ProductModal:H},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/products?page=").concat(t)).then((function(t){t.data.success?(e.products=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1):e.isLoading=!1})).catch((function(){e.emitter.emit("push-message",{type:"error",message:"發生錯誤，請重新整理頁面"})})),this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/products/all")).then((function(t){if(t.data.success){var c=Object.values(t.data.products);e.totalAmount=c.length,c.forEach((function(t){e.productsCategory.includes(t.category)||e.productsCategory.push(t.category)}))}})).catch((function(){e.emitter.emit("push-message",{type:"error",message:"發生錯誤，請重新整理頁面"})}))},openCollapse:function(e){this.isOpen.id===e?this.isOpen.open=!this.isOpen.open:(this.isOpen.id=e,this.isOpen.open=!0),this.$refs.ProductCollapse.showCollapse(e)},openModal:function(e,t){"edit"===e?(this.tempProduct=Object(h["a"])(Object(h["a"])({},t),{},{formats:void 0===t.formats?[{format:"",content:""}]:JSON.parse(JSON.stringify(t.formats)),imagesUrl:void 0===t.imagesUrl?[]:Object(f["a"])(t.imagesUrl)}),this.$refs.updateModal.openModal()):"delete"===e&&(this.tempProduct=Object(h["a"])({},t),this.$refs.delModal.openModal())},updateProduct:function(e){var t=this;this.isLoading=!0;var c={data:e};this.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(e.id),c).then((function(e){e.data.success?(t.emitter.emit("push-message",{type:"success",message:e.data.message}),t.$refs.updateModal.hideModal(),t.getData(t.pagination.current_page)):t.emitter.emit("push-message",{type:"error",message:e.data.message})})).catch((function(){t.emitter.emit("push-message",{type:"error",message:"發生錯誤，請重新整理頁面"})}))},changeStatus:function(e){this.tempProduct=Object(h["a"])({},e),this.updateProduct(this.tempProduct)},deleteProduct:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/product/").concat(this.tempProduct.id)).then((function(t){t.data.success?(e.emitter.emit("push-message",{type:"success",message:t.data.message}),e.$refs.delModal.hideModal(),e.getData(e.pagination.current_page)):e.emitter.emit("push-message",{type:"error",message:t.data.message})})).catch((function(){e.emitter.emit("push-message",{type:"error",message:"發生錯誤，請重新整理頁面"})}))}},mounted:function(){this.getData()}};K.render=j;t["default"]=K},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,c){var o=c("1d80"),a=c("5899"),r="["+a+"]",n=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),s=function(e){return function(t){var c=String(o(t));return 1&e&&(c=c.replace(n,"")),2&e&&(c=c.replace(l,"")),c}};e.exports={start:s(1),end:s(2),trim:s(3)}},"6f53":function(e,t,c){var o=c("83ab"),a=c("df75"),r=c("fc6a"),n=c("d1e7").f,l=function(e){return function(t){var c,l=r(t),s=a(l),d=s.length,i=0,u=[];while(d>i)c=s[i++],o&&!n.call(l,c)||u.push(e?[c,l[c]]:l[c]);return u}};e.exports={entries:l(!0),values:l(!1)}},7156:function(e,t,c){var o=c("861d"),a=c("d2bb");e.exports=function(e,t,c){var r,n;return a&&"function"==typeof(r=t.constructor)&&r!==c&&o(n=r.prototype)&&n!==c.prototype&&a(e,n),e}},a9e3:function(e,t,c){"use strict";var o=c("83ab"),a=c("da84"),r=c("94ca"),n=c("6eeb"),l=c("5135"),s=c("c6b6"),d=c("7156"),i=c("c04e"),u=c("d039"),b=c("7c73"),p=c("241c").f,m=c("06cf").f,O=c("9bf2").f,j=c("58a8").trim,f="Number",h=a[f],g=h.prototype,V=s(b(g))==f,N=function(e){var t,c,o,a,r,n,l,s,d=i(e,!1);if("string"==typeof d&&d.length>2)if(d=j(d),t=d.charCodeAt(0),43===t||45===t){if(c=d.charCodeAt(2),88===c||120===c)return NaN}else if(48===t){switch(d.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+d}for(r=d.slice(2),n=r.length,l=0;l<n;l++)if(s=r.charCodeAt(l),s<48||s>a)return NaN;return parseInt(r,o)}return+d};if(r(f,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var v,y=function(e){var t=arguments.length<1?0:e,c=this;return c instanceof y&&(V?u((function(){g.valueOf.call(c)})):s(c)!=f)?d(new h(N(t)),c,y):N(t)},k=o?p(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;k.length>x;x++)l(h,v=k[x])&&!l(y,v)&&O(y,v,m(h,v));y.prototype=g,g.constructor=y,n(a,f,y)}},d81d:function(e,t,c){"use strict";var o=c("23e7"),a=c("b727").map,r=c("1dde"),n=r("map");o({target:"Array",proto:!0,forced:!n},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},da51:function(e,t,c){"use strict";c("a4d3"),c("e01a");var o=c("7a23"),a={class:"row"},r={class:"col-12 mb-8"},n={for:"productTitle",class:"form-label"},l=Object(o["createTextVNode"])("產品名稱"),s={key:0},d={class:"col-6 mb-8"},i={for:"productOriginPrice",class:"form-label"},u=Object(o["createTextVNode"])("產品原價"),b={key:0},p={class:"col-6 mb-8"},m={for:"productPrice",class:"form-label"},O=Object(o["createTextVNode"])("產品售價"),j={key:0},f={class:"row row-cols-2 align-items-end"},h={class:"col mb-8"},g={class:"form-label"},V=Object(o["createTextVNode"])("產品分類"),N={key:0},v={class:"col mb-8"},y={key:0,class:"d-flex"},k={class:"row row-cols-2 align-items-end"},x={class:"col "},C=Object(o["createVNode"])("label",{class:"form-label"},"產品規格",-1),w=Object(o["createVNode"])("p",null,":",-1),P={class:"col mb-8"},B={class:"row row-cols-2 align-items-end"},U={class:"col mb-8"},D=Object(o["createVNode"])("label",{class:"form-label"},"系列產品",-1),M=Object(o["createVNode"])("option",{selected:"",disabled:"",value:""},"請選擇",-1),A=Object(o["createVNode"])("option",{value:"珍珠系列"},"珍珠系列",-1),I=Object(o["createVNode"])("option",{value:"水晶系列"},"水晶系列",-1),F=Object(o["createVNode"])("option",{value:"鎖骨鏈系列"},"鎖骨鏈系列",-1),S={class:"row"},_={class:"col-6 mb-8"},T={for:"productUnit",class:"form-label"},L=Object(o["createTextVNode"])("產品單位"),E={key:0},$={class:"col-6 mb-8"},q=Object(o["createVNode"])("p",{class:"mb-3"},"是否上架產品",-1),J={class:"form-check mt-4"},R={key:0,class:"form-check-label",for:"flexCheckDefault"},z={key:1,class:"form-check-label",for:"flexCheckDefault"},G={class:"col-12 mb-8"},X=Object(o["createVNode"])("label",{for:"productDescription",class:"form-label"},"產品描述",-1),Y={class:"col-12 mb-8"},H=Object(o["createVNode"])("label",{for:"productContent",class:"form-label"},"說明內容",-1),K={class:"col-12 mb-8"},Q=Object(o["createVNode"])("p",{class:"mb-3"},"主要圖片",-1),W={class:"row row-cols-2 align-items-center"},Z={class:"col"},ee=Object(o["createVNode"])("label",{for:"productImage",class:"form-label text-xs"},"圖片位址",-1),te=Object(o["createVNode"])("p",{class:"text-xs mb-2"},"或",-1),ce={key:0,class:"btn btn-primary text-sm text-secondary",type:"button",disabled:""},oe=Object(o["createVNode"])("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1),ae=Object(o["createTextVNode"])(" 上傳中... "),re={key:1,class:"btn btn-primary text-sm text-secondary"},ne=Object(o["createVNode"])("span",{class:"material-icons text-base "}," file_upload ",-1),le=Object(o["createTextVNode"])(" 上傳圖片 "),se={class:"col"},de={class:"col-12 mb-8"},ie=Object(o["createVNode"])("p",{class:"mb-3"},"輪播圖片",-1),ue={class:"row row-cols-3 align-items-end"},be=Object(o["createVNode"])("p",{class:"text-xs mb-2"},"或",-1),pe={key:0,class:"d-block w-100 btn btn-primary text-sm text-secondary mb-4",type:"button",disabled:""},me=Object(o["createVNode"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Oe=Object(o["createTextVNode"])(" 上傳中... "),je={key:1,class:"d-block btn btn-primary text-sm text-secondary mb-4"},fe=Object(o["createVNode"])("span",{class:"material-icons text-base align-text-bottom"}," file_upload ",-1),he=Object(o["createTextVNode"])(" 上傳圖片 ");function ge(e,t,c,ge,Ve,Ne){var ve=this,ye=Object(o["resolveComponent"])("Field"),ke=Object(o["resolveComponent"])("ErrorMessage"),xe=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createBlock"])(xe,{ref:"addForm",class:"text-dark"},{default:Object(o["withCtx"])((function(e){var ge=e.errors;return[Object(o["createVNode"])("div",a,[Object(o["createVNode"])("div",r,[Object(o["createVNode"])("label",n,[l,c.isAdd?(Object(o["openBlock"])(),Object(o["createBlock"])("span",s,"必填")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(ye,{type:"text",class:["form-control",{"is-backend-invalid":ge["產品名稱"]}],id:"productTitle",name:"產品名稱",placeholder:"輸入產品標題",rules:"required",modelValue:Ve.tempProduct.title,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Ve.tempProduct.title=e}),modelModifiers:{lazy:!0,trim:!0}},null,8,["class","modelValue"]),Object(o["createVNode"])(ke,{name:"產品名稱",class:"backend-invalid-feedback"})]),Object(o["createVNode"])("div",d,[Object(o["createVNode"])("label",i,[u,c.isAdd?(Object(o["openBlock"])(),Object(o["createBlock"])("span",b,"必填")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(ye,{type:"number",class:["form-control",{"is-backend-invalid":ge["產品原價"]}],id:"productOriginPrice",name:"產品原價",min:"0",placeholder:"輸入產品原價",rules:Ne.isPositive,modelValue:Ve.tempProduct.origin_price,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Ve.tempProduct.origin_price=e}),modelModifiers:{number:!0}},null,8,["rules","class","modelValue"]),Object(o["createVNode"])(ke,{name:"產品原價",class:"backend-invalid-feedback"})]),Object(o["createVNode"])("div",p,[Object(o["createVNode"])("label",m,[O,c.isAdd?(Object(o["openBlock"])(),Object(o["createBlock"])("span",j,"必填")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(ye,{type:"number",class:["form-control",{"is-backend-invalid":ge["產品售價"]}],id:"productPrice",min:"0",name:"產品售價",placeholder:"輸入產品售價",rules:Ne.isPositive,modelValue:Ve.tempProduct.price,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Ve.tempProduct.price=e}),modelModifiers:{number:!0}},null,8,["rules","class","modelValue"]),Object(o["createVNode"])(ke,{name:"產品售價",class:"backend-invalid-feedback"})])]),Object(o["createVNode"])("div",f,[Object(o["createVNode"])("div",h,[Object(o["createVNode"])("label",g,[V,c.isAdd?(Object(o["openBlock"])(),Object(o["createBlock"])("span",N,"必填")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(ye,{name:"產品分類",class:["form-select",{"is-backend-invalid":ge["產品分類"]}],placeholder:"產品分類",rules:"required",as:"select",modelValue:Ve.tempProduct.category,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Ve.tempProduct.category=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("option",{disabled:c.product.category},"請選擇",8,["disabled"]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(Ve.productsCategory,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("option",{value:e,key:e},Object(o["toDisplayString"])(e),9,["value"])})),128))]})),_:2},1032,["class","modelValue"]),Object(o["createVNode"])(ke,{name:"產品分類",class:"backend-invalid-feedback"})]),Object(o["createVNode"])("div",v,[Ve.isAddCategory?(Object(o["openBlock"])(),Object(o["createBlock"])("div",y,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return Ve.tempCategory=e}),class:"form-control",placeholder:"新增分類"},null,512),[[o["vModelText"],Ve.tempCategory,void 0,{trim:!0}]]),Object(o["createVNode"])("div",{class:"btn btn-secondary text-white flex-shrink-0 ms-4",onClick:t[6]||(t[6]=function(){return Ne.addCategory&&Ne.addCategory.apply(Ne,arguments)})}," 新增 ")])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:1,class:"btn btn-secondary text-white",onClick:t[7]||(t[7]=function(e){return ve.isAddCategory=!0})}," 新增產品分類 "))])]),Object(o["createVNode"])("div",k,[Object(o["createVNode"])("div",x,[C,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(Ve.tempProduct.formats,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"d-flex align-items-center mb-8",key:t},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",name:"規格",class:" form-control me-2",placeholder:"規格","onUpdate:modelValue":function(t){return e.format=t}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.format]]),w,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",name:"內容",class:"form-control ms-2",placeholder:"內容","onUpdate:modelValue":function(t){return e.content=t}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.content]])])})),128))]),Object(o["createVNode"])("div",P,[Object(o["createVNode"])("div",{class:"btn btn-secondary text-white",onClick:t[8]||(t[8]=function(e){return Ne.addFormat()})}," 新增產品規格 ")])]),Object(o["createVNode"])("div",B,[Object(o["createVNode"])("div",U,[D,Object(o["withDirectives"])(Object(o["createVNode"])("select",{name:"系列產品",class:"form-select",placeholder:"系列產品","onUpdate:modelValue":t[9]||(t[9]=function(e){return Ve.tempProduct.series=e})},[M,A,I,F],512),[[o["vModelSelect"],Ve.tempProduct.series]])])]),Object(o["createVNode"])("div",S,[Object(o["createVNode"])("div",_,[Object(o["createVNode"])("label",T,[L,c.isAdd?(Object(o["openBlock"])(),Object(o["createBlock"])("span",E,"必填")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(ye,{type:"text",class:["form-control",{"is-backend-invalid":ge["產品單位"]}],id:"productUnit",name:"產品單位",placeholder:"輸入產品單位",rules:"required",modelValue:Ve.tempProduct.unit,"onUpdate:modelValue":t[10]||(t[10]=function(e){return Ve.tempProduct.unit=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(o["createVNode"])(ke,{name:"產品單位",class:"backend-invalid-feedback"})]),Object(o["createVNode"])("div",$,[q,Object(o["createVNode"])("div",J,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-check-input",type:"checkbox",name:"check",id:"flexCheckDefault","onUpdate:modelValue":t[11]||(t[11]=function(e){return Ve.tempProduct.is_enabled=e}),"true-value":1,"false-value":0},null,512),[[o["vModelCheckbox"],Ve.tempProduct.is_enabled]]),c.product.is_enabled?(Object(o["openBlock"])(),Object(o["createBlock"])("label",R,"上架")):(Object(o["openBlock"])(),Object(o["createBlock"])("label",z,"未上架"))])]),Object(o["createVNode"])("div",G,[X,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{type:"text",rows:"5",name:"產品描述",class:"form-control",id:"productDescription",placeholder:"輸入產品描述","onUpdate:modelValue":t[12]||(t[12]=function(e){return Ve.tempProduct.description=e})},null,512),[[o["vModelText"],Ve.tempProduct.description]])]),Object(o["createVNode"])("div",Y,[H,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{type:"text",rows:"5",name:"說明內容",class:"form-control",id:"productContent",placeholder:"輸入說明內容","onUpdate:modelValue":t[13]||(t[13]=function(e){return Ve.tempProduct.content=e})},null,512),[[o["vModelText"],Ve.tempProduct.content]])]),Object(o["createVNode"])("div",K,[Q,Object(o["createVNode"])("div",W,[Object(o["createVNode"])("div",Z,[ee,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",name:"主要圖片",class:"form-control mb-2",id:"productImage",placeholder:"輸入圖片位址","onUpdate:modelValue":t[14]||(t[14]=function(e){return Ve.tempProduct.imageUrl=e})},null,512),[[o["vModelText"],Ve.tempProduct.imageUrl]]),te,Ve.isUpload?(Object(o["openBlock"])(),Object(o["createBlock"])("button",ce,[oe,ae])):(Object(o["openBlock"])(),Object(o["createBlock"])("label",re,[Object(o["createVNode"])("input",{style:{display:"none"},type:"file",onChange:t[15]||(t[15]=function(e){return Ne.uploadImage("main",e)})},null,32),ne,le]))]),Object(o["createVNode"])("div",se,[Object(o["createVNode"])("img",{class:"w-100 h-auto",src:Ve.tempProduct.imageUrl},null,8,["src"])])])]),Object(o["createVNode"])("div",de,[ie,Object(o["createVNode"])("div",ue,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(Ve.tempProduct.imagesUrl,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"col mb-8",key:t},[Object(o["createVNode"])("img",{class:"w-100 h-auto",src:Ve.tempProduct.imagesUrl[t]},null,8,["src"]),Object(o["createVNode"])("label",{for:"productImage"+t,class:"form-label text-xs"},"圖片位址",8,["for"]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",name:"輪播圖片",class:"form-control mb-2",id:"productImage"+t,placeholder:"輸入圖片位址","onUpdate:modelValue":function(e){return Ve.tempProduct.imagesUrl[t]=e}},null,8,["id","onUpdate:modelValue"]),[[o["vModelText"],Ve.tempProduct.imagesUrl[t]]]),be,Ve.isUploads[t]?(Object(o["openBlock"])(),Object(o["createBlock"])("button",pe,[me,Oe])):(Object(o["openBlock"])(),Object(o["createBlock"])("label",je,[Object(o["createVNode"])("input",{style:{display:"none"},type:"file",onChange:function(e){return Ne.uploadImage(t,e)}},null,40,["onChange"]),fe,he])),Ve.tempProduct.imagesUrl[t]?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:2,class:"btn btn-outline-secondary text-xs white-hover",onClick:function(e){return Ne.deleteImage(t)}}," 刪除圖片 ",8,["onClick"])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:3,class:"btn btn-outline-secondary white-hover text-xs",onClick:function(e){return Ne.deleteImage(t)}}," 取消 ",8,["onClick"]))])})),128))]),Object(o["createVNode"])("div",{class:"btn btn-secondary text-white text-sm",onClick:t[16]||(t[16]=function(){return Ne.createImage&&Ne.createImage.apply(Ne,arguments)})},"新增輪播圖片")])])]})),_:1},512)}c("99af"),c("159b"),c("caad"),c("2532"),c("a434");var Ve={props:{product:{type:Object,default:function(){return{formats:[{format:"",content:""}],imagesUrl:[]}}},isAdd:Boolean},inject:["emitter"],data:function(){return{tempProduct:{},productsAll:[],productsCategory:[],isUpload:!1,isUploads:[],isAddCategory:!1,tempCategory:""}},watch:{product:function(){this.tempProduct=this.product}},methods:{getData:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/products/all")).then((function(t){t.data.success&&(e.productsAll=t.data.products,e.productsAll.forEach((function(t){e.productsCategory.includes(t.category)||e.productsCategory.push(t.category)})))})).catch((function(){e.emitter.emit("push-message",{type:"error",message:"發生錯誤，請重新整理頁面"})}))},addFormat:function(){var e={format:"",content:""};this.tempProduct.formats.push(e)},addCategory:function(){""!==this.tempCategory?(this.productsCategory.push(this.tempCategory),this.emitter.emit("push-message",{type:"success",message:"新增".concat(this.tempCategory,"分類")}),this.tempCategory="",this.isAddCategory=!1):this.emitter.emit("push-message",{type:"error",message:"請輸入分類名稱"})},uploadImage:function(e,t){var c=this,o=t.target.files[0],a=new FormData;a.append("file-to-upload",o),"main"===e?this.isUpload=!0:this.isUploads[e]=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("chiayu","/admin/upload"),a).then((function(t){t.data.success&&("main"===e?(c.tempProduct.imageUrl=t.data.imageUrl,c.isUpload=!1):(c.tempProduct.imagesUrl[e]=t.data.imageUrl,c.isUploads[e]=!1))}))},createImage:function(){void 0===this.tempProduct.imagesUrl&&(this.tempProduct.imagesUrl=[]),this.isUploads.push(!1),this.tempProduct.imagesUrl.push("")},deleteImage:function(e){this.tempProduct.imagesUrl.splice(e,1),this.isUploads.pop()},isPositive:function(e){return e>0&&e%1===0||"請輸入正整數"},cleanForm:function(){this.$refs.addForm.resetForm(),this.tempProduct.description="",this.tempProduct.content="",this.tempProduct.series="",this.tempProduct.imageUrl="",this.tempProduct.formats=[{format:"",content:""}],this.tempProduct.imagesUrl=[]}},created:function(){this.isAdd&&(this.tempProduct={formats:[{format:"",content:""}],imagesUrl:[]}),this.getData()}};Ve.render=ge;t["a"]=Ve}}]);
//# sourceMappingURL=chunk-58868271.0b7f6739.js.map